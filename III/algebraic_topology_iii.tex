\documentclass[a4paper]{article}

\def\npart{III}

\def\ntitle{Algebraic Topology}
\def\nlecturer{J.\ Rasmussen}

\def\nterm{Michaelmas}
\def\nyear{2019}

\input{header}

\graphicspath{{figures/}}

\DeclareMathOperator{\Map}{Map} % space of continuous maps between spaces
\renewcommand{\b}{\p}
\DeclareMathOperator{\Int}{Int} % interior
\renewcommand*{\P}{\mathbb{P}}
\newcommand{\cell}{\mathrm{cell}}
\DeclareMathOperator{\Tor}{Tor} % torsion
\DeclareMathOperator{\Ext}{Ext} % extension
\newcommand*{\cp}{\smile} % cup product
\DeclareMathOperator{\supp}{supp} % support

\begin{document}

\input{titlepage}

\tableofcontents

\setcounter{section}{-1}

\section{Homotopy}

\begin{definition}[homotopy]\index{homotopy}
  Suppose \(X, Y\) are topological spaces, \(f_0, f_1: X \to Y\) continuous. We say \(f_0\) is \emph{homotopic} to \(f_1\) if there is a continuous \(F: X \times I \to Y\) with \(F(x, 0) = f_0(x), F(x, 1) = f_1(x)\). We write \(f_0 \sim f_1\).
\end{definition}

Let \(f_t(x) = F(x, t)\). Then \(f_t\) is a path from \(f_0\) to \(f_1\) in \(\Map(X, Y) = \{f: X \to Y \text{ continuous}\}\).

\begin{convention}
  All spaces are topological spaces and all maps are continous.
\end{convention}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Let \(f_0, f_1: \R^n \to \R^n\), \(f_0(x) = 0, f_1(x) = x\) then \(f_0 \sim f_1\) via \(f_t(x) = tx\).
  \item Let \(S^1 = \{z \in \C: |z| = 1\}\). Take \(f_0, f_1: S^1 \to S^1\), \(f_0(z) = z, f_1(z) = -z\). Then \(f_0 \sim f_1\) via \(f_t(z) = e^{i\pi t}z\).
  \item Let \(S^n = \{v \in \R^{n + 1}: \norm v = 1\}\). Take \(f_0, f_1: S^n \to S^n\), \(f_0(v) = v, f_1(v) = -v\) the \emph{antipodal map}. We already knew \(f_0 \sim f_1\) if \(n = 1\) and we'll soon see \(f_0 \nsim f_1\) for \(n\) even.
  \item Let \(f_0, f_1: S^1 \to S^2\), \(f_0(x, y) = (0, 0, 1), f_1(x, y) = (x, y, 0)\). Then \(f_0 \sim f_1\) via \(f_t(x, y) = (tx, ty, \sqrt{1 - t^2})\).
  \item Let \(D^n = \{v \in \R^n: \norm v \leq 1\}\). Say \(f: S^{n - 1} \to Y\) extends to \(D^n\) if there exists \(F: D^n \to Y\) with \(F|_{S^{n - 1}} = f\). Then \(f\) extends to \(D^n\) if and only if \(f\) is homotopic to a constant map as we can define \(f_t(v) = F(tv)\).
  \end{enumerate}
\end{eg}

We state here some lemmas that will be assumed and whose proofs are omitted.

\begin{lemma}
  Homotopy is an equivalence relation on \(\Map(X, Y)\).
\end{lemma}

\begin{definition}
  We let \([X, Y]\) to be \(\Map(X, Y)/\sim\), i.e.\ the set of homotopy classes of maps \(X \to Y\). It is also the set of path components of \(\Map(X, Y)\). We write \([f]\) for the class of \(f\) in \([X, Y]\).
\end{definition}

\begin{lemma}
  Suppose \(f_0, f_1: X \to Y, g_0, g_1 : Y \to Z\). If \(f_0 \sim f_1, g_0 \sim g_1\) then \(g_0 \compose f_0 \sim g_1 \compose f_1\).
\end{lemma}

\begin{notation}
  If \(c \in Y\), we denote by \(c_X: X \to Y\) the constant map with image \(c\).
\end{notation}

\begin{corollary}
  Any \(f: X \to \R^n\) is homotopic to \(0_X\).
\end{corollary}

In other words, \([X, \R^n]\) has one element.

\begin{proof}
  We know \(\id_{\R^n} \sim 0_{\R^n}\) so
  \[
    f = \id_{\R^n} \compose f \sim 0_{\R^n} \compose f = 0_X.
  \]
\end{proof}

\begin{definition}[contractible]\index{contractible}
  \(X\) is \emph{contractible} if \(\id_X \sim c_X\) for some \(c \in X\).
\end{definition}

\begin{proposition}
  \(Y\) is contractible if and only if \([X, Y]\) has one element for all \(X\).
\end{proposition}

\begin{proof}
  Only if is the same as the proof of the corollary. For the other direction, \([Y, Y]\) has one element so \(\id_Y \sim c_Y\) for any \(c \in Y\).
\end{proof}

\begin{definition}[homotopy equivalence]\index{homotopy equivalence}
  Spaces \(X\) and \(Y\) are \emph{homotopy equivalence} if there are maps \(f: X \to Y, g: Y \to X\) such that \(f \compose g \sim \id_Y, g \compose f \sim \id_X\). We write \(X \sim Y\).
\end{definition}

\begin{eg}
  \(X \sim \{p\}\) if and only if \(X\) is contractible.
\end{eg}

\begin{proof}
  The only map \(f: X \to \{p\}\) is \(f(x) = p\). Let \(g: \{p\} \to X, g(p) = c\). Then \(f \compose g = \id_{\{p\}}\) and \(g \compose f = c_X\). Then \(g \compose f \sim \id_X\) if and only if \(c_X \sim \id_X\) if and only if \(X\) is contractible.
\end{proof}

\begin{lemma}
  If \(X_1 \sim X_2, Y_1 \sim Y_2\) then there is a bijection between \([X_1, Y_1]\) and \([X_2, Y_2]\).
\end{lemma}

The basic question that algebraic topology tries to answer is the follow: given spaces \(X\) and \(Y\), is \(X \sim Y\)? What is \([X, Y]\)?

One of the tools used is homotopy groups, which we mention briefly here.

\begin{definition}[map of pairs]\index{map of pairs}
  A map \(f: (X, A) \to (Y, B)\) means that
  \begin{itemize}
  \item \(A \subseteq X, B \subseteq Y\),
  \item \(f: X \to Y\),
  \item \(f(A) \subseteq B\).
  \end{itemize}
\end{definition}

If \(f_0, f_1: (X, A) \to (Y, B)\), we say \(f_0 \sim f_1\) if there exist \(F: (X \times I, A \times I) \to (Y, B)\) with \(F(x, 0) = f_0(x), F(x, 1) = f_1(x)\).

\begin{notation}
  We denote by \(*\) the point \((-1, 0, \dots, 0) \in S^n\).
\end{notation}

\begin{definition}[homotopy group]\index{homotopy group}
  If \(p \in X\), we define the \emph{\(n\)th homotopy group} of \((X, p)\) to be
  \[
    \pi_n(X, p) = [(S^n, *), (X, p)] = [(D^n, S^{n - 1}), (X, p)] = [(I^n, \b I^n), (X, p)]
  \]
  where the last equality is a homeomorphism and the second equality is induced by
  \begin{align*}
    \pi: D^n &\to D^n/S^{n -1} = S^n \\
    v &\mapsto (1 - 2 \norm v, v \sqrt{1 - (1 - 2\norm v)^2})
  \end{align*}
\end{definition}

For \(n > 0\), \(\pi_n(X, p)\) is a group. The identity is \(c_{S^n}\). For \(n > 1\), \(\pi_n(X, p)\) is abelian.

A pointed map between pointed spaces \(f: (X, p) \to (Y, q)\) induces
\begin{align*}
  f_*: \pi_n(X, p) &\to \pi_n(Y, q) \\
  [\gamma] &\mapsto [f \compose \gamma]
\end{align*}
which is well-defined by lemma 2.

This defines a functor between the cateogry of pointed spaces with pointed maps to the category of groups with homomorphisms: it sends a space \((X, p)\) to \(\pi_n(X, p)\) and a map \(f: (X, p) \to (Y, q)\) to the homomorphism \(f_*: \pi_n(X, p) \to \pi_n(Y, q)\), satisfying
\begin{enumerate}
\item \((\id_{(X, p)})_* = \id_{\pi_n(X, p)}\),
\item \((f \compose g)_* = f_* \compose g_*\).
\end{enumerate}
Furthermore \(f_*\) is homotopy invariant: if \(f \sim g\) then \(f_* = g_*\) since
\[
  f_*([\gamma]) = [f \compose \gamma] = [g \compose \gamma] = g_*([\gamma]).
\]

For example the first few non-trivial homotopy groups of \(S^1\) and \(S^2\) are
\begin{table}[h]
  \centering
  \begin{tabular}{c|c|c|c|c|c|c|c}
    & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\ \hline
    \(\pi_n(S^1)\) & \(\Z\) &&&&&& \\ \hline
    \(\pi_n(S^2)\) & \(0\) & \(\Z\) & \(\Z\) & \(\Z/2\) & \(\Z/2\) & \(\Z/12\) &\(\Z/2\)
  \end{tabular}
\end{table}

\section{Homology}

The goal is to define functors \(H_n\) from the category of spaces with continuous maps to the category of abelian groups with homomorphisms, satifying
\begin{enumerate}
\item if \(f \sim g\) then \(f_* = g_8\),
\item dimension axiom: informally \(H_n(X) = 0\) if \(n > \dim X\).
\end{enumerate}

\subsection{Chain complexes}

Let \(R\) be a commutative ring (e.g.\ \(\Z, \Q, \Z/p\)).

\begin{definition}[chain complex]\index{chain complex}
  A \emph{chain complex} \((C_*, d)\) over \(R\) is
  \begin{enumerate}
  \item \(R\)-modules \(C_i\) for \(i \in \Z\), and
  \item homomorphisms \(d_i: C_i \to C_{i - 1}\) such that
  \item \(d_i \compose d_{i + 1} = 0\) for all \(i\).
  \end{enumerate}
  We usually write
  \[
    \begin{tikzcd}
      \cdots \ar[r] & C_{i + 1} \ar[r, "d_{i + 1}"] & C_i \ar[r, "d_i"] & C_{i - 1} \ar[r] & \cdots
    \end{tikzcd}
  \]
\end{definition}

\begin{notation}
  Note that \(C_*\) can mean two different things: it can either mean
  \[
    C_* =
    \begin{cases}
      \Z & * = 0 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  or \(C_* = \bigoplus_{i \in \Z} C_i, d = \sum d_i: C_* \to C_{* - 1}\).
\end{notation}

\subsubsection{Chain complex of a simplex}

\begin{definition}[simplex]\index{simplex}
  The \emph{\(n\)-dimensional simplex} is
  \[
    \Delta^n = \{(v_0, \dots, v_n) \in \R^{n + 1}: v_i \geq 0, \sum_{i = 0}^n v_i = 1\}.
  \]
  For \(n < 0\) we set \(\Delta^n = \emptyset\).
\end{definition}

\begin{definition}[face]
  If \(I = \{i_0 < i_1 < \dots < i_k\} \subseteq \{0, 1, \dots n\}\) then
  \[
    f_I = \{v \in \Delta^n: v_i = 0 \text{ if } i \notin I\}
  \]
  is a \(k\)-dimensional \emph{face} of \(\Delta^n\). The \emph{face map} is
  \begin{align*}
    F_I: \Delta^k &\to f_I \\
    w &\mapsto v
  \end{align*}
  where
  \[
    v_i =
    \begin{cases}
      0 & i \notin I \\
      w_j & i = \varphi(j)
    \end{cases}
  \]
  where
  \begin{align*}
    \varphi: \{0, \dots, k\} &\to I \\
    j &\mapsto i_j
  \end{align*}
\end{definition}

\begin{definition}[reduced chain complex]\index{chain complex!reduced}
  The \emph{reduced chain complex} of the simplex \(\Delta^n\), \(\widetilde S_*(\Delta^n)\), is the chain complex over \(\Z\) defined by
  \[
    \widetilde S_k(\Delta^n) = \langle f_I: |I| = k + 1 \rangle,
  \]
  the free abelian group with basis \(f_I\) for \(I\) a \(k\)-dimensional face, and
  \begin{align*}
    d_k: \widetilde S_k(\Delta^n) &\to \widetilde S_{k - 1}(\Delta^n) \\
    f_I &\mapsto \sum_{j = 0}^k (-1)^j f_{I \setminus \{i_j\}}
  \end{align*}
\end{definition}

\begin{eg}
  Take \(n = 2\). Then
  \begin{align*}
    C_2 &= \langle f_{012} \rangle \\
    C_1 &= \langle f_{01}, f_{02}, f_{12} \rangle \\
    C_0 &= \langle f_0, f_1, f_2 \rangle \\
    C_{-1} &= \langle f_\emptyset \rangle
  \end{align*}
  and for example we have
  \begin{align*}
    d(f_{012}) &= f_{12} - f_{02} + f_{01} \\
    d(f_{12}) &= f_2 - f_1 \\
    d(f_{02}) &= f_2 - f_0 \\
    d(f_{01}) &= f_1 - f_0
  \end{align*}
  so
  \[
    d^2(f_{012}) = 0.
  \]
\end{eg}

\begin{proposition}
  We have
  \[
    d^2 = 0
  \]
  so it is indeed a chain complex.
\end{proposition}

\begin{proof}
  Enough to check \(d^2(f_I) = 0\). \(d^2(f_I)\) is a sum of terms of the form \(f_{I \setminus \{i_j, i_{j'}\}}\) where \(i_j < i_{j'}\). The coefficient of \(f_{I \setminus \{i_j, i_{j'}\}}\) is
  \[
    (-1)^j (-1)^{j' - 1} + (-1)^{j'} (-1)^{j}
  \]
  where the first term is obtained by omitting \(i_j\) first and then \(i_{j'}\), and the second by omitting \(i_{j'}\) first and then \(i_j\). Then have opposite signs.
\end{proof}

Note that if we have a chain complex then \(d^2 = 0\) so \(\im d_{i + 1} \subseteq \ker d_i\).

\begin{definition}[homology group]\index{homology}
  If \((C_*, d)\) is a chain complex, its \emph{\(i\)th homology group} is
  \[
    H_i(C_*) = \frac{\ker d_i}{\im d_{i + 1}}.
  \]
  We let
  \[
    H_*(C_*) = \bigoplus_{i \in \Z} H_i = \frac{\ker d}{\im d}.
  \]
\end{definition}

\begin{eg}
  \(H_*(\widetilde S_*(\Delta^2)) = 0\).
\end{eg}

\begin{eg}[unreduced complex of a simplex]
  Define the unreduced complex to be
  \[
    S_*(\Delta^n) =
    \begin{cases}
      \widetilde S_k(\Delta^n) & k \geq 0 \\
      0 & k < 0
    \end{cases}
  \]
  Check that
  \[
    H_*(S(\Delta^2)) =
    \begin{cases}
      \Z & k = 0 \\
      0 & k \neq 0
    \end{cases}
  \]
\end{eg}

\begin{definition}[chain map]\index{chain map}
  If \((C, d)\) and \((C', d')\) are chain complexes over \(R\), a \emph{chain map} \(f: (C, d) \to (C', d')\) is homomorphisms \(f_i: C_i \to C_i'\) such that
  \[
    \begin{tikzcd}
      \cdots \ar[r] & \ar[r] C_{i + 1} \ar[r, "d_{i + 1}"] \ar[d, "f_{i + 1}"] & C_i \ar[r, "d_i"] \ar[d, "f_i"] & C_{i - 1} \ar[r] \ar[d, "f_{i - 1}"] & \cdots \\
      \cdots \ar[r] & \ar[r] C'_{i + 1} \ar[r, "d'_{i + 1}"] & C'_i \ar[r, "d'_i"] & C'_{i - 1} \ar[r] & \cdots
    \end{tikzcd}
  \]
  commutes. That is to say let \(f = \sum f_i: C_* \to C'_*\) then we have
  \[
    d'f = fd.
  \]
\end{definition}

\begin{eg}
  If \(f_I\) is a \(k\)-dim face of \(\Delta^n\) then there is a chain map
  \begin{align*}
    \varphi_I: \widetilde S_*(\Delta^k) &\to \widetilde S_*(\Delta^n) \\
    f_J &\mapsto f_{\varphi(J)}
  \end{align*}
  where \(\varphi(j) = i_j\) as before.
\end{eg}

If \(f: (C, d) \to (C', d')\) is a chain map then it follows that \(f(\ker d) \subseteq \ker d', f(\im d) \subseteq \im d'\), so there is a well-defined map
\begin{align*}
  f_*: H_*(C) &\to H_*(C') \\
  [z] &\mapsto [f(z)]
\end{align*}

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item \(\id_C\) is a chain map and \((\id_C)_* = \id_{H_*(C)}\).
  \item If \(f: C \to C', g: C' \to C''\) are chain maps then so is \(g \compose f\) and \((g \compose f)_* = g_* \compose f_*\).
  \end{enumerate}
  In other words, there is a functor \(H_*\) from the category of chain complexes over \(R\) with chain maps to the category of \(R\)-modules.
\end{lemma}

\subsection{Singular chain complex}

Let \(X\) be a topological space. A \emph{singular \(k\)-simplex} in \(X\) is a map \(\sigma: \Delta^k \to X\). Thus a singular \(0\)-simplex is a point in \(X\) and a \(1\)-simplex is a curve in \(X\).

\begin{definition}[singular chain complex]\index{chain complex!singular}
  A \emph{singular chain complex} \(C_*(X)\) is given by
  \[
    C_k(X) = \langle \sigma: \Delta^k \to X \text{ continuous} \rangle,
  \]
  the free abelian group generated by \(\sigma\)'s and for \(\sigma: \Delta^k \to X\),
  \[
    d(\sigma) = \sum_{j = 0}^k (-1)^j \sigma \compose F_{\{0, \dots, k\} \setminus \{j\}}.
  \]
\end{definition}

Elements of the chain groups are finite sums \(\sum_{i = 1}^N a_i \sigma_i\) where \(a_i \in \Z\).

\begin{lemma}
  \(d^2 = 0\) so this is a chain complex.
\end{lemma}

\begin{proof}
  If \(\sigma: \Delta^k \to X\), consider the homomorphism
  \begin{align*}
    \varphi_\sigma: S_*(\Delta^k) &\to C_*(X) \\
    f_I &\mapsto \sigma \compose F_I
  \end{align*}
  \(d\) was chosen so \(d \varphi_\sigma = \varphi_\sigma d\). Then
  \[
    d^2(\sigma) = d^2(\sigma \compose \id_{\Delta^k}) = d^2(\varphi_\sigma(f_{\{0, \dots, k\}}))
    = \varphi_\sigma(d^2(f_{\{0, \dots, k\}})) = \varphi_\sigma(0) = 0
  \]
  since \(d^2 = 0\) in \(S_*(\Delta^k)\).
\end{proof}

We have a variant called \emph{reduced singular chain complex} of \(X\) which is defined by
\[
  \widetilde C_k(X) = \langle \sigma: \Delta^k \to X \rangle
\] 
for \(k \geq -1\) and \(\widetilde C_k(X) = 0\) for \(k < -1\). We have
\[
  \widetilde C_k(X) =
  \begin{cases}
    C_k(X) & k \geq 0 \\
    \langle \sigma_\emptyset \rangle \cong \Z & k = -1
  \end{cases}
\]
and if \(\sigma: \Delta^0 \to X\) then \(d\sigma = \sigma_\emptyset\).

\begin{definition}[singular homology]\index{singular homology}
  \(H_n(X) = H_n(C_*(X))\) and \(\widetilde H_n(X) = H_n(\widetilde C_*(X))\) are the \(n\)th \emph{(reduced) singular homology groups} of \(X\).
\end{definition}

If \(f: X \to Y\) is a map, define
\begin{align*}
  f_\#: C_*(X) &\to C_*(Y) \\
  \sigma &\mapsto f \compose \sigma
\end{align*}
Then
\begin{align*}
  d(f_\#(\sigma)) &= \sum_{j = 0}^n (-1)^j (f \compose \sigma) \compose F_{\{0, \dots, k\} \setminus \{j\}} \\
  &= \sum_{j = 0}^k (-1)^j f \compose (\sigma \compose F_{\{0, \dots, k\} \setminus \{j\}}) \\
  &= f_\# (d \sigma)
\end{align*}
so \(f_\#\) is a chain map.

\begin{lemma}\leavevmode
  \begin{enumerate}
  \item \((\id_X)_\# = \id_{C_*(X)}\).
  \item \((f \compose g)_\# = f_\# \compose g_\#\).
  \end{enumerate}
  In other words, there is a functor from the category of topological spaces to the cateogory of chain complexes over \(\Z\).
\end{lemma}

\begin{notation}
  If \(f: X \to Y\), write \(f_*: H_*(X) \to H_*(Y)\) instead of \((f_\#)_*\).
\end{notation}

\begin{corollary}
  There is a functor from the category of topological spaces to the category of \(\Z\)-modules.
\end{corollary}

\begin{proof}
  Composition of functors is a functor.
\end{proof}

\begin{eg}
  Let \(X = S^1\) and \(\sigma \in C_1(S^1)\) be the loop starting at \(p\) and loops around \(S^1\) once. Then \(d \sigma = \sigma_p - \sigma_p = 0\). Let \(\sigma_1, \sigma_2\) be paths from \(p\) to \(q\) and from \(q\) to \(p\). It is an exercise to find \(\tau \in C_2(X)\) with \(d\tau = \sigma - (\sigma_1 + \sigma_2)\), so \([\sigma] = [\sigma_1 + \sigma_2]\).
  \begin{figure}[ht]
  \centering
  \begin{minipage}{0.5\textwidth}
    \centering
    \def\svgwidth{.8\columnwidth}
    \input{figures/singular1_on_S1.pdf_tex}
  \end{minipage}%
  \begin{minipage}{0.5\textwidth}
    \centering
    \def\svgwidth{.8\columnwidth}
    \input{figures/singular2_on_S1.pdf_tex}
  \end{minipage}
\end{figure}
\end{eg}

\begin{proposition}\leavevmode
  \begin{enumerate}
  \item If \(X\) is path-connected then \(H_0(X) \cong \Z\).
  \item If \(X\) is the singleton \(\{p\}\) then
    \[
      H_*(X) =
      \begin{cases}
        \Z & * = 0 \\
        0 & \text{otherwise}
      \end{cases}
    \]
    and \(\widetilde H_*(X) = 0\).
  \item Let \(\pi_0(X)\) be the set of path-components of \(X\). Then
    \[
      H_*(X) = \bigoplus_{P \in \pi_0(X)} H_*(P).
    \]
  \end{enumerate}
\end{proposition}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item We have
    \begin{align*}
      \ker d_0 &= C_0(X) = \langle \sigma_p: p \in X \rangle \\
      \im d_1 &= \text{span} \{\sigma_p - \sigma_q: p, q \in X\}
    \end{align*}
    since \(X\) is path-connected. Thus
    \begin{align*}
      \ker d_0 &\to \Z \\
      \sum a_i \sigma_{p_i} &\mapsto \sum a_i
    \end{align*}
    is a surjective homomorphism with kernel \(\im d_1\).
  \item There is a unique map \(\sigma_n: \Delta^n \to X\) and
    \[
      d \sigma_n = \sum_{j = 0}^n (-1)^j \sigma_{n - 1} =
      \begin{cases}
        \sigma_{n - 1} & n \text{ even and } n > 0 \\
        0 & \text{otherwise}
      \end{cases}
    \]
    so
    \begin{align*}
      \ker d &= \langle \sigma_0, \sigma_1, \sigma_3, \dots \rangle \\
      \im d &= \langle \sigma_1, \sigma_3, \sigma_5, \dots \rangle
    \end{align*}
    so the result follows. The reduced homology is left as an exercise.
  \item Let \(\iota_P: P \embed X\) be the inclusion. Then we have
    \[
      j = \sum (\iota_P)_\#: \bigoplus_{P \in \pi_0(X)} C_*(P) \to C_*(X)
    \]
    an injective map. \(\Delta^k\) is path-connected so if \(\sigma: \Delta^k \to X\) then \(\im \sigma \subseteq P\) for some \(P \in \pi_0(X)\) so \(j\) is also surjective.

    In general, if \(\{(C^\alpha, d^\alpha)\}_{\alpha \in A}\) is a family of chain complexes then so is
    \[
      (C^{\text{tot}}, D) = (\bigoplus_{\alpha \in A} C^\alpha, \sum_{\alpha \in A} d^\alpha)
    \]
    and
    \begin{align*}
      \ker D &= \bigoplus_{\alpha \in A} \ker d^\alpha \\
      \im D &= \bigoplus_{\alpha \in A} \im d^\alpha
    \end{align*}
    so
    \[
      H_*(C^{\text{tot}}) \cong \bigoplus_{\alpha \in A} H_*(C^\alpha).
    \]
    Now apply this to \(j\).
  \end{enumerate}
\end{proof}

\subsection{Homotopy invariance}

If \(g_0, g_1: X \to Y\) are homotopic then we want to show \(g_{0*} = g_{1*}: H_*(X) \to H_*(Y)\).

\begin{definition}[chain homotopy]\index{chain homotopy}
  Two chain maps \(g_0, g_1: (C, d) \to (C', d')\) are \emph{chain homotopic}, written \(g_0 \sim g_1\), if there is a homomorphism \(h: C_* \to C_{* + 1}'\) such that
  \[
    d'h + hd = g_1 - g_0.
  \]
\end{definition}

\begin{lemma}
  Chain homotopy is an equivalence relation.
\end{lemma}

\begin{proposition}
  If \(g_0\) and \(g_1\) are chain homotopic then \(g_{0*} = g_{1*}: H_*(C) \to H_*(C')\).
\end{proposition}

\begin{proof}
  Suppose \([x] \in H_*(C)\). Then
  \begin{align*}
    g_{1*}[x] - g_{0*}[x]
    &= [g_1(x) - g_0(x)] \\
    &= [d'h(x) + hd(x)] \\
    &= [d'h(x)] \\
    &= 0
  \end{align*}
  since \(d'h(x) \in \im d'\).
\end{proof}

\begin{definition}[chain homotopy equivalent]\index{chain homotopy equivalent}
  Chain complexes \((C, d)\) and \((C', d')\) are \emph{chain homotopy equivalent}, written \(C \sim C'\) if there exist chain maps \(f: C \to C', g: C' \to C\) such that \(fg \sim \id_{C'}, gf \sim \id_C\).
\end{definition}

\begin{ex}
  If \(C \sim C'\) then \(H_*(C) \cong H_*(C')\).
\end{ex}

\subsubsection{Universal chain homotopy}

Let \(c_n, c_n': \Delta^n \to \Delta^n \times [0, 1]\), \(c_n(v) = (v, 0), c_n'(v) = (v, 1)\) and consider the chain maps \(\varphi_{c_n}, \varphi_{c_n'}: S_*(\Delta^n) \to C_*(\Delta^n \times [0, 1])\), \(\varphi_{c_n}(f_I) = c_n \compose F_I\).

\begin{notation}
  \(\Delta^n \times [0, 1]\) is a convex subset of \(\R^{n + 1} \times [0, 1]\). If \(p_0, \dots, p_k \in \Delta^n \times [0, 1]\), define a map
  \begin{align*}
    [p_0 \cdots p_k]: \Delta^k &\to \Delta^n \times [0, 1] \\
    v &\mapsto \sum_{i = 0}^k v_i p_i
  \end{align*}
  Then
  \[
    d[p_0 \cdots p_k] = \sum_{j = 0}^k (-1)^j [p_0 \cdots \hat p_j \cdots p_k]
  \]
  where the hat above \(\hat p_j\) means that \(p_j\) is omitted.

  Furthermore we call \(f_i \times 0 = i\) and \(f_i \times 1 = i'\).
\end{notation}

\begin{figure}[ht]
  \centering
  \def\svgwidth{.8\columnwidth}
  \input{figures/chain_homotopy.pdf_tex}
  \caption{\(\Delta^1 \times [0, 1]\)}
  \label{fig:chain homotopy}
\end{figure}

The intuition for chain homotopy is illustrated by \Cref{fig:chain homotopy}. Suppose we set \(h(f_0), h(f_1)\) to be the segments \(0 \times [0, 1]\) and \(1 \times [0, 1]\), and \(h(f_{01})\) the square \(\Delta^1 \times [0, 1]\). Then
\begin{align*}
  dh(f_0) &= \varphi_{c'}(f_0) - \varphi_c(f_0) \\
  hd(f_0) &= h(0) = 0
\end{align*}
so \(dh(f_0) + hd(f_0) = \varphi_{c'}(f_0) - \varphi_c(f_0)\) and
\begin{align*}
  dh(f_{01}) &= (\text{top} + \text{bottom}) + (\text{sides}) \\
  hd(f_{01}) &= - (\text{sides})
\end{align*}
so again
\[
  dh(f_{01}) + hd(f_{01}) = \text{top} + \text{bottom} = \varphi_{c'}(f_{01}) - \varphi_c(f_{01}).
\]
Thus \(h\) would be a chain homotopy if it didn't map \(f_{01}\) to the square, which is not a simplex. To overcome this problem we cut the square into triangles \(00'1'\) and \(011'\). It is worthwhile to pause for a second to think what a chain homotopy for \(\Delta^2\) looks like.

\begin{proposition}
  \(\varphi_{c_n} \sim \varphi_{c_n'}\).
\end{proposition}

\begin{proof}
  Define
  \begin{align*}
    U_n: S_*(\Delta^n) &\to C_{* + 1}(\Delta^n \times [0, 1]) \\
    f_I &\mapsto \sum_{j = 0}^k (-1)^j [i_0 \dots i_j i_j' \cdots i_k']
  \end{align*}
  for \(I = \{i_0 < i_1 < \dots < i_k\}\). Then
  \begin{align*}
    U_n d(f_I) &= \sum_{a < b} (-1)^{a + b - 1} [i_0 \cdots \hat i_a i_b i_b' \cdots i_k'] \\
               &+ \sum_{a > b} (-1)^{a + b} [i_0 \cdots i_b i_b' \cdots \hat i_a' \cdots i_k'] \\
    dU_n(f_I) &= \sum_{a < b} (-1)^{b + a} [i_0 \cdots \hat i_a \cdots i_b i_b' \cdots i_k'] \\
               &+ \sum_{a > b} (-1)^{b + a + 1} [i_0 \cdots i_b i_b' \cdots \hat i_a \cdots i_k'] \\
               &+ \sum_{b = 0}^k (-1)^{b + b} [i_0 \cdots i_{b - 1} i_b' \cdots i_k'] \\
               &+ \sum_{b = 1}^{k + 1} (-1)^{b - 1 + b} [i_0 \cdots i_{b - 1} i_b' \cdots i_k']
  \end{align*}
  so almost everything cancels out and we have
  \[
    (dU_n + U_nd) (f_I) = [i_0' \cdots i_k'] - [i_0 \cdots i_k] = \varphi_{c_n'} (f_I) - \varphi_{c_n}(f_I).
  \]
\end{proof}

\begin{notation}
  Let \(\overline F_I = F_I \times \id_{[0, 1]}: \Delta^k \times [0, 1] \to \Delta^n \times [0, 1]\).
\end{notation}

\begin{lemma}
  The following diagram commutes:
  \[
    \begin{tikzcd}
      S_*(\Delta^k) \ar[r, "\varphi_I"] \ar[d, "U_k"] & S_*(\Delta^n) \ar[d, "U_n"] \\
      C_{* + 1}(\Delta^k \times [0, 1]) \ar[r, "\overline F_{I \#}"] & C_{* + 1} (\Delta^n \times [0, 1])
    \end{tikzcd}
  \]
\end{lemma}

\begin{proof}
  Checking definitions.
\end{proof}

\begin{theorem}
  Suppose \(g_0, g_1: X \to Y\) are homotopic then \(g_{0\#} \sim g_{1\#}\).
\end{theorem}

\begin{proof}
  Let \(G: X \times [0, 1] \to Y\) be the homotopy. Define
  \begin{align*}
    G_\sigma: \Delta^n \times [0, 1] &\to Y \\
    (v, t) &\mapsto G(\sigma(v), t)
  \end{align*}
  Then \(G_{\sigma \compose F_I} = G_\sigma \compose \overline F_I\). Define
  \begin{align*}
    h: C_*(X) &\to C_{* + 1}(Y) \\
    \sigma &\mapsto G_{\sigma \#} (U_n (f_{0 \cdots n}))
  \end{align*}
  then
  \begin{align*}
    dh(\sigma) &= d G_{\sigma \#} (U_n (f_{0 \cdots n})) = G_{\sigma \#} (d U_n(f_{0 \cdots n})) \\
    hd(\sigma) &= h (\sum (-1)^j \sigma \compose F_{\hat j}) \\
               &= \sum (-1)^j G_{\sigma \compose F_{\hat j} \#} (U_{n - 1} (f_{0 \cdots n - 1})) \\
               &= \sum (-1)^j G_{\sigma \#} \overline F_{\hat j\#} (U_{n - 1}(f_{0 \cdots n - 1})) \\
               &= \sum (-1)^j G_{\sigma \#} (U_n(\varphi_{\hat j} (f_{0 \cdots n - 1}))) \quad \text{by lemma} \\
               &= G_{\sigma \#} (U_n (\sum (-1)^j \varphi_{\hat j} (f_{0 \cdots n - 1}))) \\
               &= G_{\sigma \#} (U_n d(f_{0 \cdots n}))
  \end{align*}
  so
  \begin{align*}
    (dh + hd)(\sigma) &= G_{\sigma \#} (U_nd + dU_n) (f_{0 \cdots n}) \\
                      &= G_{\sigma \#} ((\varphi_{i_n'} - \varphi_{i_n}) (f_{0 \cdots n})) \\
                      &= G_{\sigma \#} (i_n' - i_n) \\
                      &= g_1 \compose \sigma - g_0 \compose \sigma \\
                      &= g_{1\#}(\sigma) - g_{0\#}(\sigma)
  \end{align*}
\end{proof}

\begin{corollary}
  If \(g_0, g_1: X \to Y\) are homotopic then \(g_{0*} = g_{1*}: H_*(X) \to H_*(Y)\).
\end{corollary}

\begin{corollary}
  If \(X\) are \(Y\) are homotopy equivalent then \(H_*(X) \cong H_*(Y)\).
\end{corollary}

\begin{proof}
  \(X \sim Y\) so we have \(f: X \to Y, g: Y \to X\) with \(f \compose g \sim \id_Y, g \compose f \sim \id_X\). Then
  \[
    f_* \compose g_* = (f \compose g)_* = (\id_Y)_* = \id_{H_*(Y)}
  \]
  and similarly \(g_* \compose f_* = \id_{H_*(X)}\) so \(g_*\) and \(f_*\) are inverses to each other.
\end{proof}

\begin{corollary}
  If \(X\) is contractible then
  \[
    H_*(X) =
    \begin{cases}
      \Z & * = 0 \\
      0 & * > 0
    \end{cases}
  \]
\end{corollary}

\subsection{Homology of a pair}

\subsubsection{Exact sequence}

Suppose we have a sequence
\[
  \begin{tikzcd}
    \cdots \ar[r] & A_{i + 1} \ar[r, "f_{i + 1}"] & A_i \ar[r, "f_i"] & A_{i - 1} \ar[r, "f_{i - 1}"] & \cdots
  \end{tikzcd}
\]
where \(A_i\)'s are \(R\)-modules and \(f_i\)'s are homomorphisms.

\begin{definition}[exact sequence]\index{exact sequence}
  We say the sequence is \emph{exact} at \(A_i\) if \(\ker f_i = \im f_{i + 1}\). We say the sequence is \emph{exact} if it is exact at all \(A_i\).
\end{definition}

In other words, the sequence is exact is the same as saying \((A_*, f)\) is a chain complex with \(H_*(A) = 0\).

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(
    \begin{tikzcd}
      0 \ar[r] & A \ar[r, "\iota"] & B 
    \end{tikzcd}
  \) is exact at \(A\) if and only if \(\iota\) is injective.

\item \(
    \begin{tikzcd}
      B \ar[r, "\pi"] & C \ar[r] & 0
    \end{tikzcd}
  \) is exact at \(C\) if and only if \(\pi\) is surjective.
\item \(
  \begin{tikzcd}
    0 \ar[r] & A \ar[r] & 0
  \end{tikzcd}
  \) is exact if and only if \(A = 0\).
\item \(
  \begin{tikzcd}
    0 \ar[r] & A \ar[r, "f"] & B \ar[r] & 0
  \end{tikzcd}
  \) is exact if and only if \(f: A \to B\) is an isomorphism.
\item \(
  \begin{tikzcd}
    0 \ar[r] & A \ar[r, "\iota"] & B \ar[r, "\pi"] & C \ar[r] & 0
  \end{tikzcd}
  \) is exact if and only if \(\iota: A \embed B \) and \(\pi: B \to C\) is a surjection with kernel \(\im A\). This is called a \emph{short exact sequence} (SES). In particular, a long exact sequence gives a bunch of short exact sequences
  \[
    \begin{tikzcd}
      0 \ar[r] & \coker f_{i + 2} \ar[r, "f_{i + 1}"] & A_i \ar[r, "f_i"] & \ker f_{i - 1} \ar[r] & 0
    \end{tikzcd}
  \]
  \end{enumerate}
\end{eg}

\begin{definition}
  A sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & A_* \ar[r, "\iota"] & B_* \ar[r, "\pi"] & C_* \ar[r] & 0
    \end{tikzcd}
  \]
  is a \emph{SES of chain complexes} if
  \begin{enumerate}
  \item \(A_*, B_*, C_*\) are chain complexes and \(\iota, \pi\) are chain maps.
  \item \(
    \begin{tikzcd}
      0 \ar[r] & A_i \ar[r, "\iota"] & B_i \ar[r, "\pi"] & C_i \ar[r] & 0
    \end{tikzcd}
    \) is a exact for all \(i\).
  \end{enumerate}
\end{definition}

\begin{proposition}[snake lemma]\index{snake lemma}
  If
  \[
    \begin{tikzcd}
      0 \ar[r] & A_* \ar[r, "\iota"] & B_* \ar[r, "\pi"] & C_* \ar[r] & 0
    \end{tikzcd}
  \]
  is a SES of chain complexes then there is a long exact sequence on homology
  \[
    \begin{tikzcd}
      H_*(A) \ar[r, "\iota_*"] & H_*(B) \ar[r, "\pi_*"] & H_*(C) \ar[dll, "\b"', out=0, in=180] \\
      H_{* - 1}(A) \ar[r, "\iota_*"] & H_{* - 1}(B) \ar[r, "\pi_*"] & H_{* - 1}(C) \ar[dll, "\b"', out=0, in=180] \\
      H_{* - 2} \ar[r] & \cdots
    \end{tikzcd}
  \]
  where the map \(\b\) is called the \emph{boundary map}.
\end{proposition}

\begin{proof}
  The map \(\b\) is defined as follow: suppose given \([c] \in H_n(C)\) so \(dc = 0\).
  \begin{enumerate}
  \item \(\pi\) is surjective so exists \(b \in B_n\) with \(\pi(b) = c\).
  \item \(\pi db = d\pi b = dc = 0\).
  \item The sequence is exact at \(B_{n - 1}\) so exists \(a \in A_{n - 1}\) with \(\iota a = db\).
  \item \(\iota d a = d \iota a = ddb = d^2 b = 0\) so by injectivity of \(\iota\), \(da = 0\).
  \item Finally define \(\b([c]) = [a]\).
  \end{enumerate}
  \[
    \begin{tikzcd}
      0 \ar[r] & A_n \ar[r, "\iota"] \ar[d, "d"] & B_n \ar[r, "\pi"] \ar[d, "d"] & C_n \ar[r] \ar[d, "d"] & 0 \\
      0 \ar[r] & A_{n - 1} \ar[r] & B_{n - 1} \ar[r] & C_{n - 1} \ar[r] & 0
    \end{tikzcd}
  \]
  We have to check this is well-defined and the resulting sequence is exact. We check exactness at \(H_{n - 1}(A)\):
  \begin{align*}
    [a] \in \ker \iota_*
    &\iff \iota a = db \text{ for some } b \in B_n \\
    &\iff [a] = \b [\pi b] \\
    &\iff [a] \in \im \b
  \end{align*}
  The rest are left as exercises.
\end{proof}

\begin{eg}
  Recall that if \(X \neq \emptyset\), we can express unreduced homology as
  \[
    H_*(X) =
    \begin{cases}
      \widetilde H_*(X) & * > 0 \\
      \widetilde H_*(X) \oplus \Z & * = 0
    \end{cases}
  \]
  We can show this using the snake lemma. Let \(K_* = \langle \sigma_\emptyset \rangle\) if \(* = -1\) and \(0\) otherwise, then
  \[
    H_*(K) =
    \begin{cases}
      \langle \sigma_\emptyset \rangle & * = -1 \\
      0 & * \neq -1
    \end{cases}
  \]
  so we have a SES
  \[
    \begin{tikzcd}
      0 \ar[r] & K_* \ar[r] & \widetilde C_*(X) \ar[r] & C_*(X) \ar[r] & 0
    \end{tikzcd}
  \]
  so we have a long exact sequence that looks like
  \[
    \begin{tikzcd}
      H_*(K) \ar[r] & \widetilde H_*(X) \ar[r] & H_*(X) \ar[r] & H_{* - 1}(K)
    \end{tikzcd}
  \]
  so for \(* > 0\), \(\tilde H_*(X) \cong H_*(X)\). The only interesting bit is at \(* = 0\) which gives
  \[
    \begin{tikzcd}
      0 \ar[r] & \widetilde H_0(X) \ar[r] & H_0(X) \ar[r, "\b"] & \Z \ar[r] & \widetilde H_{-1}(X) \ar[r] & 0
    \end{tikzcd}
  \]
  Let \(p \in X\) be any point and let \(\sigma_p: \Delta^0 \to X\) be an element of \(H_0\). As \(d \sigma_p = \sigma_\emptyset\), we have \(\b[\sigma_p] = \sigma_\emptyset\) so \(\b\) is surjective. Thus \(\widetilde H_{-1}(X) = 0\) and \(H_0(X) \cong \widetilde H_0(X) \oplus \Z\) by example sheet 1 question 3.
\end{eg}

\subsubsection{Subcomplexes and quotient complexes}

\begin{definition}[subcomplex, quotient complex]\index{chain complex!subcomplex}\index{chain complex!quotient complex}
  Suppose \((C_*, d)\) is a chain complex. We say \(A_*\) is a \emph{subcomplex} of \(C_*\) if
  \begin{enumerate}
  \item \(A_* = \bigoplus_{i \in \Z} A_i\) where \(A_i \subseteq C_i\) is a submodule.
  \item \(d(A_i) \subseteq A_{i - 1}\).
  \end{enumerate}
  If so then \((A_*, d)\) is a chain complex.

  Let \(Q_i = C_i/A_i\) then \(d: C_i \to C_{i - 1}\) induces \(d_Q: Q_i \to Q_{i - 1}\) with \(d_Q^2 = d^2 = 0\). Call \((Q_*, d_Q)\) the \emph{quotient complex}.

  In other words, there is a SES
  \[
    \begin{tikzcd}
      0 \ar[r] & A_* \ar[r] & C_* \ar[r] & Q_* \ar[r] & 0
    \end{tikzcd}
  \]
\end{definition}

Suppose \(A \subseteq X\). If \(\sigma: \Delta^k \to X\) has \(\im \sigma \subseteq A\) then \(\sigma \compose F_{\{0, \dots, k\} \setminus \{j\}}: \Delta^{k - 1} \to X\) has image in \(A\) as well, so \(d \sigma \in C_*(A)\). Therefore \(C_*(A)\) is a subcomplex of \(C_*(X)\). We then define

\begin{definition}[homology of a pair]\index{homology group!of a pair}
  If \(A \subseteq X\), we define
  \[
    C_*(X, A) = C_*(X)/C_*(A)
  \]
  and \(H_*(X, A) = H_*(C_*(X, A))\) is the \emph{homology of the pair} \((X, A)\).
\end{definition}

We have the SES
\[
  \begin{tikzcd}
    0 \ar[r] & C_*(A) \ar[r] & C_*(X) \ar[r] & C_*(X, A) \ar[r] & 0
  \end{tikzcd}
\]
whose corresponding long exact sequence is the \emph{long exact sequence of the pair} \((X, A)\)
\[
  \begin{tikzcd}
    \cdots \ar[r] & H_*(A) \ar[r, "\iota_*"] & H_*(X) \ar[r] & H_*(X, A) \ar[r, "\b"] & H_{* - 1}(A) \ar[r] & \cdots
  \end{tikzcd}
\]
where \(\iota: A \embed X\) is the inclusion.

\begin{eg}
  Let \((X, A) = (D^1, S^0)\). We have
  \[
    H_*(S^0) =
    \begin{cases}
      \Z \oplus \Z & * = 0 \\
      0 & * \neq 0
    \end{cases}
    \quad
    H_*(D^1) =
    \begin{cases}
      \Z & * = 0 \\
      0 & * \neq 0
    \end{cases}
  \]
  so the long exact sequence of the pair \((D^1, S^0)\) gives
  \[
    \begin{tikzcd}[row sep=small]
      H_1(D^1) \ar[r] \ar[d, equal] & H_1(X, A) \ar[r] & H_0(S^0) \ar[r] \ar[d, equal] & H_0(D^1) \ar[r] \ar[d, equal] & H_0(X, A) \ar[r] & 0 \\
      0 & & \Z \oplus \Z & \Z &
    \end{tikzcd}
  \]
  It is an exercise to check the map \(H_0(S^0) \to H_0(D^1)\) is surjective and thus \(H_1(X, A) \cong \Z\).
\end{eg}

\paragraph{Induced maps}

Suppose \(f: (X, A) \to (Y, B)\) is a map of pairs, meaning \(f: X \to Y\) and \(f(A) \subseteq B\). Then if \(\sigma: \Delta^k \to A\) then \(f_\#: C_*(X) \to C_*(Y)\) is such that \(f_\#(\sigma) = f \compose \sigma: \Delta^k \to B\) so \(f_\#(C_*(A)) \subseteq C_*(B)\) and hence \(f_\#\) descends to a chain map \(f_\#^{(q)}: C_*(X)/C_*(A) \to C_*(Y)/C_*(B)\), which we usually just write \(f_\#: C_*(X, A) \to C_*(Y, B)\). We define \(f_*: H_*(X, A) \to H_*(Y, B)\) to be the induced map.

\begin{lemma}
  Suppose
  \[
    \begin{tikzcd}
      0 \ar[r] & A_* \ar[r, "\iota"] \ar[d, "f"] & B_* \ar[r, "\pi"] \ar[d, "f"] & C_* \ar[r] \ar[d, "f"] & 0 \\
      0 \ar[r] & A_*' \ar[r, "\iota'"] & B_*' \ar[r, "\pi'"] & C_*' \ar[r] & 0
    \end{tikzcd}
  \]
  is a commutative diagram of chain complexes and chain maps, and the rows are exact. Then we have a commutative diagram of long exact sequences
  \[
    \begin{tikzcd}
      \ar[r] & H_*(A) \ar[r] \ar[d, "f_*"] & H_*(B) \ar[r] \ar[d, "f_*"] & H_*(C) \ar[r, "\b"] \ar[d, "f_*"] & H_{* - 1}(A) \ar[r] \ar[d, "f_*"] & \cdots \\
      \ar[r] & H_*(A') \ar[r] & H_*(B') \ar[r] & H_*(C') \ar[r, "\b'"] & H_{* - 1}(A') \ar[r] & \cdots
    \end{tikzcd}
  \]
\end{lemma}

\begin{proof}
  We check the square involving \(\b\) and \(\b'\) commutes and the rest are left as exercises. If \([c] \in H_n(C)\), pick \(b \in B_n, a \in A_{n - 1}\) with \(\pi b = c, \iota a = db\). Then \(\b [c] = [a]\). Let \(a' = fa, b' = fb, c' = fc\). Then \(\pi' b' = c'\) and \(\iota' a' = db'\) so \(\b' [c'] = [a']\). Then
  \[
    \b' f_*[c] = f_*[a] = f_* \b [c].
  \]
\end{proof}

In the language of category theory, this says that there is a functor from the category of short exact sequences with morphisms satisfying the hypothesis of the lemma to the category of long exact sequences of \(R\)-modules with morphisms satisfying the conclusion.

\begin{corollary}
  If \(f: (X, A) \to (X, B)\) then there is a commutative diagram
  \[
    \begin{tikzcd}
      \ar[r] & H_*(A) \ar[r] \ar[d, "f_*"] & H_*(X) \ar[r] \ar[d, "f_*"] & H_*(X, A) \ar[r, "\b"] \ar[d, "f_*"] & H_{* - 1}(A) \ar[r] \ar[d, "f_*"] & \cdots \\
      \ar[r] & H_*(B) \ar[r] & H_*(Y) \ar[r] & H_*(Y, B) \ar[r, "\b'"] & H_{* - 1}(B) \ar[r] & \cdots
    \end{tikzcd}
  \] 
\end{corollary}

\begin{proof}
  We have a commutative diagram of SES
  \[
    \begin{tikzcd}
      0 \ar[r] & C_*(A) \ar[r] \ar[d, "f_\#"] & C_*(X) \ar[r] \ar[d, "f_\#"] & C_*(X, A) \ar[r] \ar[d, "f_\#"] & 0 \\
      0 \ar[r] & C_*(B) \ar[r] & C_*(Y) \ar[r] & C_*(Y, B) \ar[r] & 0
    \end{tikzcd}
  \]
\end{proof}

\paragraph{Homotopy invariance}

If \(g_0, g_1: (X, A) \to (Y, B)\) are homotopic as maps of pairs then \(g_{0*} = g_{1*}: H_*(X, A) \to H_*(Y, B)\).

\begin{proof}
  The maps \(g_{0\#}, g_{1\#}: C_*(X) \to C_*(Y)\) are chain homotopic via \(h(\sigma) = G_{\sigma\#}(U_n(f_{0 \cdots n}))\) where \(\sigma: \Delta^n \to X\) and \(G: X \times [0, 1] \to Y\) is a homotopy such that \(G(A \times [0, 1]) \subseteq B\). If \(\sigma: \Delta^n \to A\) then \(G_\sigma: \Delta^n \times [0, 1] \subseteq B\) so \(h(\sigma) \in C_*(B)\), i.e.\ \(h(C_*(A)) \subseteq C_*(B)\) so it descends to \(h^{(q)}: C_*(X)/C_*(A) \to C_*(Y)/C_*(B)\) with
  \[
    d h^{(q)} + h^{(q)} d = g_{1\#}^{(q)} - g_{0 \#}^{(q)}
  \]
  so \(g_{1\#}^{(q)} \sim g_{0\#}^{(q)}: C_*(X, A) \to C_*(Y, B)\).
\end{proof}

\paragraph{Reduced homology}

Define \(\widetilde C_*(X, A) = \widetilde C_*(X)/\widetilde C_*(A)\) and similarly \(\widetilde H_*(X, A) = H_*(\widetilde C_*(X, A))\). Again we have a long exact sequence of pairs.

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(H_*(X, A) = \widetilde H_*(X, A)\) if \(A \neq \emptyset\).
    \begin{proof}
      In fact they are isomorphic on the chain complex level: we have
      \[
        \widetilde C_*(X) \cong C_*(X) \oplus \langle \sigma_\emptyset \rangle, \quad
        \widetilde C_*(A) \cong C_*(A) \oplus \langle \sigma_\emptyset \rangle
      \]
      so
      \[
        \widetilde C_*(X, A) = \widetilde C_*(X)/\widetilde C_*(A) \cong C_*(X)/C_*(A) = C_*(X, A).
      \]
    \end{proof}
  \item If \(p \in X\) then
    \[
      \widetilde H_*(X) \cong \widetilde H_*(X, p) \cong H_*(X, p).
    \]
    \begin{proof}
      Recall that \(\widetilde H_*(\{p\}) = 0\) so we have a long exact sequence
      \[
        \begin{tikzcd}[row sep=small]
          \widetilde H_*(\{p\}) \ar[r] \ar[d, equal] & \widetilde H_*(X) \ar[r, "\pi_*"] & \widetilde H_*(X, p) \ar[r] & \widetilde H_{* - 1}(\{p\}) \ar[d, equal] \\
          0 & & & 0
        \end{tikzcd}
      \]
      so \(\pi_*\) is an isomorphism.
    \end{proof}
  \item \(H_*(D^n, S^{n - 1}) \cong \widetilde H_{* -1}(S^{n - 1})\).
    \begin{proof}
      \(D^n\) is contractible so \(\widetilde H_*(D^n) = 0\). Then by considering the long exact sequence we again have \(\b: \widetilde H_*(D^n, S^{n -1}) \to \widetilde H_{* - 1}(S^{n - 1})\) an isomorphism.
    \end{proof}
  \end{enumerate}
\end{eg}

So far we have developed a lot of theory and are able to make certain simplifications of homology groups, but we haven't computed anything (that isn't contractible) explicitly. However, with the help of the following tool, which will be proven in the next section, we can compute virtually the homology of everything.

\paragraph{Collapsing a pair}

\begin{definition}[deformation retraction]\index{deformation retraction}
  \(A \subseteq U\) is a \emph{deformation retraction} of \(U\) if exists \(\pi: (U, A) \to (A, A)\) with \(\iota \compose \pi \sim \id_{(U, A)}\) as maps of pairs.
\end{definition}

\begin{eg}
  \(S^{n - 1}\) is a deformation retraction of \(D^n \setminus \{0\}\) via \(\pi(v) = \frac{v}{\norm v}\).
\end{eg}

\begin{definition}[good pair]\index{good pair}
  The pair \((X, A)\) is \emph{good} if
  \begin{enumerate}
  \item \(A \subseteq X\) is closed.
  \item there is some \(U \subseteq X\) open, \(A \subseteq U\) and \(A\) is a deformation retract of \(U\).
  \end{enumerate}
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \((D^n, S^{n - 1})\) is good as we can take \(U = D^n \setminus \{0\}\).
  \item \((D^n, D^n \setminus \{0\})\) is not good as \(D^n \setminus \{0\}\) is not closed.
  \item \(A = \{\frac{1}{n}: n \in \Z \setminus \{0\}\} \cup \{0\} \subseteq \R\) is closed but \((\R, A)\) is not good.
  \item A pair consisting of a smooth manifold and a compact submanifold is good.
  \item A pair consisting of a simplicial complex and a subcomplex is good.
  \end{enumerate}
\end{eg}

If \(A \subseteq X\), we have a quotient map
\[
  \pi: (X, A) \to (X/A, A/A) = (X/A, \{p_A\}).
\]

\begin{theorem}[collapsing a pair]\index{collapsing a pair}
  If a pair \((X, A)\) is good then \(\pi_*: H_*(X, A) \to H_*(X/A, \{p_A\}) \cong \widetilde H_*(X/A)\) is an isomorphism.
\end{theorem}

We defer the proof to the end of next section. For now let's see some applications.

\begin{proposition}
  The reduced homology of \(S^n\) is
  \begin{align*}
    \widetilde H_*(S^n) =
    \begin{cases}
      \Z & * = n \\
      0 & * \neq n
    \end{cases}
  \end{align*}
\end{proposition}

\begin{proof}
  Induction on \(n\). When \(n = 0\) then \(S^0 = \{-1, 1\}\) so
  \[
    H_*(S^0) = H_*(\{-1\}) \oplus H_*(\{1\}) =
    \begin{cases}
      \Z \oplus \Z & * = 0 \\
      0 & * \neq 0
    \end{cases}
  \]
  As \(H_0(X) \cong \widetilde H_0(X) \oplus \Z\), the result holds for \(n = 0\). We know \(D^n/S^{n - 1} \cong S^n\) so inductively
  \begin{align*}
    \widetilde H_*(S^n)
    &\cong H_*(D^n, S^{n - 1}) \quad \text{collapsing a pair} \\
    &\cong \widetilde H_{* - 1}(S^{n - 1}) \quad \text{computation above} \\
    &=
      \begin{cases}
        \Z & * = n \\
        0 & * \neq n
      \end{cases}
  \end{align*}
\end{proof}

\begin{corollary}\leavevmode
  \begin{enumerate}
  \item \(S^n\) is not contractible.
  \item If \(S^n \cong S^m\) then \(n = m\).
  \end{enumerate}
\end{corollary}

\begin{corollary}
  The map \(\id: S^n \to S^n\) does not extend to \(D^{n + 1}\), i.e.\ there does not exists \(F: D^{n + 1} \to S^n\) such that \(F \compose \iota = \id_{S^n}\).
\end{corollary}

\begin{proof}
  By functoriality \(F_* \compose \iota_* = \id_{\widetilde H_*(S^n)}\) but \(D^{n + 1}\) is contractible so \(\widetilde H_*(D^{n + 1}) = 0\) so \(\iota_*\) is the zero map. Absurd.
\end{proof}

\begin{corollary}
  \(\pi_n(S^n, *)\) is nontrivial.
\end{corollary}

\begin{proof}
  \(f: S^n \to X\) is homotopic to a constant if and only if \(f\) extends to \(D^{n + 1}\) so \(\id_{S^n} \neq 0\) in \(\pi_n(S^n, *)\).
\end{proof}

\begin{eg}[homology of torus]
  Let \(X = S^2, A = S^0 = \{p, q\} \subseteq S^2\). Claim that \(H_*(X, A) = \Z\) if \(* = 1, 2\) and \(0\) otherwise, which easily follows from the long exact sequence of reduced homologies for the pair \((X, A)\).

  Let \(Y = T^2 = S^1 \times S^1\). Let \(B = S^1 \times 1 \subseteq T^2\). Note that \(Y/B \cong X/A\) so we know \(\widetilde H_*(T^2, B)\). Then the long exact sequence for \((T^2, B)\) gives
  \[
    \begin{tikzcd}
      \widetilde H_2(B) \ar[r] & \widetilde H_2(T^2) \ar[r] & \widetilde H_2(T^2, B) \ar[dll, out=0, in=180] \\
      \widetilde H_1(B) \ar[r, "\iota_*"] & \widetilde H_1(T^2) \ar[r] & \widetilde H_1(T^2, B) \ar[dll, out=0, in=180] \\
      \widetilde H_0(B) \ar[r] & \widetilde H_0(T^2) \ar[r] & \widetilde H_0(T^2, B)
    \end{tikzcd}
  \]
  Claim that \(\iota_*: H_1(B) \to H_1(T^2)\) is injective: let \(\pi: S^1 \times S^1 \to S^1\) be projection onto the first factor, then \(\pi \compose \iota = \id_{S^1}\) so \(\pi_* \compose \iota_* = \id_{H_*(S^1)}\).

  Then the long exact sequence splits into SES's
  \[
    \begin{tikzcd}[row sep=small]
      0 \ar[r] & H_2(T^2) \ar[r] & H_2(T^2, B) \ar[r] \ar[d, equal] & \ker \iota_* \ar[r] \ar[d, equal] & 0 \\
      & & \Z & 0 \\
      0 \ar[r] & H_1(B) \ar[r] \ar[d, equal] & H_1(T^2) \ar[r] & H_1(T^2, B) \ar[r] \ar[d, equal] & 0 \\
      & \Z & & \Z
    \end{tikzcd}
  \]
  so in summary
  \[
    H_*(T^2) =
    \begin{cases}
      \Z & * = 0, 2 \\
      \Z^2 & * = 1 \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

\subsection{Subdivide, Excise \& Collapse}

\subsubsection{Subdivision}

Suppose \(\mathcal U = \{U_\alpha\}\) is an open cover of \(X\).

\begin{notation}
  In this subsection, if \(\sigma: \Delta^k \to X\), write \(\sigma \trianglelefteq \mathcal U\) if \(\im \sigma \subseteq U_\alpha\) for some \(\alpha\).
\end{notation}

\begin{definition}
  We define
  \[
    C_k^{\mathcal U} (X) = \langle \sigma: \Delta^k \to X, \sigma \trianglelefteq \mathcal U \rangle.
  \]
\end{definition}

If \(\im \sigma \subseteq U_\alpha\) then \(\im \sigma \compose F_I \subseteq U_\alpha\) so \(C_*^{\mathcal U}(X)\) is a subcomplex of \(C_*(X)\). Let \(\iota: C_*^{\mathcal U}(X) \to C_*(X)\) be the inclusion.

\begin{theorem}[subdivision]
  \(\iota_*: H_*^{\mathcal U}(X) \to H_*(X)\) is an isomorphism.
\end{theorem}

\begin{proof}[Sketch proof]
  The idea is as follow: suppose we have an open cover \(\{U_1, U_2\}\). Given \([\sigma] \in H_1(X)\), by example sheet 1 question 1 we can replace \([\sigma]\) by \([\sigma_1] + [\sigma_2]\) and so on, and eventually each \(\sigma_i\) will be contained in one of the \(U_i\)'s. The difficulty is to find an efficient way to write down this process. See the lecture handout for details.
\end{proof}

Suppose \(U_1, U_2 \subseteq X\) open and \(U_1 \cap U_2 = X\), i.e.\ \(\mathcal U = \{U_1, U_2\}\) is an open cover of \(X\). Then we have a diagram of inclusions
\[
  \begin{tikzcd}
    U_1 \cap U_2 \ar[r, "i_1"] \ar[d, "i_2"] & U_1 \ar[d, "j_1"] \\
    U_2 \ar[r, "j_2"] & X
  \end{tikzcd}
\]

\begin{proposition}[Mayer-Vietoris sequence]\index{Mayer-Vietoris sequence}
  There is a long exact sequence
  \[
    \begin{tikzcd}
      H_*(U_1 \cap U_2) \ar[r, "i_{1*} \oplus i_{2*}"] & H_*(U_1) \oplus H_*(U_2) \ar[r, "j_{1*} - j_{2*}"] & H_*(X) \ar[dll, "\b"', out=0, in=180, overlay] \\
      H_{* - 1}(U_1 \cap U_2) \ar[r, "i_{1*} \oplus i_{2*}"] & H_{* - 1}(U_1) \oplus H_{* - 1}(U_2) \ar[r, "j_{1*} - j_{2*}"] & H_{* - 1}(X) \ar[dll, "\b"', out=0, in=180, overlay] \\
      \cdots
    \end{tikzcd}
  \]
\end{proposition}

\begin{proof}
  There is a SES
  \[
    \begin{tikzcd}
      0 \ar[r] & C_*(U_1 \cap U_2) \ar[r, "i_{1\#} \oplus i_{2\#}"] & C_*(U_1) \oplus C_*(U_2) \ar[r, "j_{1\#} - j_{2\#}"] \ar[r] & C_*^{\mathcal U}(X) \ar[r] & 0
    \end{tikzcd}
  \]
  Take LES on homology and use \(H_*^{\mathcal U}(X) \cong H_*(X)\).
\end{proof}

There is a similar sequence for reduced homologies.

\begin{eg}
  Let \(X = S^n, U_1 = S^n - \{p\}, U_2 = S^n - \{q\}\) so \(U_1 \cap U_2 \sim S^{n - 1}\). Then the Mayer-Vietoris sequence gives
  \[
    \begin{tikzcd}[row sep=small]
      \widetilde H_*(U_1) \oplus \widetilde H_*(U_2) \ar[r] \ar[d, equal] & \widetilde H_*(S^n) \ar[r] & \widetilde H_{* - 1}(U_1 \cap U_2) \ar[r] & \widetilde H_{* - 1}(U_1) \oplus \widetilde H_{* - 1}(U_2) \ar[d, equal] \\
      0 & & & 0
    \end{tikzcd}
  \]
  so \(\widetilde H_*(S^n) \cong \widetilde H_{* - 1}(S^{n - 1})\). Note that this is the same calculation as before using collapsing. This is a general principle: anything that can be calculated using Mayer-Vietoris can be calculated by collapsing subspace, and vice versa.
\end{eg}

\subsubsection{Excision}

Suppose \(A \subseteq X\) and \(\mathcal U\) is an open cover of \(X\). Let \(\mathcal U_A = \{U_\alpha \cap A\}\) be an open cover of \(A\). Then \(C_*^{\mathcal U_A}(A)\) is a subcomplex of \(C_*^{\mathcal U}(X)\). We define \(C_*^{\mathcal U}(X, A) = C_*^{\mathcal U}(X)/C_*^{\mathcal U_A}(A)\) and we would like to show it is isomorphic to \(C_*(X, A)\).

\begin{lemma}[five lemma]\index{five lemma}
  Suppose
  \[
    \begin{tikzcd}
      A_1 \ar[r] \ar[d, "f_1"] & A_2 \ar[r] \ar[d, "f_2"] & A_3 \ar[r] \ar[d, "f_3"] & A_4 \ar[r] \ar[d, "f_4"] & A_5 \ar[d, "f_5"] \\
      B_1 \ar[r] & B_2 \ar[r] & B_3 \ar[r] & B_4 \ar[r] & B_5
    \end{tikzcd}
  \]
  is a commutative diagram of exact sequences. If \(f_1, f_2, f_4, f_5\) are all isomorphisms then so is \(f_3\).
\end{lemma}

\begin{proof}
  Example sheet.
\end{proof}

\begin{corollary}
  \(H_*^{\mathcal U}(X, A) \cong H_*(X, A)\).
\end{corollary}

\begin{proof}
  There is a map of SES's
  \[
    \begin{tikzcd}
      0 \ar[r] & C_*^{\mathcal U_A}(A) \ar[r] \ar[d] & C_*^{\mathcal U}(X) \ar[r] \ar[d] & C_*^{\mathcal U}(X, A) \ar[r] \ar[d] & 0 \\
      0 \ar[r] & C_*(A) \ar[r] & C_*(X) \ar[r] & C_*(X, A) \ar[r] & 0
    \end{tikzcd}
  \]
  so we have a commutative diagram of long exact sequences
  \[
    \begin{tikzcd}
      H_*^{\mathcal U_A}(A) \ar[r] \ar[d] & H_*^{\mathcal U}(X) \ar[r] \ar[d] & H_*^{\mathcal U}(X, A) \ar[r] \ar[d, dashed] & H_{* - 1}^{\mathcal U}(A) \ar[r] \ar[d] & H_{* - 1}^{\mathcal U}(X) \ar[d] \\
      H_*(A) \ar[r] & H_*(X) \ar[r] & H_*(X, A) \ar[r] & H_{* - 1}(A) \ar[r] & H_{* - 1}(X)
    \end{tikzcd}
  \]
  The four solid arows are isomorphisms by subdivision by the dotted arrow is also an isomorphism by five lemma.
\end{proof}

Suppose \(B \subseteq A \subseteq X\) and \(j: (X - B, A - B) \to (X, A)\) is the inclusion.

\begin{theorem}[excision]\index{excision theorem}
  If the closure of \(B\) is contained in the interior of \(A\) then \(j_*: H_*(X - B, A - B) \to H_*(X, A)\) is an isomorphism.
\end{theorem}

\begin{proof}
  As the \(\overline B \subseteq \Int A\), \(\mathcal U = \{X - \overline B, \Int A\}\) is an open cover of \(X\). Then
  \begin{align*}
    C_*^{\mathcal U} (X)
    &= \langle \sigma \trianglelefteq \mathcal U: \im \sigma \cap B = \emptyset \rangle
    \oplus \langle \sigma \trianglelefteq \mathcal U: \im \sigma \cap B \ne \emptyset \rangle \quad \text{as a group} \\
    &= C_*^{\mathcal U'}(X - B) \oplus \langle \sigma: \im \sigma \subseteq \Int A \rangle
  \end{align*}
  where \(\mathcal U' = \mathcal U_{X - B}\). Similarly
  \[
    C_*^{\mathcal U_A}(A) = C_*^{\mathcal U_A'}(A - B) \oplus \langle \sigma: \im \sigma \subseteq \Int A \rangle
  \]
  so
  \[
    \frac{C_*^{\mathcal U}(X)}{C_*^{\mathcal U}(A)} \cong \frac{C_*^{\mathcal U'}(X - A)}{C_*^{\mathcal U_A'}(A - B)}
  \]
  so \(j_\#^{\mathcal U}: C_*^{\mathcal U'}(X - B, A - B) \to C_*^{\mathcal U}(X, A)\) is an isomorphism. Then we have a commutative diagram
  \[
    \begin{tikzcd}
      C_*^{\mathcal U'}(X - B, A - B) \ar[r, "j_\#^{\mathcal U}"] \ar[d, "\iota_*'"] & C_*^{\mathcal U}(X, A) \ar[d, "\iota_*"] \\
      C_*(X - B, A - B) \ar[r, "j_\#"] & C_*(X, A)
    \end{tikzcd}
  \]
  By the corollary \(\iota_*'\) and \(\iota_*\) are isomorphisms, and \(j^{\mathcal U}_*\) is an isomorphism since \(j^{\mathcal U}_\#\) is. Thus \(j_*\) is an isomorphism.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(H_*(\R^n, \R^n - p) = \Z\) if \(* =  n\) and \(0\) otherwise.
    \begin{proof}
      \(\R^n - p \cong \R^n - 0 \sim S^{n - 1}\) so LES of \((\R^n, \R^n - p)\) is
      \[
        \begin{tikzcd}
          \widetilde H_*(\R^n) \ar[r] \ar[d, equal] & \widetilde H_*(\R^n, \R^n - p) \ar[r, "\b"] & \widetilde H_{* - 1}(\R^n - p) \ar[r] & \widetilde H_{* - 1}(\R^n) \ar[d, equal] \\
          0 & & & 0
        \end{tikzcd}
      \]
      so \(\b: H_*(\R^n, \R^n - p) \to H_{* - 1}(\R^n - p)\) is an isomorphism.
    \end{proof}
    Note that this does not equal to \(\widetilde H_*(\R^n/(\R^n - p))\), which is a two-point non-Hausdorff space whose homology does not even depend on \(n\).
  \item If \(U \subseteq \R^n\) is open then \(H_*(U, U - p) = \Z\) if \(* = n\) and \(0\) otherwise.
    \begin{proof}
      \(C = \R^n - U\) is closed in \(\R^n\) so \(\overline C \subseteq \R^n - p\). Thus by excision
      \[
        H_*(\R^n, \R^n - p) \cong H_*(\R^n - C, \R^n - p - C) = H_*(U, U - p).
      \]
    \end{proof}
  \end{enumerate}
\end{eg}

\begin{corollary}
  If \(U \subseteq \R^n, V \subseteq \R^m\) are open and \(U \cong V\) then \(n = m\).
\end{corollary}

Therefore open subsets of Euclidean spaces have an intrinsic dimension that is invariant under homeomorphism.

\begin{proof}
  If \(f: U \to V\) is a homeomorphism then so is \(f: (U, U - p) \to (V, V - f(p))\) so \(H_*(U, U - p) \cong H_*(V, V - f(p))\).
\end{proof}

\paragraph{Deformation retraction}

Suppose \(A \subseteq U\) and let \(i: A \to U\) be the inclusion. If \(\pi: U \to A\), we have maps of pairs
\[
  (U, A) \xrightarrow{\tilde \pi} (A, A) \xrightarrow{\tilde \iota} (U, A).
\]

\begin{definition}[deformation retraction]\index{deformation retraction}
  \(\pi: U \to A\) is a \emph{deformation retraction} if \(\tilde \iota \compose \tilde \pi \sim \id_{(U, A)}\) as maps of pairs.
\end{definition}
Thus \(\iota \compose \pi \sim \id_U, \pi \compose \iota \sim \id_A\) so in particular \(A \sim U\).

\begin{lemma}
  \label{lem:quotient of deformation retraction}
  If \(\pi: U \to A\) is a deformation retraction then so is \(\pi': U/A \to A/A\).
\end{lemma}

\begin{lemma}
  Suppose \(B \subseteq A \subseteq X\). Then there is a LES
  \[
    \begin{tikzcd}
      H_*(A, B) \ar[r, "i_*"] & H_*(X, B) \ar[r, "j_*"] & H_*(X, A) \ar[r, "\b"] & H_{* - 1}(A, B) \ar[r] & \cdots
    \end{tikzcd}
  \]
  where \(i_*, j_*\) are induced by inclusions of pairs.
\end{lemma}

\begin{proof}
  There is a SES
  \[
    \begin{tikzcd}
      0 \ar[r] & \dfrac{C_*(A)}{C_*(B)} \ar[r, "i_\#"] & \dfrac{C_*(X)}{C_*(B)} \ar[r, "j_\#"] & \dfrac{C_*(X)}{C_*(A)} \ar[r] & 0
    \end{tikzcd}
  \]
\end{proof}

\begin{lemma}
  \label{lem:relative homology of deformation retraction}
  Suppose \(A \subseteq U \subseteq X\) and \(A\) is a deformation retraction of \(U\) then \(\iota_*: H_*(X, A) \to H_*(X, U)\) is an isomorphism.
\end{lemma}

\begin{proof}
  \(\iota: A \to U\) is a homotopy equivalence so \(\iota_*: H_*(A) \to H_*(U)\) is an isomorphism. The LES of \((U, A)\) gives
  \[
    \begin{tikzcd}[row sep=small]
      0 \ar[r] & \coker \iota_*^{(n)} \ar[r] \ar[d, equal] & H_*(U, A) \ar[r] & \ker \iota_*^{(n - 1)} \ar[r] \ar[d, equal] & 0 \\
      & 0 & & 0
    \end{tikzcd}
  \]
  so \(H_*(U, A) = 0\). Now the LES for the triple \((X, U, A)\) gives
  \[
    \begin{tikzcd}[row sep=small]
      H_*(U, A) \ar[r] \ar[d, equal] & H_*(X, A) \ar[r] & H_*(X, U) \ar[r] & H_{* - 1}(U, A) \ar[d, equal] \\
      0 & & & 0
    \end{tikzcd}
  \]
\end{proof}

Recall that \((X, A)\) is a good pair\index{good pair} if \(A \subseteq X\) is closed and exists \(U \subseteq X\) open such that \(A \subseteq U\) is a deformation retraction.

\begin{theorem}[collapsing a pair]\index{collapsing a pair}
  If \((X, A)\) is good then \(\pi_*: H_*(X, A) \to H_*(X/A, A/A)\) is an isomorphism.
\end{theorem}

\begin{proof}
  We have a commutative diagram
  \[
    \begin{tikzcd}
      H_*(X, A) \ar[r, "i_*"] \ar[d, "\pi_{1*}"] & H_*(X, U) \ar[d, "\pi_{2*}"] & H_*(X - A, U - A) \ar[l, "j_*"'] \ar[d, "\pi_{3*}"] \\
      H_*(X/A, A/A) \ar[r, "i_*'"] & H_*(X/A, U/A) & H_*(X/A - A/A, U/A - A/A) \ar[l, "j_*'"']
    \end{tikzcd}
  \]
  Note \(\pi_3: (X - A, U - A) \to (X/A - A/A, U/A - A/A)\) is a homeomorphism. \(A\) is closed, \(U\) is open so \(\overline A \subseteq \Int U\) so by excision \(j_*, j_*'\) are isomorphisms. Thus \(\pi_{2*}\) is an isomorphism. \(i_*, i_*'\) are isomorphisms by \Cref{lem:relative homology of deformation retraction} and \Cref{lem:quotient of deformation retraction} so \(\pi_{1*}\) is also an isomorphism.
\end{proof}

\subsection{Maps \(S^n \to S^n\)}

Fix generators \([S^n]\) for \(\widetilde H_n(S^n) \cong \Z\) as follow: for \(S^0 = \{\pm 1\}\), \([S^0] = \sigma_{+1} - \sigma_{-1}\) generates \(\widetilde H_0(S^0)\). We have isomorphisms
\[
  \begin{tikzcd}
    \widetilde H_n(S^n) & H_n(D^n, S^{n - 1}) \ar[l, "p_*"'] \ar[r, "f_*"] \ar[d, "\b"] & H_n(I^n, \b I^n) \\
    & \widetilde H_{n - 1}(S^{n - 1})
  \end{tikzcd}
\]
and use it to inductively define generators of \(\widetilde H_n(S^n)\).

\begin{definition}[degree]\index{degree}
  If \(f: S^n \to S^n\) then \(f_*([S^n]) = k[S^n]\) for some \(k \in \Z\). We call \(\deg f_* = k\) the \emph{degree} of \(f: S^n \to S^n\).
\end{definition}

\begin{proposition}\leavevmode
  \begin{enumerate}
  \item \(\deg (f \compose g) = \deg f \cdot \deg g\) by functoriality.
  \item If \(f \sim g\) then \(\deg f = \deg g\) by homotopy invariance.
  \item \(\deg \id_{S^n} = 1\).
  \item If \(f: S^n \to S^n\) is constant then \(\deg f = 0\).
  \item If \(f: S^n \to S^n\) is a homeomorphism then \(\deg f = \pm 1\).
  \end{enumerate}
\end{proposition}

\begin{proposition}
  \label{prop:degree of reflection of sphere}
  If \(\rho: S^n \to S^n\) is a reflection in a hyperplane then \(\deg \rho = -1\).
\end{proposition}

\begin{corollary}
  If \(A: S^n \to S^n, v \mapsto -v\) is the antipodal map then \(\deg A = (-1)^{n + 1}\).
\end{corollary}

\begin{proof}
  \(A = \rho_1 \compose \rho_2 \compose \cdots \compose \rho_{n + 1}\) where \(\rho_i(v) = (v_1, v_2, \dots, -v_i, v_{i + 1}, \dots, v_{n + 1})\) is a reflection.
\end{proof}

\begin{corollary}
  If \(n\) is even then \(A \nsim \id_{S^n}\).
\end{corollary}

To show reflection has degree \(-1\), we begin by considering reflection of the unit square in the first coordinate \(R: I^n \to I^n, (x_1, x) \mapsto (1 - x_1, x)\).

\begin{lemma}
  \([\alpha] + [\alpha \compose R] = 0\) in \(\pi_n(X, p)\), i.e.\ \([\alpha \compose R] = -[\alpha]\).
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{corollary}
  \(R_*[I^n, \b I^n] = -[I^n, \b I^n]\).
\end{corollary}

\begin{proof}
  \(0 = [\alpha + \alpha \compose R] = [\alpha] + \deg R [\alpha]\).
\end{proof}

\begin{proof}[Proof of \Cref{prop:degree of reflection of sphere}]
  There is a homeomorphism \(f: (I^n, \b I^n) \to (D^n, S^{n - 1})\) with \(f \compose R = \rho_1 \compose f\) where \(\rho_1: D^n \to D^n, (x_1, x) \mapsto (-x_1, x)\) so \(\rho_{1*}[D^n, S^{n - 1}] = - [D^n, S^{n - 1}]\). Then
  \[
    \rho_{1*}[S^{n - 1}] = \rho_{1*} \b [D^n, S^{n - 1}] = \b \rho_{1*} [D^n, S^{n - 1}] = - \b [D^n, S^{n - 1}] = -[S^{n - 1}]
  \]
  so \(\deg \rho_1 = -1\). As any two reflections are homotopic, we have \(\deg \rho = -1\).
\end{proof}

\subsubsection{Hurewicz homomorphism}

\begin{definition}[Hurewicz homomorphism]\index{Hurewicz homomorphism}
  The \emph{Hurewicz homomorphism} is
  \begin{align*}
    \psi: \pi_n(X, p) &\to H_n(X) \\
    [\tilde \alpha] &\mapsto \tilde \alpha_*[S^n]
  \end{align*}
  where \(\tilde \alpha: (S^n, *) \to (X, p)\). If we write
  \[
    \begin{tikzcd}
      (S^n, *) \ar[r, "\tilde \alpha"] & (X, p) \\
      (I^n, \b I^n) \ar[u, "\pi"] \ar[ur, "\alpha"]
    \end{tikzcd}
  \]
  then equivalently \(\psi([\alpha]) = \alpha_*[I^n, \b I^n]\).
\end{definition}

\(\psi\) is well-defined: if \(\alpha \sim \beta\) then \(\alpha_* = \beta_*\).

\begin{proposition}
  \label{prop:Hurewicz homomorphism}
  \(\psi\) is a homomorphism, that is  \(\psi([\alpha + \beta]) = \psi([\alpha]) + \psi([\beta])\).
\end{proposition}

Therefore
\begin{align*}
  \psi: \pi_n(S^n, +) &\to H_n(S^n) \cong \Z \\
  f &\mapsto \deg f
\end{align*}
is a homomorphism. As \(\psi(\id_{S^n}) = 1\), \(\psi\) is surjective.

To prove the Hurewicz homomorphism is indeed a homomorphism we need the notion of coproduct in the category of pointed spaces.
\begin{definition}[wedge]\index{wedge}
  If \(\{(X_\alpha, p_\alpha)\}_{\alpha \in A}\) is a collection of spaces \(X_\alpha\) and \(p_\alpha \in X_\alpha\) then the \emph{wedge} is
  \[
    \bigvee_{\alpha \in A} (X_\alpha, p_\alpha) = \coprod X_\alpha / \coprod p_\alpha
  \]
\end{definition}
Usually we consider the case \(X_\alpha\)'s are homogeneous, i.e.\ if \(p, q \in X_\alpha\) then there is a homeomorphism \(f_{pq}: X_\alpha \to X_\alpha\) with \(f_{pq}(p) = q\). The typical example is a connected manifold. We can drop \(p_\alpha\)'s from the notation if \(X_\alpha\)'s are homogeneous.

\begin{lemma}
  If \((X_\alpha, p_\alpha)\) is a good pair for all \(\alpha \in A\) then there are isomorphisms
  \begin{align*}
    \bigoplus_{\alpha \in A} \widetilde H_*(X_\alpha) &\to \widetilde H_*(\bigvee_{\alpha \in A} (X_\alpha, p_\alpha))
  \end{align*}
  induced by \(\overline \iota = \sum \iota_{\alpha*}, \overline \pi = \bigoplus \pi_{\alpha*}\) where \(\iota_\alpha: X_\alpha \to \bigvee_{\alpha \in A} (X_\alpha, p_\alpha)\) and
  \begin{align*}
    \pi_\alpha: \bigvee_{\alpha \in A} (X_\alpha, p_\alpha) &\to X_\alpha \\
    x &\mapsto
        \begin{cases}
          x & x \in X_\alpha \\
          p_\alpha & \text{otherwise}
        \end{cases}
  \end{align*}
\end{lemma}

\begin{proof}
  We have isomorphims
  \[
    \bigoplus \widetilde H_*(X_\alpha) \cong \bigoplus H_*(X_\alpha, p_\alpha) \cong H_*(\coprod X_\alpha, \coprod p_\alpha) \cong \widetilde H_*(\coprod X_\alpha/\coprod p_\alpha)
  \]
  Composing these gives \(\overline \iota\). Check that \(\overline \pi \compose \overline \iota = \id\).
\end{proof}

If \(f_\alpha: (X_\alpha, p_\alpha) \to (Y, q)\) then we define
\begin{align*}
  \bigvee f_\alpha: \bigvee X_\alpha &\to Y \\
  x &\mapsto f_\alpha(x)
\end{align*}
if \(x \in X_\alpha\).

\begin{corollary}
  We have a commutative diagram
  \[
    \begin{tikzcd}
      \widetilde H_*(\bigvee X_\alpha) \ar[r, "(\bigvee f_\alpha)_*"] \ar[d, "\overline \pi_*"] & \widetilde H_*(Y) \\
      \bigoplus \widetilde H_*(X_\alpha) \ar[ur, "\sum f_{\alpha *}"']
    \end{tikzcd}
  \]
\end{corollary}

\begin{proof}
  Note \((\bigvee f_\alpha) \compose \iota_\alpha = f_\alpha\) and use the lemma.
\end{proof}


\begin{proposition}
  \(\psi([\alpha + \beta]) = \psi([\alpha]) + \psi([\beta])\).
\end{proposition}

\begin{proof}
  Given \(\alpha, \beta: (S^n, *) \to (X, p)\), we can consider them as maps from \((I^n, \b I^n)\) and glue them along the boundary to get a map \(\alpha + \beta: (S^n, *) \to (X, p)\). The common boundary is an equator \(C\) and \(S^n/C \cong S^n_a \vee S^n_b\). Then we have a commutative diagram
  \[
    \begin{tikzcd}
      S^n \ar[r, "\alpha + \beta"] \ar[d, "\pi"] & X \\
      S^n/C \ar[ur, "\alpha \vee \beta"']
    \end{tikzcd}
  \]
  so
  \[
    (\alpha + \beta)_* [S^n]
    = (\alpha \vee \beta)_* \pi_* [S^n]
    = \alpha_* p_{a*} \pi_* [S^n] + \beta_* p_{b*} \pi_* [S^n]
    = \alpha_* [S^n] + \beta_* [S^n]
  \]
\end{proof}

In general the Hurewicz homomorphism is neither injective nor surjective. For example exists \(n > 2\) such that \(\pi_n(S^2, *)\) is nontrivial but \(H_n(S^2) = 0\) for all \(n > 2\). On the other hand, if \(\alpha: S^2 \to T^2\) is a map then it lifts to \(\tilde \alpha: S^2 \to \R^2\) so
\[
  \alpha_*[S^2] = p_* \tilde \alpha_*[S^2] = 0
\]
since \(H_2(\R^2) = 0\). But we know \(H_2(T^2) \neq 0\) so the map is not surjective.

The following is an important result, although we will neither prove it nor use it in this course:

\begin{theorem}[Hurewicz]\index{Hurewicz theorem}
  Suppose \(X\) is path-connected. Then \(H_1(X) = \pi_1(X, *)/[\pi_1, \pi_1]\), the abelianisation of \(\pi_1\). If \(\pi_i(X)\) is trivial for \(1 \leq i \leq n\) then \(\psi: \pi_{n + 1}(X) \to H_{n + 1}(X)\) is an isomorphism and \(H_i(X) = 0\) for all \(i \leq n\).
\end{theorem}

\begin{corollary}
  If \(\pi_1(X) = 1\) and \(H_i(X) = 0\) for \(1 \leq i \leq n\) then \(\pi_i(X)\) is trivial for \(1 \leq i \leq n\) and \(\pi_{n + 1}(X) \cong H_{n + 1}(X)\).
\end{corollary}

\begin{corollary}
  \(\pi_n(S^n) = \Z, \pi_i(S^n) = 0\) for \(i < n\).
\end{corollary}

\subsubsection{Local degree}

If \(p \in S^n\) then \(S^n - p \cong \R^n\) is contractible so \(\pi_*: H_n(S^n) \to H_n(S^n, S^n - p)\) is an isomorphism. Let \([S^n, S^n - p] = \pi_*[S^n]\). Let \(U \subseteq S^n\) be an open neighbourhood of \(p\) so \(\iota_*: H_n(U, U - p) \to H_n(S^n, S^n - p)\) is an isomorphism by excision. Let \([U, U - p] = \iota_*^{-1}[S^n, S^n - p]\).

Suppose \(f: S^n \to S^n\) with \(f^{-1}(p) = \{q_1, \dots, q_N\}\) finite. Pick \(U_i \subseteq S^n\) open such that \(q_i \in U_i\) and \(U_i \cap U_j = \emptyset\) for \(i \neq j\). Then \(f: (U_i, U_i - q_i) \to (S^n, S^n - p)\) has \(f_*[U_i, U_i - q_i] = k[S^n, S^n - p]\) for some \(k \in \Z\).

\begin{definition}[local degree]\index{local degree}
  The \emph{local degree} of \(f\) at \(q_i \in f^{-1}(p)\) is \(\deg_{q_i} f = k\).
\end{definition}
Note that finiteness of \(f^{-1}(p)\) guarantees \(\deg_{q_i}f\) is well-defined.

\begin{theorem}
  If \(f: S^n \to S^n\) with \(f^{-1}(p) = \{q_1, \dots, q_N\}\) finite then
  \[
    \deg f = \sum_{i = 1}^N \deg_{q_i} f.
  \]
\end{theorem}

\begin{proof}
  Consider the following commutative diagram
  \[
    \begin{tikzcd}
      & H_n(S^n) \ar[r, "f"] \ar[d, "\pi_*"] \ar[ddl, "\gamma"'] & H_n(S^n) \ar[d] \\
      &H_n(S^n, S^n - f^{-1}(q)) \ar[r, "f'"] & H_n(S^n, S^n - p) \\
      \bigoplus H_n(S^n, S^n - q_i) & \bigoplus H_n(U_i, U_i - q_i) \ar[u, "\iota_*"] \ar[ur, "g"'] \ar[l, "j_*"']
    \end{tikzcd}
  \]
  where \(g [U_i, U_i - q_i] = \deg_{q_i} f[S^n, S^n - p]\). \(\iota_*\) is an isomorphism by excision. Let \(\alpha = f' \compose \pi_*, \beta = g \compose \beta'\) where \(\beta' = \iota_*^{-1} \compose \pi_1\), then
  \[
    \alpha[S^n] = \deg f [S^n, S^n - p] = \beta[S^n].
  \]
  Claim that \(\beta'[S^n]  = \bigoplus [U_i, U_i - q_i]\), and then it follows that
  \[
    \beta[S^n] = \sum \deg_{q_i} f [S^n, S^n - p]
  \]
  so the result follows. But this is because

    \[
      \beta'[S^n] = j_*^{-1} \compose \gamma [S^n] = j_*^{-1}(\bigoplus [S^n, S^n - q_i]) = \bigoplus [U_i, U_i - q_i].
    \]
\end{proof}

\subsection{Cellular homology}

\begin{definition}[attaching cell]\index{attaching cell}
  If \(A \subseteq X, B \subseteq Y, f: B \to A\) then
  \[
    X \cup_f Y = X \amalg Y/(b \sim f(b))
  \]
  for all \(b \in B\).

  If \((Y, B) = (D^k, S^{k - 1})\) we say \(X \cup_f D^k\) is obtained by \emph{attaching a \(k\)-cell} to \(X\).
\end{definition}

\begin{definition}[cell complex]\index{cell complex}\index{finite cell complex}\index{skeleton}
  An \emph{\(n\)-dimensional finite cell complex} (FCC) is
  \begin{enumerate}
  \item a space \(X\),
  \item closed subspaces \(\emptyset = X_{-1} \subseteq X_0 \subseteq \cdots X_n = X\) where \(X_k\) is the \emph{\(k\)-skeleton}, such that
  \item \(X_k\) is obtained by attaching finitely many \(k\)-cells to \(X_{k - 1}\), i.e.\ there is a finite set \(A_k\) and maps \(\iota_\alpha: D^k \to X_k\) for \(\alpha \in K\) such that \(\iota_\alpha(S^{k - 1}) \subseteq X_{k - 1}\) and \(\coprod \iota_\alpha: \coprod \Int D^k \to X_k - X_{k - 1}\) is a homeomorphism.
  \end{enumerate}
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item \(X = S^k\). Then \(X\) has the structure of a \(k\)-dimensional cell complex with exactly 1 \(0\)-cell and 1 \(k\)-cell.
  \item \(X = \bigvee_n S^k\) has 1 \(0\)-cell and \(n\) \(k\)-cells. Conversely, any cell complex with this structure must be a wedge of spheres.
  \item In general a space has many different cell complex structures. For example let \(X = S^1\). Then \(X\) can be obtained by gluing two arcs on their endpoints, so has the 2 \(0\)-cells and 2 \(1\)-cells.
  \item \(X = T^2\). It has 1 \(1\)-cell, 2 \(1\)-cells (an equator and a meridian), and 1 \(2\)-cell.
  \end{enumerate}
\end{eg}

The next important example is

\begin{definition}[complex projective space]\index{projective space!complex}\index{Hopf map}
  The \emph{\(n\)-dimensional complex projective space} is
  \[
    \C\P^n
    = (\C^{n + 1} - 0)/\C^*
    = \{z \in \C^{n + 1}: \norm z = 1\}/\C^*
    = S^{2n + 1}/\C^*.
  \]

  The map \(\pi: S^{2n + 1} \to \C\P^n\) is called the \emph{Hopf map}.
\end{definition}

We write \([z_0: z_1: \cdots z_n]\) for the equivalence class of \((z_0, \dots, z_n)\) in \(\C\P^n\). Note that \(\C\P^{n - 1} \to \C\P^n\) by adding \(0\) to the last coordinate. Consider
\begin{align*}
  \iota: D^{2n} &\to \C\P^n \\
  (z_0, \dots z_{n - 1}) &\mapsto [z_0: \cdots : z_{n - 1}: 1 - \norm z]
\end{align*}
Have \(\iota(S^{2n - 1}) \subseteq \C\P^{n - 1}\). Can check that \(\iota|_{\Int D^{2n}}: \Int D^{2n} \to \C\P^n - \C\P^{n - 1}\) is a homeomorphism, so \(\C\P^n\) is obtained by attaching a \(2n\)-cell to \(\C\P^{n - 1}\). By induction we see \(\C\P^n\) is a FCC with one cell of dimension \(0, 2, \dots, 2n\). In particular \(\C\P^2 \cong S^2\).

Claim that
\[
  H_*(\C\P^n) =
  \begin{cases}
    \Z & * = 0, 2, \dots, 2n \\
    0 & \text{otherwise}
  \end{cases}
\]

\begin{proof}
  Induction on \(n\). \(\C\P^0 = \{p\}\). In general, \((\C\P^n, \C\P^{n - 1})\) is a good pair so
  \[
    H_*(\C\P^n, \C\P^{n - 1}) \cong \widetilde H_*(\C\P^n/\C\P^{n - 1}) = \widetilde H_*(S^{2n}) =
    \begin{cases}
      \Z & * = 2n \\
      0 & \text{otherwise}
    \end{cases}
  \]
  In the LES of \((\C\P^n, \C\P^{n - 1})\), the boundary map \(\b: H_{2n}(\C\P^n, \C\P^{n - 1}) \to H_{2n - 1}(\C\P^{n - 1}) = 0\) by induction. So we get
  \[
    \begin{tikzcd}
      0 \ar[r] & H_*(\C\P^{n - 1}) \ar[r] & H_*(\C\P^n) \ar[r] & H_*(\C\P^n, \C\P^{n - 1}) \ar[r] & 0
    \end{tikzcd}
  \]
  but \(H_*(\C\P^n, \C\P^{n - 1})\) is free so we have
  \[
    H_*(\C\P^n) = H_*(\C\P^{n - 1}) \oplus H_*(\C\P^n, \C\P^{n - 1})
  \]
\end{proof}

\begin{definition}[real projective space]\index{projective space!real}
  The \emph{real projective space} is
  \[
    \R\P^n = (\R^{n - 1} - \{0\})/\R^* = S^n/(x \sim - x).
  \]
\end{definition}

The same argument shows that \(\R\P^n\) is a FCC with one cell of dimension \(0, 1, \dots, n\). The attaching map \(\iota: S^{n - 1} \to \R\P^{n - 1}\) is projection. This time there is no trick to bypass the computation. We need to develop the theory of celluar chain complex.

\begin{definition}[cellular homology]\index{cellular homology}
  If \(X\) is a \(n\)-dimensional FCC with \(k\)-skeleton \(X_k\) we define \(C_k^\cell(X) = H_k(X_k, X_{k - 1})\) and \(d_k: C_k^\cell(X) \to C_{k - 1}^\cell(X)\) to be the boundary map in LES of triple \((X_k, X_{k - 1}, X_{k - 2})\).
\end{definition}

Define \(\b_k: H_k(X_k, X_{k - 1}) \to H_{k - 1}(X_{k - 1})\) to be the boundary map in LES of \((X_k, X_{k - 1})\) and \(\pi_{k - 1}: H_{k - 1}(X_{k - 1}) \to H_{k - 1}(X_{k - 1}, X_{k - 2})\).

\begin{lemma}
  \(d_k = \pi_{k - 1} \b_k\).
\end{lemma}

\begin{proof}
  Suppose \([c] \in H_k(X_k, X_{k - 1})\) for some \(c \in C_k(X_k)\) such that \(dc \in C_{k - 1}(X_{k - 1})\). Then
  \begin{align*}
    \b_k[c] &= [dc] \in H_{k - 1}(X_{k - 1}) \\
    d_k[c] &= [dc] \in H_{k - 1}(X_{k - 1}, X_{k - 2})
  \end{align*}
  so the result follows.
\end{proof}

\begin{corollary}
  \(d^\cell \compose d^\cell = 0\).
\end{corollary}

\begin{proof}
  By lemma \(d_k^\cell d_{k + 1}^\cell = \pi_{k - 1} \b_k \pi_k \b_{k + 1}\). But in LES of \((X_k, X_{k - 1})\) we have
  \[
    \begin{tikzcd}
      H_k(X_k) \ar[r, "\pi_k"] & H_k(X_k, X_{k - 1}) \ar[r, "\b_k"] & H_{k - 1}(X_{k - 1})
    \end{tikzcd}
  \]
  so \(\b_k \pi_k = 0\).
\end{proof}

Therefore we indeed have a chain complex. We can describe \(C_*^\cell(X)\) more explicitly. Have maps \(\iota_\alpha: D^k \to X_k\) where \(\iota_\alpha(S^{k - 1}) \subseteq X_{k - 1}\). \((X_k, X_{k - 1})\) is good so
\[
  H_k(X_k, X_{k - 1}) = \widetilde H_k(X_k/X_{k - 1}) = \widetilde H(\bigvee_{\alpha \in A_k} S_\alpha^n) = \langle e_\alpha^k: \alpha \in A_k\rangle
\]
where \(e_\alpha^k = \iota_{\alpha*}[D^k, S^{k - 1}] \in H_k(X_k, X_{k - 1})\). To describe the boundary maps, first note
\[
  \b_k e_\alpha^k = \b_k \iota_{\alpha*} [D^k, S^{k - 1}] = \iota_{\alpha*} \b [D^k, S^{k - 1}] = \iota_{\alpha*}[S^{k - 1}] \in H_{k - 1}(X_{k - 1})
\]
where the last two \(\iota_\alpha\) is a map \(S^{k - 1} \to X_{k - 1}\). Then \(d_k e_\alpha^k\) is induced by the composition
\[
  f_\alpha: S^{k - 1} \xrightarrow{\iota_\alpha} X_{k - 1} \xrightarrow{\pi_{k - 1}} X_{k - 1}/X_{k - 2} \xrightarrow{\cong} \bigvee_{\beta \in A_{k - 1}} S^{k - 1}_\beta
\]
Let \(p_\beta: \bigvee_{\gamma \in A_{k - 1}} S_\gamma^{k - 1} \to S_\beta^{k - 1}\) be the projection. Then
\[
  d e_\alpha^k = \sum_{\beta \in A_{k - 1}} n_{\alpha\beta} e_\beta^{k - 1}
\]
where \(n_{\alpha\beta}\) is the degree of \(p_\beta \compose f_\alpha\).

Thus to calculate the cellular homology we just need to compute the degree of each map. For example consider \(C_*^\cell(\R\P^n)\). Then
\[
  C_k^\cell(\R\P^n) =
  \begin{cases}
    \langle e^k \rangle \cong \Z & 0 \leq k \leq n \\
    0 & \text{otherwise}
  \end{cases}
\]
and to calculate \(de^k\), we invoke the theorem about local degrees on the composition
\[
  f: S^{k - 1} \xrightarrow{\pi} \R\P^{k - 1} \to \R\P^{k - 1}/\R\P^{k - 2} \cong S^{k - 1}.
\]
Each \(p\) has two preimages \(\{q, Aq\}\) antipodal to each other so
\[
  \deg f = \deg_q f + \deg_{A_q} f = \deg_q(f) (1 + \deg A).
\]
Near \(q\), \(f\) is a local homeormorphism so \(\deg_q f = 1\), and \(\deg A = (-1)^k\). Thus
\[
  de^k = 1 + (-1)^k =
  \begin{cases}
    2 & k \text{ even} \\
    0 & k \text{ odd}
  \end{cases}
\]
so we have a chain of \(\Z\) with maps alternating between \(0\) and multiplication by \(2\).

\begin{lemma}
  If \(X\) is a FCC with 1 \(0\)-cell and all other cells of dimension \(\geq m\) then \(\widetilde H_*(X_k) = 0\) unless \(m \leq * \leq k\).
\end{lemma}

\begin{proof}
  Induction on \(k\). If \(k < m\) then \(X_k = X_0 = \{p\}\). If \(k = m\) then \(X_k = X_m = \bigvee_{i = 1}^r S^m\) so \(\widetilde H_*(X_k) = 0\) unless \(* = m\). Now suppose the statement holds for \(X_{k - 1}\). Then \(\widetilde H_*(X_{k - 1}) = 0\) unless \(m \leq * \leq k - 1\) and
  \[
    H_*(X_k, X_{k - 1}) \cong \widetilde H_*(X_k/X_{k - 1}) = \widetilde H_*(\bigvee S^k) = 0
  \]
  unless \(* = k\). Consider the LES of the \((X_k, X_{k - 1})\)
  \[
    \begin{tikzcd}
      H_*(X_{k - 1}) \ar[r] & H_*(X_k) \ar[r] & H_*(X_k, X_{k - 1})
    \end{tikzcd}
  \]
  where the first and last term vanish identically unless \(m \leq * \leq k\). Thus the result follows.
\end{proof}

\begin{corollary}
  If \(X\) is a FCC then \(H_k(X) \cong H_k(X_{k + 1})\).
\end{corollary}

\begin{proof}
  LES of \((X, X_{k + 1})\) gives
  \[
    \begin{tikzcd}
      H_{k + 1}(X, X_{k + 1}) \ar[r] & H_k(X_{k + 1}) \ar[r, "j_*"] & H_k(X) \ar[r] & H_k(X, X_{k + 1})
    \end{tikzcd}
  \]
  Also \(H_*(X, X_{k + 1}) \cong \widetilde H_*(X/X_{k + 1})\) and \(X/X_{k + 1}\) has 1 \(0\)-cell and all other cells of dimension \(> k + 1\) so by lemma \(H_{k - 1}(X, X_{k + 1}) = H_k(X, X_{k + 1}) = 0\). Thus \(j_*\) is an isomorphism.
\end{proof}

\begin{theorem}
  If \(X\) is a FCC then \(H_*^\cell(X) \cong H_*(X)\).
\end{theorem}

\begin{proof}
  Consider the commutative diagram
  \[
    \begin{tikzcd}[column sep=tiny]
      & & & \textcolor{blue}{H_k(X_{k + 1}, X_k)} \\
      \textcolor{blue}{H_k(X_{k - 1})} \ar[dr] & & H_k(X_{k + 1}) \ar[ur] \\
      & H_k(X_k) \ar[ur, "i"] \ar[dr, "\pi_k"] \\
      H_{k + 1}(X_{k + 1}, X_k) \ar[ur, "\b_{k + 1}"] \ar[rr, "d_{k + 1}"] & & H_k(X_k, X_{k - 1}) \ar[rr, "d_k"] \ar[dr, "\b_k"] & & H_{k - 1}(X_{k - 1}, X_{k - 2}) \\
      & & & H_{k - 1}(X_{k - 1}) \ar[ur, "\pi_{k - 1}"] \\
      & & \textcolor{blue}{H_{k - 1}(X_{k - 2})} \ar[ur]
    \end{tikzcd}
  \]
  where the diagonal and anti-diagonal sequences are LES's of pairs. The groups written in blue are \(0\) by the lemma so \(\pi_{k - 1}\) and \(\pi_k\) are injective and \(i\) is surjective. Thus
  \[
    \ker d_k = \ker \b_k = \im \pi_k = H_k(X_k), \quad \im d_{k + 1} = \im \b_{k + 1}
  \]
  and so
  \[
    H_k^\cell(X) = \frac{\ker d_k}{\im d_{k + 1}} = \frac{H_k(X_k)}{\im \b_{k + 1}} = \coker \b_{k + 1} = \im i = H_k(X_{k + 1}) = H_k(X).
  \]
\end{proof}

\begin{corollary}[dimension axiom]
  If \(X\) is a FCC of dimension \(n\) then \(H_*(X) = 0\) for \(* > n\).
\end{corollary}

\begin{corollary}
  If \(X\) is a FCC then \(H_*(X)\) is a finitely generated abelian group.
\end{corollary}

\begin{eg}
  The homologies of real projective spaces are
  \[
    H_*(\R\P^{2n}) = H_*^\cell(\R\P^{2n}) =
    \begin{cases}
      \Z & * = 0 \\
      \Z/2 & * = 1, 3, \dots, 2n - 1 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  and
  \[
    H_*(\R\P^{2n + 1}) =
    \begin{cases}
      \Z & * = 0, 2n + 1 \\
      \Z/2 & * = 1, 3, \dots, 2n - 1 \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

Before closing this chapter, we would like to mention that cell complexes are important not only because they enable efficient computation of homology groups, but also because of its theoretical importance. In some sense cell complex (with some slight generalisations) is the ``correct'' category to do algebraic topology in.

We quote the following result

\begin{theorem}[Whitehead]
  If \(X\) and \(Y\) are connected FCC's, \(f: X \to Y\) with \(f_*: \pi_i(X) \to \pi_i(Y)\) isomorphisms for all \(i \geq 1\) then it is a homotopy equivalence.
\end{theorem}

This is a nice result but it is impractical to check all homotopy groups. Instead, with the help of Hurewicz theorem (and Barrat-Puppe sequences) we have

\begin{corollary}
  Suppose \(X\) and \(Y\) are as above and \(\pi_1(X) = \pi_1(Y) = 1\) then if \(f_*: H_*(X) \to H_*(Y)\) are isomorphisms then \(f\) is a homotopy equivalence.
\end{corollary}

\begin{corollary}
  Suppose \(X\) is an FCC with \(\pi_1(X) = 0\) and \(\widetilde H_*(X) = 0\) then \(X\) is contractible.
\end{corollary}

\section{Cohomology \& Products}

\subsection{Homology with coefficients}

Although this chapter is titled cohomology we begin with more on homology. Firstly we very briefly summarise properties of tensor products. Let \(R\) be a commutative ring. If \(M\) and \(N\) are \(R\)-modules. There is an \(R\)-module
\[
  M \otimes_R N = M \otimes N = \langle m \otimes n: m \in M, n \in N \rangle/\sim
\]
where \(\sim\) is generated by
\begin{align*}
  (m_1 + m_2) \otimes n &\sim m_1 \otimes n + m_2 \otimes n \\
  m \otimes (n_1 + n_2) &\sim m \otimes n_1 + m \otimes n_2 \\
  r(m \otimes n) &\sim (rm) \otimes n \sim m \otimes (rn)
\end{align*}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item For any \(R\)-module \(N\), \(R \otimes N \cong N\) with the isomorphism given by \(r \otimes n \mapsto rn\).
  \item Let \(R = \Z\). Then \(\Q \otimes \Z/a = 0\) as
    \[
      x \otimes y = \frac{x}{a} \otimes ay = \frac{x}{a} \otimes 0 = 0.
    \]
  \item \(\Z/a \otimes \Z/b \cong \Z/(a, b)\).
  \end{enumerate}
\end{eg}

\begin{proposition}\leavevmode
  \begin{enumerate}
  \item \(M \otimes N \cong N \otimes M\).
  \item \((M_1 \oplus M_2) \otimes N \cong M_1 \otimes N \oplus M_2 \otimes N\).
  \item In particular \(R^m \otimes R^n \cong R^{mn}\) and \(R^m \otimes M \cong M^m\).
  \end{enumerate}
\end{proposition}

If \(f: M_1 \to M_2, g: N_1 \to N_2\) are homomorphisms, so is
\begin{align*}
  f \otimes g: M_1 \otimes N_1 &\to M_2 \otimes N_2 \\
  m \otimes n &\mapsto f(m) \otimes g(n)
\end{align*}
and \((f_1 \otimes g_1) \compose (f_2 \otimes g_2) = (f_1 \compose f_2) \otimes (g_1 \compose g_2)\).

On the level of chain complexes, if \((C_*, d)\) is a chain complex over \(R\) and \(M\) is an \(R\)-module then \((C_* \otimes M, d \otimes \id_M)\) is a chain complex as
\[
  (d \otimes \id_M)^2 = d^2 \otimes \id_M^2 = 0.
\]

\begin{eg}
  Consider the cellular complex for \(\R\P^2\)
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z \ar[r, "\cdot 2"] & \Z \ar[r, "0"] & \Z \ar[r] & 0
    \end{tikzcd}
  \]
  Tensor with \(\Z/2\), we get
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z/2 \ar[r, "\cdot 2"] & \Z/2 \ar[r, "0"] & \Z/2 \ar[r] & 0
    \end{tikzcd}
  \] 
  but \(- \cdot 2: \Z/2 \to \Z/2\) is just \(0\) so
  \[
    H_*(C_*^\cell(\R\P^2) \otimes \Z/2) =
    \begin{cases}
      \Z/2 & * = 0, 1, 2 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  In particular, it is not the same as \(H_*^\cell(\R\P^2) \otimes \Z/2\).
\end{eg}
 
\begin{lemma}
  If \(f: C _* \to C_*'\) is a chain map then \(f \otimes \id_M: C_* \otimes M \to C_* \otimes M\) is also a chain map. If \(f \sim g\) then \(f \otimes \id_M \sim g \otimes \id_M\).
\end{lemma}

\begin{definition}[singular homology with coefficients]\index{chain complex!singular!with coefficients}\index{singular homology!with coefficients}
  If \(X\) is a space, \(G\) a \(\Z\)-module we define the \emph{singular chain complex of \(X\) with coefficients in \(G\)} to be \(C_*(X; G) = C_*(X) \otimes_\Z G\) and \emph{the singular homology of \(X\) with coefficients in \(G\)} to be \(H_*(X; G) = H_*(C_*(X; G))\).
\end{definition}

Note if \(G = \Z\) then \(C_*(X; \Z) = C_*(X)\). We usually consider the case \(G = \R, \Q, \Z/a\), which are in particular rings. Note that if \(R\) is a ring then \(C_*(X; R)\) is a chain complex over \(R\).

If \(g \in G\) there is a chain map \(C_*(X) \to C_*(X; G), x \mapsto x \otimes g\). It induces \(H_*(X) \to H_*(X; G), [x] \mapsto [x \otimes g]\). Also if \(f: X \to Y\), \(f_\# \otimes \id_G: C_*(X; G) \to C_*(Y; G)\) is a chain map, inducing \(f_*: H_*(X; G) \to H_*(Y; G)\).

\begin{lemma}
  There is a commutative square
  \[
    \begin{tikzcd}
      H_*(X) \ar[r, "f_*"] \ar[d, "- \otimes g"] & H_*(Y) \ar[d, "- \otimes g"] \\
      H_*(X; G) \ar[r, "f_*"] & H_*(Y; G)
    \end{tikzcd}
  \]
\end{lemma}

If \(X\) is an FCC then we define \(H_*^\cell(X; G)\) to be the homology of \(C_*^\cell(X; G) = C_*^\cell(X) \otimes_\Z G\).

\begin{theorem}
  If \(X\) is an FCC then \(H_*(X; G) \cong H_*^\cell(X; G)\).
\end{theorem}

\begin{proof}[Sketch proof]
  Basically we review what we have done so far and convince ourselves that they still hold with coefficients. The list of properties are
  \begin{enumerate}
  \item functoriality: \(H_*(-, G)\) is a functor from the category of pairs of spaces to the category of abelian groups. This follows from
    \[
      C_*(X, A; G) = C_*(X, A) \otimes G \cong \frac{C_*(X; G)}{C_*(A; G)}.
    \]
  \item homotopy invariance: if \(f \sim g\) then \(f_* = g_*\).
  \item naturality: if \(f: (X, A) \to (Y, B)\) then there is a commutative diagram of LES of pairs
    \[
      \begin{tikzcd}
        H_*(A; G) \ar[r] \ar[d] & H_*(X; G) \ar[r] \ar[d] & H_*(X, A; G) \ar[r] \ar[d] & H_{* - 1}(A; G) \ar[d] \\
        H_*(B; G) \ar[r] & H_*(X; G) \ar[r] & H_*(X, B; G) \ar[r] & H_{* - 1}(B; G)
      \end{tikzcd}
    \]
  \item excision: if \(\overline B \subseteq \Int A\) then \(H_*(X - B, A - B; G) \cong H_*(X, A; G)\).
  \item dimension axiom: \(H_*(\{p\}; G) = G\) if \(* = 0\) and \(0\) otherwise.
  \end{enumerate}
  A functor \(H_*(-, G)\) satisfying properties 1 -- 4 is a \emph{generalised homology theory}\index{generalised homology theory}, and has the property that it is completely determined by its value on the one point space.

  For our purpose, we define \(\widetilde H_*(X; G) = \ker(f_*: H_*(X; G) \to H_*(\{p\}; G))\) where \(f: X \to \{p\}\). Then show
  \begin{enumerate}
  \item \(\widetilde H_*(S^n; G) \cong \widetilde H_*(D^n, S^{n - 1}; G) =
    \begin{cases}
      G & * = n \\
      0 & \text{otherwise}
    \end{cases}
    \).
  \item If \(f: S^n \to S^n\) then from the commutative diagram
    \[
      \begin{tikzcd}
        H_n(S^n) \ar[r, "f_*"] \ar[d, "- \otimes g"] & H_n(S^n) \ar[d, "- \otimes g"] \\
        H_n(S^n; G) \ar[r, "f_*"] & H_n(S^n; G)
      \end{tikzcd}
    \]
    we conclude \(f_*: H_n(S^n; G) \to H_n(S^n; G)\) is multiplication by \(\deg f\).
  \item Run the proof of cellular homology as before.
  \end{enumerate}
\end{proof}

\begin{eg}
  Generalising the example above,
  \[
    H_*(\R\P^n; \Z/2) \cong H_*^\cell(\R\P^n; \Z/2) =
    \begin{cases}
      \Z/2 & * = 0, \dots, n \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

\subsection{Cohomology}

This section is the mirror image of the previous section, with the functor \(\Hom_\Z(-, G)\) in place of \(- \otimes_\Z G\). Let's begin the duality by quickly reviewing \(\Hom\).

If \(M, N\) are \(R\)-modules then
\[
  \Hom(M, N) = \{\varphi: M \to N: \varphi \text{ a homomorphism}\}
\]
is an \(R\)-module via
\[
  (\varphi_1 + \varphi_2)(m) = \varphi_1(m) + \varphi_2(m), \quad (a \varphi)(m) = a \varphi(m).
\]

\begin{proposition}\leavevmode
  \begin{enumerate}
  \item \(\Hom(R, N) \to N, \varphi \mapsto \varphi(1)\) is an isomorphism.
  \item \(\Hom(M_1 \oplus M_2, N) \cong \Hom(M_1, N) \oplus \Hom(M_2, N)\).
  \item \(\Hom(M, N_1 \oplus N_2) \cong \Hom(M, N_1) \oplus \Hom(M, N_2)\).
  \end{enumerate}
\end{proposition}

Note that unlike tensor product, \(\Hom(M, N) \neq \Hom(N, M)\). For example take \(R = \Z\) then
\[
  \Hom(\Z, \Z/a) = \Z/a \ncong 0 = \Hom(\Z/a, \Z).
\]
We also note that \(\Hom(\Z/a, \Z/b) = \Z/(a, b)\).

If \(f: M_1 \to M_2\) we get \(f^*: \Hom(M_2, N) \to \Hom(M_1, N), \varphi \mapsto \varphi \compose f\) and \((f \compose g)^* = g^* \compose f^*\). In other words \(\Hom(-, N)\) is a contravariant functor.

\begin{definition}[cochain complex, cohomology]\index{cochain complex}\index{cohomology}
  A \emph{cochain complex} is \((C^*, d^*) = (\bigoplus_{k \in \Z} C^k, \sum d^k)\)  where \(d^k: C^k \to C^{k + 1}\) satisfies \((d^*)^2 = 0\).

  Its \emph{cohomology} is \(H^k(C^*) = \ker d^k/\im d^{k - 1}\).
\end{definition}
It is nothing but a chain complex/homology with a different grading.

If \((C_*, d)\) is a chain complex then \((\Hom(C_*, N), d^*)\) is a cochain complex. Explicitly \(d^{k - 1} = (d_k)^*\), the transpose of \(d_k\).

\begin{definition}[singular cohomology with coefficients]\index{singular cohomology!with coefficients}
  If \(X\) is a space and \(G\) an abelian group, then the \emph{singular cochain complex of \(X\) with coefficients in \(G\)} is \(C^*(X; G) = \Hom(C_*(X), G)\), and its cohomology is \(H^*(X; G) = H^*(C^*(X; G))\).
\end{definition}

If \(f: X \to Y\) is a map then it induces \(f^\#: C^*(Y; G) \to C^*(X; G)\) and so maps on homologies \(f^*: H^*(Y; G) \to H^*(X; G)\). In addition \((f \compose g)^* = g^* \compose f^*\).

If \(X\) is an FCC then we define \(C^*_\cell(X; G) = \Hom(C_*^\cell(X), G)\).

\begin{theorem}
  If \(X\) is an FCC then \(H^*(X; G) = H_\cell^*(X; G)\).
\end{theorem}

\begin{eg}
  \(C_*^\cell(\R\P^2; \Z)\) is
  \[
    \begin{tikzcd}
      0 \ar[r] & \Z \ar[r, "\cdot 2"] & \Z \ar[r, "0"] & \Z \ar[r] & 0
    \end{tikzcd}
  \]
  so \(C^*_\cell(\R\P^2; \Z)\) is
  \[
    \begin{tikzcd}
      0 & \Z \ar[l] & \Z \ar[l, "\cdot 2"'] & \Z \ar[l, "0"'] & 0 \ar[l]
    \end{tikzcd}
  \]
  so
  \[
    H^*(\R\P^2; \Z) =
    \begin{cases}
      \Z & * = 0 \\
      \Z/2 & * = 2 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  and in particular this is not the same as \(\Hom(H_*(\R\P^2), \Z)\).
\end{eg}

\begin{eg}[differential form]
  If \(M\) is a smooth manifold and \(\omega \in \Omega^k(M)\) then \(\omega\) defines a cochain on smooth simplices \(\sigma: \Delta^k \to M\) by \(\omega(\sigma) = \int_{\Delta^k} \sigma^*(\omega)\). if \(\mathrm d: \Omega^k(M) \to \Omega^{k + 1}(M)\) is the exterior derivative then
  \[
    \d \omega(\sigma) = \int_{\Delta^k} \sigma^*(\d \omega) = \int_{\Delta^k} \d \sigma^*(\omega) = \int_{\b \Delta^k} \sigma^*(\omega) = \omega(d \sigma),
  \]
  i.e.\ \(\d = d^*\) in this sense.

  de Rham's theorem\index{de Rham's theorem} says that \(H^*(\Omega^*(M), \d) \cong H^*(M; \R)\).
\end{eg}

Similarly we can define cohomology of pairs. Let
\[
  C^*(X, A) = \{a \in C^*(X): a(\sigma) = 0 \text{ if } \im \sigma \subseteq A\}.
\]
Then the SES
\[
  \begin{tikzcd}
    0 \ar[r] & C^*(X, A) \ar[r] & C^*(X) \ar[r] & C^*(A) \ar[r] & 0
  \end{tikzcd}
\]
gives LES
\[
  \begin{tikzcd}
    H^*(X, A; G) \ar[r] & H^*(X; G) \ar[r] & H^*(A; G) \ar[r, "\delta"] & H^{* + 1}(X, A; G) \ar[r] & \cdots
  \end{tikzcd}
\]

There is a bilinear pairing
\begin{align*}
  \langle \cdot, \cdot \rangle: C^k(X; G) \times C_k(X) &\to G \\
  (a, x) &\mapsto a(x)
\end{align*}
with respect to which \(d^*\) and \(d\) are adjoints
\[
  \langle d^*a, x \rangle = (d^*a)(x) = a(dx) = \langle a, dx \rangle.
\]
Similarly if \(f: X \to Y\) then
\[
  \langle f^\#a, x \rangle = \langle a, f_\# x \rangle.
\]

\begin{lemma}
  \(\langle \cdot, \cdot \rangle\) descends to a pairing \(H^*(X; G) \times H_*(X) \to G\).
\end{lemma}

\begin{proof}
  Given \([a] \in H^*(X; G), [x] \in H_*(X)\), we know \(d^*a = 0, d x = 0\) so by bilinearity
  \[
    \langle a + d^* b, x + dy \rangle
    = \langle a, x \rangle + \langle b, dx \rangle + \langle d^*a, y \rangle + \langle b, d^2 y\rangle
    = \langle a, x \rangle.
  \]
\end{proof}

\subsection{Universal coefficient theorem}

\begin{definition}
  A chain complex \(C_*\) over \(R\) is \emph{short injective} if
  \begin{enumerate}
  \item \(C_* = 0\) for \(* \neq k + 1, k\),
  \item \(C_k, C_{k + 1}\) are free over \(R\),
  \item \(d_{k + 1}: C_{k + 1} \to C_k\) is injective.
  \end{enumerate}
\end{definition}
In particular \(H_*(C_*) =
\begin{cases}
  C_k/C_{k + 1} & * = k \\
  0 & \text{otherwise}
\end{cases}
\).

\begin{lemma}
  If \(C_*\) is short injective and \(d_{k + 1}\) is invertible then \(C_*\) is contractible.
\end{lemma}

\begin{proof}
  Let \(h = d_k^{-1}: C_k \to C_{k + 1}\). Then \(dh + hd = \id_{C_*}\) so \(C_*\) is contractible.
\end{proof}

\begin{theorem}
  If \(C_*\) is a free chain complex over a PID \(R\) then \(C_*\) is isomorphic to a direct sum of short injective complexes.
\end{theorem}

Some algebra facts:
\begin{enumerate}
\item \(\Z, \F[t], \F[t, t^{-1}]\) where \(\F\) is a field are all PIDs.
\item If \(R\) is a PID, \(M\) is free over \(R\) and \(N \subseteq M\) then \(N\) is also free.
\item If \(
  \begin{tikzcd}
    0 \ar[r] & A \ar[r] & B \ar[r] & C \ar[r] & 0
  \end{tikzcd}
  \) and \(C\) is a free then the sequence splits and \(B \cong A \oplus C\). This is essentially example sheet 1 question 3.
\end{enumerate}

\begin{proof}
  Let \(Z_k = \ker(d_k: C_k \to C_{k - 1}), B_{k - 1} = \im d_k\). Then \(Z_k, B_k \subseteq C_k\) which is free, so are themselves free. We have a short exact sequence
  \[
    \begin{tikzcd}
      0 \ar[r] & Z_k \ar[r] & C_k \ar[r] & B_{k - 1} \ar[r] & 0
    \end{tikzcd}
  \]
  and \(B_{k - 1}\) is free so \(C_k \cong Z_k \oplus B_{k - 1}\). Note \(d(Z_k) = 0, d(B_{k - 1}) \subseteq Z_{k - 1}\), i.e.
  \[
    C_* \cong \bigoplus (B_{k - 1} \xrightarrow{d_k} Z_{k - 1}).
  \]
\end{proof}

\begin{theorem}[Smith normal form]
  If \(f: R^n \to R^m\) is injective where \(R\) is a PID then there are bases \(\{e_i\}, 1 \leq i \leq n\) for \(R^n\), \(\{e_j'\}, 1 \leq j \leq m\) for \(R^m\) such that \(f(e_i) = a_ie_i'\) and \(a_i \neq 0\) for \(1 \leq i \leq n\).
\end{theorem}

\begin{corollary}
  If \(C_*\) is a free, finitely generated complex over a PID \(R\) then \(C_*\) is chain homotopy equivalent to a direct sum of complexes of the following forms:
  \begin{enumerate}
  \item \(
    \begin{tikzcd}
      0 \ar[r] & R \ar[r] & 0
    \end{tikzcd}
    \),
  \item \(
    \begin{tikzcd}
      0 \ar[r] & R \ar[r, "a"] & R \ar[r] & 0
    \end{tikzcd}
    , a \neq 0\).
  \end{enumerate}
\end{corollary}

\begin{proof}
  Put each short injective summand of \(C_*\) into Smith normal form.
\end{proof}

\begin{corollary}
  If \(C_*\) is a finitely generated complex over a field \(\F\) then \(C_* \sim (H_*(C), 0)\).
\end{corollary}

\begin{proof}
  Complexes of the type 2 are contractible since any \(a \neq 0\) in \(\F\) is invertible.
\end{proof}

The upshot of this section is

\begin{theorem}
  \(H_*(X; G)\) and \(H^*(X; G)\) are determined by \(H_*(X)\).
\end{theorem}

Later we'll develop enough homological algebra machinery to say precisely what we mean by ``determined''. Consider for now the case \(R\) is a PID and \(C_*\) is a free finitely generated chain complex over \(R\). By structure theorem for modules over a PID, \(H_*(C_*) = F_* \oplus T_*\) where \(F_*\) and \(T_*\) are the free and torsion parts. Summands of type 1 account for \(F_*\), and type 2 account for \(T_*\).

\begin{proposition}
  \[
    H_k(C \otimes R/(b)) \cong F_k \otimes R/(b) \oplus T_k \otimes R/(b) \oplus T_{k - 1} \otimes R/(b).
  \]
\end{proposition}

\begin{proof}
  Suffices to check for complexes of type 1 and 2. Type 1 is easy. For type 2,
  \[
    (R \xrightarrow{a} R) \otimes R/(b) = R/(b) \xrightarrow{a} R/(b),
  \]
  and both homology groups are isomorphic to \(R/(a, b) \cong R/(a) \otimes R/(b)\).
\end{proof}

\begin{proposition}
  \(H^k(\Hom(C_*, R)) \cong F_k \oplus T_{k - 1}\).
\end{proposition}

\begin{proposition}
  \[
    H^k(\Hom(C_*, R/(a))) \cong \Hom(F_k, R/(a)) \oplus \Hom(T_k, R/(a)) \oplus \Hom(T_{k - 1}, R/(a)).
  \]
\end{proposition}

\begin{eg}
  Suppose
  \[
    \widetilde H_*(X) =
    \begin{cases}
      \Z/4 & * = 3 \\
      \Z & * = 2 \\
      \Z/2 & * = 1 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  Then
  \[
    \widetilde H^*(X) =
    \begin{cases}
      \Z/4 & * = 4 \\
      \Z \oplus \Z/2 & * = 2 \\
      0 & \text{otherwise}
    \end{cases}
    \quad
    \widetilde H_*(X; \Z/4) =
    \begin{cases}
      \Z/4 & * = 3, 4 \\
      \Z/4 \oplus \Z/2 & * = 2 \\
      \Z/2 & * = 1 \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

\begin{remark}\leavevmode
  \begin{enumerate}
  \item We've proved these results for free finitely generated chain complexes. More generally they hold whenever \(C_*(X)\) is free and not necessarily finitely generated.
  \item If \(X\) is a FCC then \(C_*^\cell(X)\) is free so we can use the formulas to compute their (co)homologies with coefficients. In fact, the theorems hold for all spaces.
  \end{enumerate}
\end{remark}

\subsubsection{Tor and Ext}

Let \(R\) be a commutative ring.

\begin{definition}[free resolution]\index{free resolution}
  If \(M\) is an \(R\)-module, a \emph{free resolution} of \(M\) is a chain complex \(C_*\) with \(C_k = 0\) for \(k < 0\) and \(H_*(C) = M\) if \(* = 0\) and \(0\) otherwise.
\end{definition}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item If \(M\) is free then \(
    \begin{tikzcd}
      0 \ar[r] & M \ar[r] & 0
    \end{tikzcd}
    \) is a free resolution of \(M\).
  \item If \(R\) is a PID and \(a \neq 0\) then \(
    \begin{tikzcd}
      0 \ar[r] & R \ar[r, "\cdot a"] & R \ar[r] & 0
    \end{tikzcd}
    \) is a free resolution of \(R/(a)\).
  \item If \(
    \begin{tikzcd}
      0 \ar[r] & C_1 \ar[r] & C_0 \ar[r] & 0
    \end{tikzcd}
    \) is short injective then it is a free resolution of \(H_*(C) = H_0(C)\).
  \item If \(R = \C[x, y], M = R/(x, y)\) then \(
    \begin{tikzcd}[ampersand replacement=\&]
      R \ar[r, "{\begin{psmallmatrix} x \\ y \end{psmallmatrix}}"]
      \& R^2 \ar[r, "{\begin{psmallmatrix} y & -x \end{psmallmatrix}}"] \& R \ar[r] \& 0
    \end{tikzcd}
    \) is a free resolution of \(M\).
  \end{enumerate}
\end{eg}

\begin{definition}[\(\Tor\) and \(\Ext\)]\index{Tor}\index{Ext}
  If \(M, N\) are \(R\)-modules then
  \begin{align*}
    \Tor_i^R(M, N) &= H_i(C_* \otimes N) \\
    \Ext_R^i(M, N) &= H^i(\Hom(C_*, N))
  \end{align*}
  where \(C_*\) is a free resolution of \(M\).
\end{definition}

It is a fact (that we shall not prove here) that this does not depend on the choice of free resolution \(C_*\).

\begin{eg}\leavevmode
  \begin{enumerate}
  \item If \(M\) is free then
    \[
      \Tor_*(M, N) =
      \begin{cases}
        M \otimes N & * = 0 \\
        0 & \text{otherwise}
      \end{cases}
      \qquad
      \Ext^*(M, N) =
      \begin{cases}
        \Hom(M, N) & * = 0 \\
        0 & \text{otherwise}
      \end{cases}
    \]
  \item If \(R\) is a PID, \(a, b \neq 0\) then
    \[
      \Tor_*(R/(a), R/(b)) =
      \begin{cases}
        R/(a, b) & * = 0, 1 \\
        0 & \text{otherwise}
      \end{cases}
    \]
  \item (Nothing interesting).
  \item If \(R = \C[x, y], M = R/(x, y)\) then
    \[
      \Tor_*(M, M) =
      \begin{cases}
        M & * = 0, 2 \\
        M^2 & * = 1 \\
        0 & \text{otherwise}
      \end{cases}
    \]
  \end{enumerate}
\end{eg}

\begin{proposition}
  If \(C_*\) is a free chain complex over a PID \(R\) then
  \begin{align*}
    H_k(C \otimes N) &= \Tor_0(H_k(C), N) \oplus \Tor_1(H_{k - 1}(C), N) \\
                     &= H_k(C) \otimes N \oplus \Tor_1(H_{k - 1}(C), N) \\
    H^k(\Hom(C, N)) &= \Ext^0(H_k(C), N) \oplus \Ext^1(H_{k - 1}(C), N) \\
                     &= \Hom(H_k(C), N) \oplus \Ext^1(H_{k - 1}(C), N)
  \end{align*}
\end{proposition}

\begin{proof}
  Suffices to check for a short injective complex since \(C\) is a direct sum of these. If \(
  \begin{tikzcd}
    0 \ar[r] & C_{k + 1} \ar[r] & C_k \ar[r] & 0
  \end{tikzcd}
  \) is short injective, it is a (shifted) free resolution of \(H_k(C)\) so the homology of \(C_* \otimes N\) is \(\Tor_1(H_*(C, N))\) and \(\Tor_0(H_*(C, N))\) in degree \(k + 1\) and \(k\). Similar for \(\Ext\).
\end{proof}

\begin{corollary}
  If \(H_*\) is a free over \(\Z\) then
  \begin{align*}
    H_k(X; G) &= H_k(X) \otimes G \\
    H^k(X; G) &= \Hom(H_k(X); G)
  \end{align*}
\end{corollary}

\begin{proof}
  \(H_*(X)\) is free implies that \(\Tor_1\) and \(\Ext^1\) terms are \(0\).
\end{proof}

\begin{corollary}
  If \(H_*(X)\) is free then \(H^*(X) = \Hom(H_*(X), \Z)\), the dual of \(H_*(X)\). Furthermore if \(f: X \to Y\) then \(f^*: H^*(Y) \to H^*(X)\) is dual to \(f_*: H_*(X) \to H_*(Y)\).
\end{corollary}

\begin{proof}
  This follows from the pairing formula
  \[
    \langle f^*a, x \rangle = \langle a, f_* x\rangle.
  \]
\end{proof}

\subsection{Products}

\subsubsection{Tensor product of chain complexes}

\begin{notation}
  If \(C_*\) is a chain complex and \(x \in C_i\), write \(|x| = i\).
\end{notation}

\begin{definition}[tensor product of chain complexes]\index{chain complex!tensor product}
  If \(C\) and \(C'\) are chain complexes over \(R\) then \(C \otimes C'\) is the chain complex
  \[
    (C \otimes C')_k = \bigoplus_{i + j = k} C_i \otimes C_j'
  \]
  with
  \[
    d(y \otimes y') = dy \otimes y' + (-1)^{|y|} y \otimes d'y'.
  \]
\end{definition}

Check that
\begin{align*}
  d^2(y \otimes y')
  &= d^2 y \otimes y' + (-1)^{|dy|} dy \otimes dy' \\
  &\quad + (-1)^{|y|} dy \otimes dy' + (-1)^{2|y|} y \otimes (d')^2 y' \\
  &= 0
\end{align*}
since \(|dy| = |y| - 1\).

\begin{proposition}
  \index{finite cell complex}
  If \(Y\) and \(Y'\) are FCCs, \(A_i, A_i'\) are the set of \(i\)-cells of \(Y\) and \(Y'\) respectively. Then \(Z = Y \times Y'\) is a finite cell complex with \(k\)-cells \(\{(\alpha, \alpha'): \alpha \in A_i, \alpha' \in A_j': i + j = k\}\).
\end{proposition}

\begin{eg}
  \(I\) is a FCC with 2 \(0\)-cells and 1 \(1\)-cell. Then \(I \times I\) has a cell complex structure of 4 \(0\)-cells, 4 \(1\)-cells and 1 \(2\)-cell. (picture)
\end{eg}

\begin{proof}[Sketch proof]
  Take \(Z_k = \bigcup_{i + j = k} Y_i \times Y_j'\). If \(\alpha \in A_i, \alpha' \in A_j'\), have \(\iota_\alpha: D^i \to Y_i, \iota_\alpha': D^j \to Y_j'\). Then have \(\iota_\alpha \times \iota_\alpha': D^i \times D^j \cong D^{i + j} \to Y_i \times Y_j' \subseteq Z_k\). Check details.
\end{proof}

\begin{theorem}
  If \(Y\) and \(Y'\) are FCCs then
  \[
    C_*^\cell(Y \times Y') = C_*^\cell(Y) \otimes C_*^\cell(Y').
  \]
\end{theorem}

\begin{proof}
  At the level of chain groups,
  \begin{align*}
    C_k^\cell(Y \times Y') &= \langle e_{(\alpha, \alpha')}: \alpha \in A_i, \alpha' \in A_j', i + j = k \rangle \\
    (C_*^\cell(Y) \otimes C_*^\cell(Y'))_k &= \langle e_\alpha \otimes e_{\alpha'}: \alpha \in A_i, \alpha' \in A_j', i + j = k \rangle
  \end{align*}
  so there is an obvious correspondence. Check the differentials on both sides agree.
\end{proof}

\begin{eg}
  Homology of product FCCs can be computed using the differential graded double complex associated to the tensor product cell complex. For example to compute \(H_*(\R\P^2 \times \R\P^2) = H_*(C_*^\cell(\R\P^2) \otimes C_*^\cell(\R\P^2))\) we draw the double complex (note the minus sign)
  \[
    \begin{tikzcd}
      \Z \ar[d, "2"] & \Z \ar[d, "2"] & \Z \ar[d, "-2"] \ar[l, "0"'] & \Z \ar[d, "2"] \ar[l, "2"'] \\
      \Z \ar[d, "0"] & \Z \ar[d, "0"] & \Z \ar[d, "0"] \ar[l, "0"'] & \Z \ar[d, "0"] \ar[l, "2"'] \\
      \Z & \Z & \Z \ar[l, "0"'] & \Z \ar[l, "2"'] \\
      & \Z & \Z \ar[l, "0"'] & \Z \ar[l, "2"']
    \end{tikzcd}
  \]
  The double complex has the form \(
  \begin{psmallmatrix}
    A_2 & A_3 \\
    A_0 & A_1
  \end{psmallmatrix}
  \) with zero maps between different \(A_i\)'s. \(A_0, A_1, A_2\) are boring so let's look at \(A_3\), which is
  \[
    \begin{tikzcd}[ampersand replacement=\&]
      \Z \ar[r, "{\begin{psmallmatrix} 2 \\ 2 \end{psmallmatrix}}"] \& \Z^2 \ar[r, "{\begin{psmallmatrix} -2 & 2 \end{psmallmatrix}}"] \& \Z
    \end{tikzcd}
  \]
  so has homology
  \[
    H_2(A_3) = \Z/2, H_3(A_3) = \Z/2, H_4(A_3) = 0.
  \]
  Summing up contributions from each summand, we get
  \[
    H_*(\R\P^2 \times \R\P^2) =
    \begin{cases}
      \Z & * = 0 \\
      (\Z/2)^2 & * = 1 \\
      \Z/2 & * = 2, 3 \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

\begin{theorem}[Knneth formula]\index{Knneth formula}
  If \(C, C'\) are free over a PID \(R\) then
  \[
    H_k(C \otimes C') \cong \bigoplus_{i + j = k} H_i(C) \otimes H_j(C') \oplus \bigoplus_{i + j = k - 1} \Tor_1(H_i(C), H_j(C')).
  \]
\end{theorem}
One should think of this as
\[
  H_*(C \otimes C') \cong H_*(C) \otimes H_*(C') \oplus \Tor_1(H_*(C), H_*(C')).
\]
with suitable indices. In particular \(H_*(X \times Y)\) is determined by \(H_*(X)\) and \(H_*(Y)\).

\begin{proof}
  We prove the case where \(C, C'\) are finitely generated. Since tensor product distributes over direct sum, it suffices to check the formula for type 1 and 2. We verify one case here and the rest are left as exercise. Suppose \(C, C'\) are
  \[
    \begin{tikzcd}
      0 \ar[r] & R \ar[r, "a"] & R \ar[r] & 0 \\
      0 \ar[r] & R \ar[r, "a'"] & R \ar[r] & 0
    \end{tikzcd}
  \]
  in degree \(i\) and \(j\). Then
  \[
    C \otimes C' =
    \begin{tikzcd}
      R \ar[d, "\pm a'"] & R \ar[d, "\mp a'"] \ar[l, "a"'] \\
      R & R \ar[l, "a"']
    \end{tikzcd}
    =
    \begin{tikzcd}[ampersand replacement=\&]
      R \ar[r, "\begin{psmallmatrix} a \\ \mp a' \end{psmallmatrix}"] \& R^2 \ar[r, "{\begin{psmallmatrix} \pm a' & a \end{psmallmatrix}}"] \& R
    \end{tikzcd}
  \]
  Let \(b = \gcd(a, a')\). Then
  \begin{align*}
    H_{i + j}(C \otimes C') &= R/b = H_i(C) \otimes H_j(C') \\
    H_{i + j + 1}(C \otimes C') &= R/b = \Tor_1(H_i(C), H_j(C'))
  \end{align*}
\end{proof}

\begin{eg}
  Use the implicit index convention,
  \[
    H_*(\R\P^2) \otimes H_*(\R\P^2) =
    \begin{cases}
      \Z & * = 0 \\
      (\Z/2)^2 & * = 1 \\
      \Z/2 & * = 2 \\
      0 & \text{otherwise}
    \end{cases}
  \]
  and
  \[
    \Tor_1(H_*(\R\P^2), H_*(\R\P^2))
    = \Tor_1(H_1(\R\P^2), H_1(\R\P^2))
    = \Tor_1(\Z/2, \Z/2)
    = \Z/2
  \]
  so torsion contributes \(\Z/2\) to degree \(1 + 1 + 1 = 3\) in \(H_*(\R\P^2 \times \R\P^2)\). Compare with result last time.
\end{eg}

\begin{corollary}
  If \(H_*(X)\) is free over \(\Z\) then \(H_*(X \times Y) \cong H_*(X) \otimes H_*(Y)\).
\end{corollary}

\begin{proof}
  We assume \(X\) and \(Y\) are FCCs. Then it follows from \(\Tor_1(M, N) = 0\) for \(M\) free.
\end{proof}

\begin{corollary}
  If \(\F\) is a field then
  \[
    H_*(X \times Y; F) \cong H_*(X; \F) \otimes_\F H_*(Y; \F).
  \]
\end{corollary}

\begin{proof}
  Again we assume \(X\) and \(Y\) are FCCs.
  \begin{align*}
    C_*^\cell(X \times Y; \F)
    &= (C_*^\cell(X) \otimes_\Z C_*^\cell(Y)) \otimes_\Z \F \\
    &= (C_*^\cell(X) \otimes_\Z \F) \otimes_\F (C_*^\cell(X) \otimes_\Z \F) \\
    &= C_*^\cell(X; \F) \otimes_\F C_*^\cell(Y; \F)
  \end{align*}
  and note that modules over a field are free.
\end{proof}

\begin{eg}
  \[
    H_*(\R\P^2 \times \R\P^2; \Z/2)
    \cong H_*(\R\P^2; \Z/2) \otimes_{\Z/2} H_*(\R\P^2; \Z/2)
    =
    \begin{cases}
      \F & * = 0, 4 \\
      \F^2 & * = 1, 3 \\
      \F^3 & * = 2 \\
      0 & \text{otherwise}
    \end{cases}
  \]
\end{eg}

If we only care about homology with coefficients in a field then the only information is the dimensions of the homology groups as vector spaces. We define

\begin{definition}[Poincar polynomial]\index{Poincar polynomial}
  Let \(\F\) be a field. Then the \emph{Poincar polynomial} of \(X\) with respect to \(\F\) is
  \[
    P_\F(X) = \sum_{i \geq 0} \dim H_i(X; \F) t^i \in \Z[[t]].
  \]
\end{definition}

The corollary simply says that \(P_\F(X \times Y) = P_\F(X) P_\F(Y)\).

There is a problem with this approach. Recall that if \(H_*(X)\) is free then we have isomorphisms
\begin{align*}
  H_*(X) \otimes G &\to H_*(X; G) \\
  [x] \otimes g &\mapsto [x \otimes g] \\
  H^*(X; G) &\to \Hom(H_*(X); G) \\
  a &\mapsto \langle a, - \rangle
\end{align*}
which are realised by natural maps (and independent of cell structure). However if we would like a natural map
\[
  H_*(X) \otimes H_*(Y) \to H_*(X \times Y),
\]
it would be really painful to write it down. Instead we use cohomology where is a natural notion of product.

\subsection{Cup product}

Let \(R\) be a commutative ring.

\begin{definition}[cup product]\index{cup product}
  If \(\alpha \in C^k(X; R)\) and \(\beta \in C^\ell(X; R)\), their \emph{cup product} \(\alpha \cp \beta \in C^{k + \ell}(X; R)\) is given by
  \[
    \alpha \cp \beta(\sigma) = \alpha(\sigma \compose F_{0 \cdots k}) \beta(\sigma \compose F_{k \cdots \ell + k})
  \]
  for \(\sigma: \Delta^{k + \ell} \to X\).
\end{definition}

Note that we exploited the ring structure of \(R\).

\begin{lemma}
  \(d^*(\alpha \cp \beta) = d^* \alpha \cp \beta + (-1)^{|\alpha|} \alpha \cp d^*\beta\).
\end{lemma}

\begin{proof}
  If \(\sigma: \Delta^{k + \ell + 1} \to X\) then
  \begin{align*}
    d^*(\alpha \cp \beta)(\sigma)
    &= (\alpha \cp \beta) (d\sigma) \\
    &= \sum_{j = 0}^{k + \ell + 1} (-1)^j (\alpha \cp \beta) (\sigma \compose F_{0 \cdots \hat j \cdots k + \ell + 1}) \\
    &= \sum_{j = 0}^k (-1)^j \alpha(\sigma \compose F_{0 \cdots \hat j \cdots k + 1}) \beta(\sigma \compose F_{k + 1 \cdots k + \ell + 1}) \\
    &\quad+ \sum_{j = k + 1}^{k + \ell + 1} (-1)^j \alpha(\sigma \compose F_{0 \cdots k}) \beta(\sigma \compose F_{k \cdots \hat j \cdots k + \ell + 1}) \\
    &= \sum_{j = 0}^{k + 1} (-1)^j \alpha(\sigma \compose F_{0 \cdots \hat j \cdots k + 1}) \beta(\sigma \compose F_{k + 1 \cdots k + \ell + 1}) \\
    &\quad+ \sum_{j = k}^{k + \ell + 1} (-1)^j \alpha(\sigma \compose F_{0 \cdots k}) \beta(\sigma \compose F_{k \cdots \hat j \cdots k + \ell + 1}) \\
    &= d^* \alpha \cp \beta (\sigma) + (-1)^{|\alpha|} \alpha \cp d^*\beta (\sigma)
  \end{align*}
\end{proof}

Thus if \(d^*\alpha = d^*\beta = 0\) then \(d^*(\alpha \cp \beta) = 0\) so
\begin{align*}
  &\quad [(\alpha + d^* \alpha') \cp (\beta + d^* \beta')] \\
  &= [\alpha \cp \beta + d^*(\alpha \cp \beta') + d^*((-1)^{|\alpha|} \alpha' \cp \beta) + d^*(\alpha' \cp + d^* \beta')] \\
  &= [\alpha \cp \beta]
\end{align*}
so cup products descends to a map
\begin{align*}
  H^k(X; R) \times H^\ell(X; R) &\to H^{k + \ell}(X; R) \\
  ([\alpha], [\beta]) &\mapsto [\alpha \cp \beta]
\end{align*}

\begin{proposition}
  \(\cp\) makes \(H^*(X; R)\) into a ring. If \(f: X \to Y\) then \(f^*: H^*(Y; R) \to H^*(X; R)\) is a ring homomorphism.
\end{proposition}

\begin{proof}
  We need to find the unit with respect to \(\cp\). Define \(\mathbf 1 \in C^0(X; R)\) by \(\mathbf 1(\sigma) = 1 \in R\) for all \(\sigma: \Delta^0 \to X\). Then
  \[
    d^*(\mathbf 1)(\tau) = \mathbf 1(d \tau) = \mathbf (\tau \compose F_1 - \tau \compose F_0) = 1 - 1 = 0
  \]
  for \(\tau: \Delta^1 \to X\). Let \(1 = [\mathbf 1] \in H^0(X; R)\). Then we need to check \(1\) is the unit, associativity of \(\cp\) and distributivity of \(\cp\) over addition. These are all true at the level of cochains.

  If \(f: X \to Y\) then
  \begin{align*}
    f^\#(\alpha \cp \beta) (\sigma)
    &= (\alpha \cp \beta) (f_\# \sigma) \\
    &= (\alpha \cp \beta) (f \compose \sigma) \\
    &= \alpha(f \compose \sigma \compose F_{0 \cdots k}) \beta (f \compose \sigma \compose F_{k \cdots k + \ell}) \\
    &= (f^\#(\alpha) \cp f^\#(\beta)) (\sigma)
  \end{align*}
  so
  \[
    f^*([\alpha] \cp [\beta])
    = [f^\#(\alpha \cp \beta)]
    = [f^\#(\alpha) \cp f^\#(\beta)]
    = f^*([\alpha]) \cp f^*([\beta]).
  \]
\end{proof}

\begin{remark}
  de Rham's theorem\index{de Rham's theorem} says that for a smooth manifold \(M\) the map \(\varphi: H^*(\Omega^*(M), d) \to H^*(M; \R)\) is a ring homomorphism, i.e.\ we have wedge product \(\wedge: \Omega^k(M) \times \Omega^\ell(M) \to \Omega^{k + \ell}(M)\) and
  \[
    \varphi([\omega] \wedge [\eta]) = \varphi([\omega]) \cp \varphi([\eta]).
  \]
\end{remark}

\begin{proposition}
  If \(a, b \in H^*(X)\) then \(a \cp b = (-1)^{|a||b|} b \cp a\). In other words, \(\cp\) is \emph{graded commutative}\index{graded commutative} (or \emph{supercommutative} if you're a physicist).
\end{proposition}

Note this is very false at the cochain level.

\begin{proof}[Sketch proof]
  The map
  \begin{align*}
    \rho: \Delta^k &\to \Delta^k \\
    (v_0,\dots, v_k) &\mapsto (v_k, \dots, v_0)
  \end{align*}
  induces a chain map
  \begin{align*}
    r_\#: C_*(X) &\to C_*(X) \\
    \sigma &\mapsto \varepsilon(|\sigma|) \sigma \compose \rho
  \end{align*}
  where \(\varepsilon(k) = (-1)^{k(k - 1)/2}\), the determinant of the \(k \times k\) matrix with \(1\) on the antidiagonal and \(0\) elsewhere. The map \(r_\#\) ``reverses'' a chain (up to a sign) and \(r_\# \sim \id_{C_*(X)}\) (see Hatcher for formula). Dualising to get \(r^\#: C^*(X) \to C^*(X)\) and \(r^\# \sim \id_{C^*(X)}\). Thus \([r^\# \alpha] = [\alpha]\). Now
  \[
    r^\#(\alpha \cp \beta)
    = \frac{\varepsilon(|\alpha| + |\beta|)}{\varepsilon(|\alpha|) \varepsilon(|\beta|)} r^\#(\beta) \cp r^\#(\alpha)
    = (-1)^{|\alpha||\beta|} r^\#(\beta) \cp r^\#(\alpha)
  \]
  so
  \begin{align*}
    [\alpha] \cp [\beta]
    &= [\alpha \cp \beta] \\
    &= [r^\#(\alpha \cp \beta)] \\
    &= (-1)^{|\alpha||\beta|} [r^\#(\beta) \cp r^\#(\alpha)] \\
    &= (-1)^{|\alpha||\beta|} [r^\#(\beta)] \cp [r^\#(\alpha)] \\
    &= (-1)^{|\alpha||\beta|} [\beta] \cp [\alpha]
  \end{align*}
\end{proof}

To avoid having to keep track of the ring \(R\) (and for saving paper when you print these notes) for the rest of the section we take \(R = \Z\), but everything works over a ring \(R\).

There is also a cup product for pairs. If \(\alpha \in C^*(X, A)\) then \(\alpha(\gamma) = 0\) if \(\im \gamma \subseteq A\), so if \(\beta \in C^*(X)\) and \(\im \sigma \subseteq A\) then
\[
  (\alpha \cp \beta)(\sigma) = \alpha(\sigma \compose F_{0 \dots k}) \beta(\sigma \compose F_{k \cdots k + \ell}) = 0
\]
since \(\im \sigma \compose F_{0 \cdots k} \subseteq A\). In other words we have a map \(\cp: C^*(X, A) \times C^*(X) \to C^*(X, A)\) and this descends to a map
\begin{align*}
  \cp: H^k(X, A) \times H^\ell(X) &\to H^{k + \ell}(X, A) \\
  (a, b) &\mapsto a \cp \beta
\end{align*}

\begin{lemma}
  If \(\beta \in H^*(X)\) then the square
  \[
    \begin{tikzcd}
      H^*(X, A) \ar[r] \ar[d, "\cp \beta"] & H^*(X) \ar[d, "\cp \beta"] \\
      H^*(X, A) \ar[r] & H^*(X)
    \end{tikzcd}
  \]
  commutes.
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item If \(X\) is path-connected then \(H^0(X) \cong \Z = \langle 1\rangle\).
    \begin{proof}
      \(H_0(X) = \Z\) so \(H^0(X) = \Z\) by universal coefficient. If \(p \in X\) then \(\langle 1, [\sigma_p] \rangle = 1\) so \(1\) generates \(H^0(X)\).
    \end{proof}
  \item \(H^*(X \amalg Y) \cong H^*(X) \times H^*(Y)\) as rings.
    \begin{proof}
      There is an isomorphism
      \begin{align*}
        C^*(X \amalg Y) &\to C^*(X) \times C^*(Y) \cong C^*(X) \oplus C^*(Y) \\
        \alpha &\mapsto (\iota_X^\# \alpha, \iota_Y^\# \alpha) \\
        \gamma &\mapsfrom (\alpha, \beta)
      \end{align*}
      where \(\gamma(\sigma) = \alpha(\sigma)\) if \(\im \sigma \subseteq X\) and \(\gamma(\sigma) = \beta(\sigma)\) if \(\im \sigma \subseteq Y\). It follows that \(\iota_X^* \times \iota_Y^*: H^*(X \amalg Y) \to H^*(X) \times H^*(Y)\) is an isomorphism. It is a ring homomorphism as \(\iota_X^*, \iota_Y^*\) are.
    \end{proof}
  \item \(H^*(S^n) = \Z[a]/(a^2)\) if \(n > 0\).
    \begin{proof}
      \(H^*(S^n) = \Z\) if \(* = 0\) or \(n\) and \(0\) otherwise. Let \(\langle a \rangle = H^n(S^n)\). Then as groups \(H^*(S^n) = \langle1, a \rangle\) and \(1 \cp 1 = 1, 1 \cp a = a \cp 1 = a, a \cp a = 0\) since \(H^{2n}(S^n) = 0\).
    \end{proof}
  \end{enumerate}
\end{eg}

\paragraph{Exterior product}

Recall that we promised at the end of last section that there is a natural way to define a bilinear map from product cohomology groups to the cohomology of product space. Now we define the map. 

\begin{definition}[exterior product]\index{exterior product}
  Let \(\pi_1: X \times Y \to X, \pi_2: X \times Y \to Y\) be the projections. If \(a \in H^k(X), b \in H^\ell(Y)\) then their \emph{exterior product} is
  \[
    a \times b = \pi_1^*(a) \cp \pi_2^*(b) \in H^{k + \ell}(X \times Y).
  \]
\end{definition}

\begin{theorem}
  If \(H^*(Y)\) is free over \(R = \Z\) then the map
  \begin{align*}
    \Phi: H^*(X) \otimes H^*(Y) &\to H^*(X \times Y) \\
    a \otimes b &\mapsto a \times b
  \end{align*}
  is an isomorphism.
\end{theorem}

\begin{proof}
  We prove the theorem under the assumption that \(X\) and \(Y\) are FCCs. The proof is divided into two parts. We first show that the two gadgets we want to show isomorphic are two functors. Then we show \(\Phi\) is a natural isomorphism between them.

  For a fixed \(Y\), observe that apart from \(H^*(-)\), there are two more contravariant functors \(\overline h^*, \underline h^*\) from the category of pairs of spaces to the category of graded \(\Z\)-modules, sending objects to
  \begin{align*}
    \overline h^*(X, A) &= H^*(X \times Y, A \times Y) \\
    \underline h_*(X, A) &= H^*(X, A) \otimes H^*(Y)
  \end{align*}
  and sending a map \(f: (X_1, A_1) \to (X_2, A_2)\) to
  \begin{align*}
    \overline f^* &= (f \times \id_Y)^* \\
    \underline f^* &= f^* \otimes \id_{H^*(Y)}
  \end{align*}
  We are going to show \(H^*, \overline h^*\) and \(\underline h_*\) are all \emph{generalised cohomology theories}\index{generalised cohomology theory}, which is a functor \(H^*(-)\) satisfying the following axioms:
  \begin{enumerate}
  \item functoriality: \(H^*(-)\) is contravariant.
  \item homotopy invariance: if \(f \sim g\) then \(f^* = g^*\).
  \item naturality: map of pairs induces a map of LES's of pairs.
  \item excision: if \(\overline B \subseteq \Int A\) then \(H^*(X, A) \cong H^*(X - B, A - B)\).
  \end{enumerate}

  homotopy invariant: for \(H^*\) this follows from that of homology as \(f \sim g\) implies \(f_\# \sim g_\#\) so \(f^\# \sim g^\#\) so \(f^* = g^*\). For \(\overline h^*\) this follows from \(H^*\) as \((f \times \id_Y) \sim (g \times \id_Y)\). \(\underline h^*\) is obvious.

  naturality: we have done this for \(H^*\). Then \(\overline h^*\) follows. For \(\underline h^*\) this follows from the flatness of \(H^*(Y)\). Note that the assumption of freeness of \(H^*(Y)\) is crucial.

  excision: for \(H^*\) we can prove this using subdivision, or use the result that if \(f_*: H_*(X, A) \to H_*(Y, B)\) is an isomorphism then so is \(f^*: H^*(Y, B) \to H^*(X, A)\), which is left as an exercise. Then \(\overline h^*\) follows. \(\underline h^*\) is obvious. As a side note, 1, 2, 3, 4 together imply collapsing a pair, and the proof is exactly the same as in homology.

  Now the key ingredient is to note that
  \begin{lemma}
    \(\Phi\) is a natural transformation, i.e.\ if \(f: (X, A) \to (X', A')\) then we have commutative diagrams
    \[
      \begin{tikzcd}
        \underline h^*(X', A') \ar[r, "\underline f^*"] \ar[d, "\Phi'"] & \underline h^*(X, A) \ar[d, "\Phi"] \\
        \overline h^*(X', A') \ar[r, "\overline f^*"] & \overline h^*(X, A)
      \end{tikzcd}
      \quad
      \begin{tikzcd}
        \underline h^*(X, A) \ar[r, "\underline \delta^*"] \ar[d, "\Phi"] & \underline h^{* + 1}(A) \ar[d, "\Phi"] \\
        \overline h^*(X, A) \ar[r, "\overline \delta^*"] & \overline h^{* + 1}(A)
      \end{tikzcd}
    \]
  \end{lemma}

  \begin{proof}
    We prove the first square and the second is left as an exercise on example sheet 3:
    \begin{align*}
      \overline f^*(\Phi')(a \otimes b)
      &= \overline f(\pi_1'^*(a) \cp \pi_2'^*(b)) \\
      &= F^* \pi_1'^*(a) \cp F^* \pi_2'^*(b) \\
      &= (\pi_1' \compose F)^*(a) \cp (\pi_2' \compose F)^*(b) \\
      &= \pi_1^* f^*(a) \cp \pi_2^* b \\
      &= f^*(a) \times b \\
      &= \Phi(\underline f^*(a \otimes b))
    \end{align*}
    where \(F = f \times \id_Y\).
  \end{proof}

  We now show \(\Phi\) is a natural isomorphism by showing it is an isomorphism pointwise. Let \(P(X, A)\) be the statement that
  \begin{align*}
    \Phi: \underline h_*(X, A) &\to \overline h^*(X, A) \\
    a \otimes b &\mapsto a \times b
  \end{align*}
  is an isomorphism.

  \begin{enumerate}
  \item \(P(D^0)\) and \(P(S^0)\) hold: for \(P(D^0)\), note
    \begin{align*}
      \underline h^*(D^0) &= H^*(D^0) \otimes H^*(Y) = \Z \otimes H^*(Y) = H^*(Y) \\
      \overline h^*(D^0) &= H^*(D^0 \times Y) = H^*(D^0)
    \end{align*}
    so composed with \(\Phi\), we get a map \(H^*(Y) \to H^*(Y)\)
    \[
      b \mapsto 1 \otimes 1 \mapsto \pi_1^*(1) \cp \pi_2^*(b) = 1 \cp b = b.
    \]
    which is an isomorphism so \(\Phi\) is an isomorphism.
    
    For \(S^0\) we have
    \begin{align*}
      \underline h^*(S^0) &= \Z^2 \otimes H^*(Y) \\
      \overline h^*(S^0) &= H^*(Y \amalg Y) = H^*(Y) \oplus H^*(Y)
    \end{align*}
    so we similarly get
    \[
      (m, n) \otimes b \mapsto (ma, na).
    \]
  \item If \(X \sim X'\) then \(P(X)\) if and only if \(P(X')\). As a corollary \(P(D^n)\) holds.

    \begin{proof}
      Let \(f: X \to X'\) be the map inducing homotopy equivalence. Then by the lemma there is a commutative square
      \[
        \begin{tikzcd}
          \underline h^*(X') \ar[r, "\underline f^*"] \ar[d, "\Phi'"] & \underline h^*(X) \ar[d, "\Phi"] \\
          \overline h^*(X') \ar[r, "\overline f^*"] & \overline h^*(X)
        \end{tikzcd}
      \]
      and \(\overline f^*, \underline f^*\) are isomorphisms. The result thus follows.
    \end{proof}
  \item If two of \(P(A), P(X)\) and \(P(X, A)\) hold, so does the third. This follows from naturality and five lemma.
  \item If \((X, A)\) is a good pair then \(P(X, A)\) if and only if \(P(X/A)\).

    \begin{proof}
      \(P(X, A)\) holds if and only if \(P(X/A, A/A)\) holds by collapasing a pair and the lemma. As \(A/A \cong D^0\), \(P(A/A)\) holds. Therefore \(P(X/A, A/A)\) holds if and only if \(P(X/A)\) holds by 3.
    \end{proof}
  \item \(P(S^n)\) and \(P(D^n, S^{n - 1})\) hold.

    \begin{proof}
      Induction on \(n\). Base case is 1. Suppose this holds for \(n\). Then by 4 \(P(S^n) = P(D^n/S^{n - 1})\) also holds. Then \(P(D^{n + 1}, S^n)\) holds by 3.
    \end{proof}

  \item If \(P(X)\) then \(P(X \cup_f D^k)\).

    \begin{proof}
      Consider \((X \cup_f D^k, X)\). This is a good pair with \(X \cup_f D^k/X \cong S^k\). \(P(S^k)\) holds by 5 and \(P(X)\) hold by hypothesis. Thus \(P(X \cup_f D^k, X)\) by 4 so \(P(X \cup_f D^k)\) holds by 3.
    \end{proof}
  \item \(P(X)\) holds if \(X\) is an FCC.

    \begin{proof}
      Induction on the number of cells in \(X\). Write \(X = X' \cup_f D^k\) where \(X'\) has one fewer cell than \(X\). \(P(X')\) holds by induction so \(P(X)\) holds by \(6\).
    \end{proof}
  \end{enumerate}
\end{proof}

\begin{theorem}
  If \(X\) is homotopy equivalent to a FCC and \(H^*(Y)\) is free over \(\Z\) then \(\Phi: H^*(X) \otimes H^*(Y) \to H^*(X \times Y)\) is an isomorphism.
\end{theorem}

\begin{proof}
  Follows from claim 2 and 7 in the proof above.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item For purpose of bookkeeping,
    \begin{align*}
      (a_1 \times b_1) \cp (a_2 \times b_2)
      &= \pi_1^*(a_1) \cp \pi_2^*(b_1) \cp \pi_1^*(a_2) \cp \pi_2^*(b_2) \\
      &= (-1)^{|b_1||a_2|} \pi_1^*(a_1) \cp \pi_1^*(a_2) \cp \pi_2^*(b_1) \cp \pi_2^*(b_2) \\
      &= (-1)^{|b_1||a_2|} \pi_1^*(a_1 \cp a_2) \cp \pi_2^*(b_1 \cp b_2) \\
      &= (-1)^{|b_1||a_2|} (a_1 \cp a_2) \times (b_1 \cp b_2)
    \end{align*}
  \item Cohomology ring of \(T^2\). Recall that \(H^*(S^1) = \Z[c]/(c^2)\) where \(|c| = 1\). By the theorem \(H^*(S^1 \times S^1) = \langle 1 \times 1, c \times 1, 1 \times c, c \times c \rangle\) as a group. Let \(a = c \times 1, b = 1 \times c\). Then
    \begin{align*}
      a \cp b &= (c \times 1) \cp (1 \times c) = (-1)^{0 \cdot 0} c \times c = c \times c \\
      b \cp a &= (-1)^{1 \cdot 1} a \cp b = - a \cp b \\
      a \cp a &= (c \times 1) \cp (c \times 1) = - (c \cp c) \times (1 \cp 1) = 0
    \end{align*}
    and similar for \(b\) so as \(H^*(S^1 \times S^1)\) is generated as a (noncommutative unital) ring by \(a, b\) with relations
    \[
      a \cp a = b \cp b = 0, \quad a \cp b = - b \cp a
    \]
    i.e.
    \[
      H^*(T^2) = \langle a, b | ab = -ba, a^2 = b^2 = 0 \rangle = \Lambda^*(a, b),
    \]
    the \emph{exterior algebra}\index{exterior algebra} in two variables.
  \item Similarly
    \[
      H^*(T^n) = \langle a_1, \dots, a_n | a_i a_j = -a_ja_i, a_i^2 = 0 \rangle = \Lambda^*(a_1, \dots, a_n).
    \]
    Here \(a_i = 1 \times \cdots \times c \times \cdots \times 1\) and \(|a_i| = 1\).
  \item Cohomology ring of \(S^2 \times S^2\). Have \(H^*(S^2) = \Z[c']/(c'^2)\) where \(|c'| = 2\). Then \(H^*(S^2 \times S^2) = \langle 1 \times 1, c' \times 1, 1 \times c', c' \times c' \rangle\). Let \(A = c' \times 1, B = 1 \times c'\). Still have \(A^2 = B^2 = 0\) but \(AB = (-1)^{2 \cdot 2} BA = BA\) so
    \[
      H^*(S^2 \times S^2) \cong \Z[A, B]/(A^2, B^2).
    \]
  \item Wedge product: it follows from LES of the pair \((X \amalg Y, \{x, y\})\) that for \(k > 0\),
    \[
      H^k(X \vee Y) \cong H^k(X \amalg Y) = \{(a, b): a \in H^k(X), b \in H^k(Y)\}.
    \]
    If \(X, Y\) are path connected then \(H^0(X \vee Y) \cong \Z\). \(H^*(X \vee Y)\) is a subring of \(H^*(X \amalg Y) = H^*(X) \times H^*(Y)\).
  \item \(H^k(S^2_a \vee S^2_b \vee S^4) = H^k(S^2_a) \times H^k(S^2_b) \times H^k(S^4)\) so for example \(H^2(S^2 \vee S^2 \vee S^4) = \langle \alpha = (c, 0, 0), \beta = (0, c, 0) \rangle\) and
    \[
      \alpha^2 = \beta^2 = 0, \quad \alpha\beta = (c, 0, 0) \cp (0, c, 0) = 0
    \]
    As a result, \(H^*(S^2 \vee S^2 \vee S^4) \cong H^*(S^2 \times S^2)\) as groups but not as rings. Thus cohomology ring is strictly stronger than groups: the two spaces are not homotopy equivalent although they have isomorphic (co)homology groups.
  \item Cohomology ring of \(\Sigma_2\). Let \(A\) be a loop (picture) so \(\pi: \Sigma_2 \to \Sigma_2/A \cong T_1^2 \vee T_2^2\). On homology groups we have
    \begin{align*}
      \pi_*: H_2(\Sigma_2) &\to H_2(T_1^2 \vee T_2^2) = H_2(T_1^2) \oplus H_2(T_2^2) \\
      1 &\mapsto (1, 1) \\
      \pi_*: H_1(\Sigma_2) &\cong H_1(T_1^2) \oplus H_1(T_2^2)
    \end{align*}
    from example sheet 1. \(H_*(\Sigma_2)\) and \(H_*(T_1^2 \vee T_1^2)\) are free so by universal coefficient \(\pi^*\) is dual to \(\pi_*\) so
    \begin{align*}
      \pi^*: H^2(T_1^2 \vee T_2^2) = H^2(T_1^2) \oplus H^2(T_2^2) &\to H^2(\Sigma_2) \\
      \langle c_1\rangle \oplus 0 &\mapsto \langle \overline c \rangle \\
      0 \oplus \langle c_2 \rangle &\mapsto \langle \overline c \rangle \\
      \pi^*: H^1(T_1^2 \vee T_2^2) = H^1(T_1^2) \oplus H^1(T_2^2) &\to H^1(\Sigma_2) \\
      \langle a_1, b_1 \rangle \oplus \langle a_2, b_2 \rangle &\mapsto \langle \overline a_1, \overline b_1, \overline a_2, \overline b_2 \rangle
    \end{align*}
    so \(\pi^*(c_1) = \pi^*(c_2) = \overline c\). In \(H^*(T_1^2 \vee T_2^2)\),
    \[
      a_i \cp b_i = \delta_{ij} c_i, a_i \cp a_j = 0, b_i \cp b_j = 0
    \]
    so
    \begin{align*}
      \overline a_i \cp \overline b_j &= \pi^*(a_i) \cp \pi^*(b_j) = \pi^*(a_i \cp b_j) = \pi^*(\delta_{ij} c_i) = \delta_{ij} \overline c \\
      \overline a_i \cp \overline a_j &= \overline b_i \cp \overline b_j = 0
    \end{align*}

    Similarly
    \[
      H^1(\Sigma_g) = \langle \overline a_i, \overline b_i: 1 \leq i \leq g\rangle, H^2(\Sigma_g) = \langle \overline c \rangle
    \]
    with
    \[
      \overline a_i \cp \overline b_j = \delta_{ij} \overline c, \quad
      \overline a_i \cp \overline a_j = \overline b_i \cp \overline b_j = 0.
    \]
  \end{enumerate}
\end{eg}

\section{Vector bundles \& Manifolds}

\subsection{Vector bundles}

\begin{definition}[vector bundle]\index{vector bundle}
  An \emph{\(n\)-dimensional real vector bundle} over \(B\) is a map \(\pi: E \to B\) such that
  \begin{enumerate}
  \item \(\pi^{-1}(b)\) is an \(n\)-dimensional real vector space for all \(b \in B\),
  \item there is an open cover \(\{U_\alpha\}_{\alpha \in A}\) of \(B\) and homeomorphisms \(f_\alpha: \pi^{-1}(U_\alpha) \to U_\alpha \times \R^n\) such that the diagram
    \[
      \begin{tikzcd}
        \pi^{-1}(U_\alpha) \ar[d, "\pi"] \ar[r, "f_\alpha"] & U_\alpha \times \R^n \ar[dl, "\pi_1"] \\
        U_\alpha
      \end{tikzcd}
    \]
    commutes, and \(\pi_2 \compose f_\alpha|_{\pi^{-1}(b)}: \pi^{-1}(b) \to \R^n\) is a linear isomorphism for all \(b \in U_\alpha\).
  \end{enumerate}

  \(B\) is the \emph{base space}, \(E\) is the \emph{total space}, \(\pi^{-1}(b)\) are the \emph{fibres} of \(\pi: E \to B\) and \(f_\alpha\)'s are the \emph{local trivialisations}.
\end{definition}

There is an analogous definition of complex vector bundles by replacing \(\R\) with \(\C\).

\begin{definition}[morphism of vector bundles]\index{vector bundle!morphism}
  A \emph{morphism} between vector bundles \(\pi: E \to B, \pi': E' \to B'\) is a commutative square
  \[
    \begin{tikzcd}
      E \ar[r, "f_E"] \ar[d, "\pi"] & E' \ar[d, "\pi'"] \\
      B \ar[r, "f_B"] & B'
    \end{tikzcd}
  \]
  such that for every \(b \in B\), \(f_E|_{\pi^{-1}(b)}: \pi^{-1}(b) \to (\pi')^{-1}(f(b))\) is a linear map.
\end{definition}

Vector bundles together with morphisms between them form a category.

\begin{definition}[subbundle]\index{vector bundle!subbundle}
  \(E\) is a \emph{subbundle} of \(E'\) if there is an injective morphism
  \[
    \begin{tikzcd}
      E \ar[r, "f_E", hook] \ar[d] & E' \ar[d] \\
      B \ar[r, "\id_B"] & B
    \end{tikzcd}
  \]
\end{definition}

\paragraph{Transition functions}

Suppose \(\pi: E \to B\) is as above. Consider
\begin{align*}
  f_\alpha \compose f_\beta^{-1}: (U_\alpha \cap U_\beta) \times \R^n &\to (U_\alpha \cap U_\beta) \times \R^n \\
  (b, v) &\mapsto (b, f_{\alpha\beta}(b, v))
\end{align*}
where \(f_{\alpha\beta}(b, v)\) is a linear function of \(v\). In other words \(f_{\alpha\beta}(v, b) = g_{\alpha\beta}(b) v\) where \(g_{\alpha\beta}(v) \in \GL_n(\R)\). The maps \(g_{\alpha\beta}: U_\alpha \cap U_\beta \to \GL_n(\R)\) are called \emph{transition functions}\index{transition function}.

\begin{lemma}
  The transition functions \(g_{\alpha\beta}\) satisfy
  \begin{align*}
    g_{\alpha\beta}(b) &= \id \\
    g_{\beta\alpha}(b) &= g_{\alpha\beta}(b)^{-1} \\
    g_{\alpha\beta}(b) g_{\beta\gamma}(b) &= g_{\alpha\gamma}(b)
  \end{align*}
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

Conversely

\begin{proposition}
  Suppose \(\{U_\alpha\}_{\alpha \in A}\) is an open cover of \(B\) and \(g_{\alpha\beta}: U_\alpha \cap U_\beta \to \GL_n(\R)\) satisfies the relations in the statement of the preceding lemma, then there exists a vector bundle \(\pi: E \to B\) with transition functions \(g_{\alpha\beta}\) unique up to isomorphism.
\end{proposition}

\begin{proof}[Sketch proof]
  Let \(E = \coprod_{\alpha \in A} (U_\alpha \times \R^n)/\sim\) where \((b, v) \sim (b, g_{\alpha\beta}(b) v)\) for \(b \in U_\alpha \cap U_\beta\). Then the three relations imply that \(\sim\) is an equivalence relation.
\end{proof}

\begin{definition}[section]\index{section}
  A \emph{section} of \(\pi: E \to B\) is a map \(s: B \to E\) with \(\pi \compose s = \id_B\).
\end{definition}

\begin{eg}
  For every bundle \(\pi: E \to B\) we have the zero section \(s: B \to E, b \mapsto 0 \in \pi^{-1}(b)\). It is an exercise to check this is continuous.
\end{eg}

The simplest bundle is the \(n\)-dimensional \emph{trivial bundle}\index{vector bundle!trivial} over \(B\) given by \(\pi_1: B \times \R^n \to B\).

\begin{proposition}
  \(\pi: E \to B\) is isomorphic to \(B \times \R^n\) if and only if there are sections \(s_1, \dots, s_n: B \to E\) such that \(\{s_1(b), \dots, s_n(b)\}\) is a basis of \(\pi^{-1}(b)\) for all \(b \in B\).
\end{proposition}

\begin{proof}
  If \(s_1, \dots, s_n\) are such sections then define
  \begin{align*}
    f: B \times \R^n &\to E \\
    (b, v) &\mapsto \sum_{i = 1}^n v_i s_i(b)
  \end{align*}
  Check this is an isomorphism. The converse is trivial.
\end{proof}

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Mbius bundle\index{Mbius bundle}: let \(M = [0, 1] \times \R /(0, x) \sim (1, -x)\) and \(M \to [0, 1]/0 \sim 1 = S^1\). This is a \emph{line bundle}\index{line bundle} (i.e.\ a \(1\)-dimensional vector bundle) over \(S^1\). If \(s: S^1 \to M\) is a section, say \(s(t) = (t, f(t)) \in [0, 1] \times \R\), then \(f(t)\) satisfies \(f(0) = -f(1)\). We know from IA Analysis I \(f(t_0) = 0\) for some \(t_0 \in [0, 1]\) so \(\{s(t_0)\}\) is not a basis of \(\pi^{-1}(t_0)\) so \(M\) is not trivial.
  \item Tautological bundle\index{tautological bundle}: the \emph{tautological bundle} of the real projective space is defined to be
    \[
      \tau_{\R\P^n} = \{([x], v) \in \R\P^n \times \R^{n + 1}: v \in \R x\}
    \]
    with projection onto first coordinate \(\tau_{\R\P^n} \to \R\P^n\). Have local trivialisations \(U_i = \{x_i \neq 0\}\) and
    \begin{align*}
      f_i: \pi^{-1}(U_i) &\to U_i \times \R \\
      ([x], v) &\mapsto ([x], v_i)
    \end{align*}
    and the transition functions are
    \[
      g_{ij}([x]) = \frac{x_j}{x_i} \in \R^* = \GL_1(\R).
    \]
  \item Similarly we can define the tautological bundle of the complex projective space, which is a complex line bundle, to be
    \[
      \tau_{\C\P^n} = \{([z], v) \in \C\P^n \times \C^{n + 1}: v \in \C z\}.
    \]
    In addition to the vector bundle, we have the map \(\pi_2: \tau_{\C\P^n} \to \C^{n + 1}\) which is \emph{blowup} in algebraic geometry. If \(v \neq 0\) then \(\pi_2^{-1}(v) = ([v], v)\). If \(v = 0\) then \(\pi_2^{-1}(v) = \{([z], 0)\}\) is the image of the zero section.
  \item The \emph{tangent bundle}\index{tangent bundle} of \(S^n\)
    \[
      TS^n = \{(x, v) \in S^n \times \R^{n + 1}: v \cdot x = 0\}
    \]
    Let \(U_i = \{x \in S^n: x_i \neq 0\}\) and we have local trivialisations
    \begin{align*}
      f_i: \pi^{-1}(U_i) &\to \R^n \\
      (x, v) &\mapsto \pi_{\hat i}(v)
    \end{align*}
    For a general vector bundle \(E \to B\), a section \(s: B \to E\) is \emph{nonvanishing}\index{section!nonvanishing} if \(s(b) \neq 0\) for all \(b \in B\). From example sheet 1 \(TS^n\) has a nonvanishing section if and only if \(n\) is odd (in fact \(TS^n\) is trivial if and only if \(n = 1, 3, 7\)).
  \item Product of bundles\index{vector bundle!product}: if \(\pi: E \to B, \pi': E' \to B'\) are vector bundles then so is \(\pi \times \pi': E \times E': B \times E'\) with fibres \((\pi \times \pi')^{-1}(b, b') = \pi^{-1}(b) \times \pi'^{-1}(b')\).
  \item Pullback of bundle\index{vector bundle!pullback}: if \(\pi: E \to B\) is a vector bundle and \(f: X \to B\) then
    \[
      f^*E = \{(x, v) \in X \times E: f(x) = \pi(v)\}
    \]
    is a vecotr bundle over \(X\) with \(\pi': f^*(E) \to X, (x, v) \mapsto x\). The fibre is \((\pi')^{-1}(x) \cong \pi^{-1}(f(x))\). If \(E\) is trivial on \(U_\alpha\) with transition functions \(g_{\alpha\beta}: U_\alpha \cap U_\beta \to \GL_n(\R)\) then \(f^*E\) is trivial on \(f^{-1}(U_\alpha)\) with transition functions \(g_{\alpha\beta} \compose f\).
  \item Whitney sum\index{Whitney sum}\index{vector bundle!Whitney sum}: If \(\pi: E \to B, \pi': E' \to B\) are vector bundles over \(B\) then define
    \[
      E \oplus E' = \Delta^*(E \times E')
    \]
    where \(\Delta: B \to B \times B\) is the diagonal map. If we denote the vector bundle by \(\pi_\oplus: E \oplus E' \to B\) then \(\pi_\oplus^{-1}(b) \cong \pi^{-1}(b) \times (\pi')^{-1}(b) \cong \pi^{-1}(b) \oplus (\pi')^{-1}(b)\).
  \end{enumerate}
\end{eg}

\paragraph{Partition of unit}

\begin{definition}[support]\index{support}
  If \(\varphi: B \to \R\), we define the \emph{support} of \(\varphi\) to be
  \[
    \supp \varphi = \overline{\{b \in B: \varphi(b) \neq 0\}}.
  \]
\end{definition}

\begin{definition}[partition of unity]\index{partition of unity}
  If \(\mathcal U = \{U_\alpha: \alpha \in A\}\) is an open cover of \(B\), a \emph{partition of unity subordinate to \(\mathcal U\)} is a collection of functions \(\{\varphi_i\}\) such that
  \begin{enumerate}
  \item \(\varphi_i: B \to [0, 1]\),
  \item \(\supp \varphi_i \subseteq U_{\alpha_i}\) for some \(\alpha_i \in A\),
  \item for any \(b \in B\), \(\varphi_i(b) = 0\) for all but finitely many \(i\),
  \item \(\sum_i \varphi_i(b) = 1\). This makes sense as it is locally a finite sum.
  \end{enumerate}
\end{definition}

We say \(B\) \emph{admits a partition of unity} if whenever \(\mathcal U\) is an open cover of \(B\) then there is a partition of unity subordinate to \(\mathcal U\). It is a fact that compact Hausdorff spaces, metrisable spaces and manifolds all admit partition of unity. In general \(B\) admits a partition of unity if and only if \(B\) is paracompact Hausdorff.

The reason we care so much about vector bundles in algebraic topology is

\begin{theorem}
  \label{thm:pullback by homotopic maps are isomorphic}
  Suppose \(\pi: E \to B'\) is a vector bundle, \(f_0, f_1: B \to B'\) with \(f_0 \sim f_1\) and \(B\) admits partition of unity then \(f_0^*E \cong f_1^*E\).
\end{theorem}

\begin{notation}
  If \(B' \subseteq B\) and \(i: B' \embed B\) is the inclusion then let \(E_{B'} = i^*E\) be the restriction of \(E\) to \(B'\).
\end{notation}

Now suppose \(\pi: E \to B \times [0, 1]\) is a vector bundle.

\begin{lemma}
  If \(E|_{B \times [0, \frac{1}{2}]}\) and \(E|_{B \times [\frac{1}{2}, 1]}\) are both trivial then so is \(E\).
\end{lemma}

\begin{proof}
  Exercise.
\end{proof}

\begin{lemma}
  Any \(b \in B\) has an open neighbourhood \(U_b \subseteq B\) such that \(E|_{U_b \times [0, 1]}\) is trivial.
\end{lemma}

\begin{proof}
  \(E\) is locally trivial so given \(b \in B, s \in [0, 1]\), can find \(U_{b, s} \subseteq U\) an open neighbourhood of \(b\) and \(I_s \subseteq [0, 1]\) an open neighbourhood of \(s\) such that \(E|_{U_{b, s} \times I_s}\) is trivial. Now \([0, 1]\) is compact so can find \(0 = t_0 < s_1 < t_1 < s_1 < \cdots < t_n = 1\) such that \(E|_{U_{b, s_i} \times [t_{i - 1}, t_i]}\) is trivial. Now let \(U_b = \bigcap_{i = 1}^n U_{b, s_i}\) and apply the previous lemma.
\end{proof}

\begin{proposition}
  If \(B\) admits a partition of unity then \(E|_{B\times 0} \cong E|_{B \times 1}\).
\end{proposition}

\begin{proof}
  Pick \(U_b\) as in the proof of the lemma. Then \(\mathcal U = \{U_b: b \in B\}\) is an open cover of \(B\). Let \(\{\varphi_i\}\) be a partition of unity subordinate to \(U\) so \(\supp \varphi_i \subseteq U_{b_i}\) for some \(b_i \in B\). Let \(\psi_n = \sum_{i = 1}^n \varphi_i\) and \(p_n: B \to B \times I, b \mapsto (b, \psi_n(b))\). Let \(E_n = p_n^*E\). Let \(f_i: \pi^{-1}(U_{b_i} \times [0, 1]) \to U_{b_i} \times [0, 1] \times \R^n\) be a local trivialisation. There is an isomorphism
  \begin{align*}
    \beta_n: E_{n - 1} &\to E_n \\
    (b, v) &\mapsto
             \begin{cases}
               (b, v) & b \notin U_{b_n} \\
               (b, f_n^{-1}(b, \psi_n(b), v)) & b \in U_{b_n}
             \end{cases}
  \end{align*}
  Now if \(\beta = \lim_{n \to \infty} \beta_n \compose \cdots \compose \beta_1\) then \(\beta: E|_{B \times 0} \to E|_{B \times 1}\) is an isomorphism.
\end{proof}

\begin{proof}[Proof of \Cref{thm:pullback by homotopic maps are isomorphic}]
  Let \(F: B \times [0, 1] \to B'\) be the homotopy. Then
  \[
    f_0^*(E) \cong F^*(E)|_{B \times 0} \cong F^*(E)|_{B \times 1} \cong f_1^*(E).
  \]
\end{proof}

\begin{corollary}
  If \(\pi: E \to B\) is a vector bundle and \(B\) is contractible and admits a partition of unity then \(E\) is trivial.
\end{corollary}

\begin{proof}
  \(\id_B \sim c_{b_0}\) since \(B\) is contractible, so
  \[
    E \cong \id_B^*(E) \cong c_{b_0}^*(E) \cong B \times \pi^{-1}(b_0)
  \]
  is trivial.
\end{proof}

\subsection{The Thom isomorphism}

Let \(\pi: E \to B\) be an \(n\)-dimensional vector bundle.

\begin{notation}
  If \(b \in B\), \(E_b = \pi^{-1}(b)\) is the fibre at \(b\) and \(i_b: E_b \embed E\) is the inclusion. Let \(s_0: B \to E\) be the \(0\)-section, \(E^\# = E - \im s_0, E_b^\# = E_b - 0 \cong \R^n - 0\).
\end{notation}

We know that
\[
  H_*(E_b, E_b^\#) = H_*(\R^n, \R^n - 0) =
  \begin{cases}
    \Z & * = n \\
    0 & \text{otherwise}
  \end{cases}
\]
which is in particular free. So by universal coefficient
\[
  H^*(E_b, E_b^\#; R) =
  \begin{cases}
    R & * = n \\
    0 & \text{otherwise}
  \end{cases}
\]
From now on we assume \(R\)-coefficient.

\begin{definition}[Thom class]\index{Thom class}
  \(U \in H^n(E, E^\#; R)\) is an \emph{\(R\)-Thom class} (or \(R\)-orientation) for \(E\) if \(i_b^*(U)\) generates \(H^n(E_b, E_b^\#) \cong R\) for all \(b \in B\).
\end{definition}

\begin{eg}
  Let \(E\) be the trivial bundle. Then
  \[
    H^*(E, E^\#) \cong H^*(B \times \R^n, B \times (\R^n - 0)) \cong H^*(B) \otimes H^*(\R^n, \R^n - 0)
  \]
  since \(H^*(\R^n, \R^n - 0)\) is free. So
  \begin{align*}
    H^k(B) &\to H^{n + k}(E, E^\#) \\
    a &\mapsto a \times c
  \end{align*}
  is an isomorphism where \(\langle c \rangle = H^n(\R^n, \R^n - 0)\). Thus
  \[
    H^n(E, E^\#) \cong H^0(B) \cong \prod_{B_i \in \pi_0(B)} H^0(B_i) \cong \prod_{B_i \in \pi_0(B)} R
  \]
  so we have an isomorphism
  \begin{align*}
    \prod_{B_i \in \pi_0(B)} R &\to \prod_{B_i \in \pi_0(B)} H^n(E|_{B_i}, E^\#|_{B_i}) \\
    r &\mapsto (r_ic)
  \end{align*}
  so \(r \times c\) is a Thom class if and only if \(r_i\) generates \(R = H^0(B_i)\) for all \(i\). For \(R = \Z/2\) there is a unique Thom class while if \(R = \Z\) there are \(2^{|\pi_0(b)|}\) Thom classes.
\end{eg}

If \(f: B' \to B\) there is a morphism
\[
  \begin{tikzcd}
    f^*(E) \ar[r, "f_E"] \ar[d] & E \ar[d] \\
    B' \ar[r, "f"] & B
  \end{tikzcd}
\]

\begin{lemma}
  If \(U \in H^n(E, E^\#)\) is a Thom class for \(E\) then \(f^*(U) \in H^n(f^*(E), f^*(E)^\#)\) is a Thom class for \(f^*(E)\).
\end{lemma}

\begin{proof}
  The diagram
  \[
    \begin{tikzcd}
      f^*(E) \ar[r, "f_E"] & E \\
      f^*(E)|_{b'} \ar[r, "\cong"] \ar[u, "i_{b'}"] & E|_{f(b')} \ar[u, "i_{f(b')}"]
    \end{tikzcd}
  \]
  commutes so if \(i_{f(b')}^*(U)\) generates \(H^n(E_{f(b')}, E_{f(b')}^\#)\) then \(i_{b'}^*(f_E^*(U))\) generates \(H^n(f^*(E)_{b'}, f^*(E)_{b'}^\#)\).
\end{proof}

\begin{lemma}
  Suppose \(B = B_1 \cup B_2\) and \(U \in H^n(E, E^\#)\). If \(U|_{B_i} = i_i^*(U)\) is a Thom class for \(E|_{B_i}\) for each \(i\) where \(i_i: \pi^{-1}(B_i) \to E\) then \(U\) is a Thom class for \(E\).
\end{lemma}

\begin{proof}
  If \(b \in B\) then \(b \in B_i\) for some \(i\) and if we write \(U|_b = i_b^*(U)\) then \(U|_b = (U|_{B_i})_b\) generates \(H^n(E_b, E_b^\#)\) since \(U|_{B_i}\) is a Thom class.
\end{proof}

\begin{theorem}[Thom isomorphism]\index{Thom isomorphism}
  If \(\pi: E \to B\) is an \(n\)-dimensional vector bundle then
  \begin{enumerate}
  \item \(E\) has a unique \(\Z/2\)-Thom class.
  \item if \(E\) has an \(R\)-Thom class then the map
    \begin{align*}
      \psi: H^*(B; R) &\to H^{* + n}(E, E^\#; R) \\
      a &\mapsto \pi^*(a) \cp U
    \end{align*}
    is an isomorphism.
  \end{enumerate}
\end{theorem}

\begin{proof}
  We will prove this when \(B\) is compact.

  Step 1: the theorem holds if \(E\) is trivial. This is the example above.

  Step 2: suppose \(B_1, B_2 \subseteq B\). Let \(B_\cap = B_1 \cap B_2\). Claim if the theorem holds for \(E|_{B_1}, E|_{B_2}\) and \(E|_{B_1 \cap B_2}\) then it holds for \(E|_{B_1 \cup B_2}\). Write \(E_i = E|_{B_i}\) and similarly \(E_\cap, E_\cup\). Consider the Mayer-Vietoris sequence for \(R = \Z/2\):
  \[
    \begin{tikzcd}[column sep=small,row sep=small]
      H^{n - 1}(E_\cap, E_\cap^\#) \ar[d, equal] \ar[r] & H^n(E_\cup, E_\cup^\#) \ar[r, "\alpha"] & H^n(E_1, E_1^\#) \oplus H^n(E_2, E_2^\#) \ar[r, "\beta"] & H^n(E_\cap, E_\cap^\#) \\
      0
    \end{tikzcd}
  \]
  since \(2\) holds for \(E_\cap\). Since 1 holds for \(E_1\) and \(E_2\), they have Thom classes \(U_i \in H^n(E_i, E_i^\#)\). By lemma \(U_i|_{E_\cap}\) is a Thom class for \(E_\cap\). By 1 \(U_i|_{E_\cap} = U_\cap\) is the unique Thom class for \(E_\cap\), so \(\beta(U_1 \oplus U_2) = U_\cap - U_\cap = 0\). By exactness \(U_1 \oplus U_2 \in \im \alpha\) so exists \(U_\cup \in H^n(E_\cup, E_\cup^\#)\) with \(U_\cup|_{E_i} = U_i\). By lemma \(U_\cup\) is a Thom class for \(E_\cup\).

  For uniqueness note that if \(U_\cup'\) is a Thom class for \(E_\cup\) then \(U_\cup'|_{E_i}\) is a Thom class for \(E_i\) so again by uniqueness \(U_\cup'|_{E_i} = U_i\), i.e.\ \(\alpha(U_\cup') = U_1 \oplus U_2\) so \(U_\cup' = U_\cup\) by injectivity of \(\alpha\).

  For part 2, consider the commutative diagram of Mayer-Vietoris sequences
  \[
    \begin{tikzcd}
      H^*(B_\cup) \ar[r] \ar[d, "\psi_\cup"] & H^*(B_1) \oplus H^*(B_2) \ar[r] \ar[d, "\psi_1 \oplus \psi_2"] & H^*(B_\cap) \ar[d, "\psi_\cap"] & \\
      H^{* + n}(E_\cup, E_\cup^\#) \ar[r] & H^{* + n}(E_1, E_1^\#) \oplus H^{* + n}(E_2, E_2^\#) \ar[r] & H^{* + n}(E_\cap, E_\cap^\#)
    \end{tikzcd}
  \]
  As \(\psi_1 \oplus \psi_2\) and \(\psi_\cap\) are isomorphisms, so is \(\psi_\cup\).

  Step 3: Suppose \(B\) has an open cover \(\{V_i, \cdots, V_k\}\) with \(E|_{V_i}\) trivial. Let \(W_j = \bigcup_{i = 1}^j V_i\). Prove by induction on \(j\) that the theorem holds for \(E|_{W_j}\): if \(j = 1\) then \(W_1 = V_1\) so done by step 1. In general if the theorem holds for \(W_{j - 1}\) it also holds for \(V_j\) and \(V_j \cap W_{j - 1}\) since \(E|_{V_j}\) is trivial implies \(E|_{V_j \cap W_{j - 1}}\) is trival, so holds for \(W_j\) by step 2.
\end{proof}

\paragraph{Sphere bundles}

\begin{definition}[Riemannian metric]\index{Riemannian metric}
  A \emph{Riemannian metric} \(g\) on \(E\) is a map \(g: E \oplus E \to \R\) such that the map \(g|_{(E \oplus E)_b}: E_b \times E_b \to \R\) is an inner product on \(E_b\) for all \(b \in B\).
\end{definition}

\begin{lemma}
  If \(B\) admits partition of unity then \(E\) admits a Riemannian metric.
\end{lemma}

\begin{proof}
  III Differential Geometry.
\end{proof}

\begin{definition}[unit sphere bundle, unit disk bundle]\index{unit sphere bundle}\index{unit disk bundle}
  If \(g\) is a Riemannian metric on \(E\), define the \emph{unit sphere bundle} of \(E\) to be
  \[
    S(E, g) = \{v \in E: g(v, v) = 1\}
  \]
  and the \emph{unit disk bundle} to be
  \[
    D(E, g) = \{v \in E: g(v, v) \leq 1\}.
  \]
\end{definition}

Always have \(S(E, g) \cap E_b \cong S^{n - 1}\) and \(D(E, g) \cap E_b \cong D^n\).

\begin{ex}
  If \(g, g'\) are Riemannian metrics on \(E\) then show \(S(E, g) \cong S(E, g')\) and \(D(E, g) \cong D(E, g')\). As a result we often write \(S(E)\) and \(D(E)\) instead of \(S(E, g)\) and \(D(E, g)\).
\end{ex}

Note that \(S(E) \sim E^\#\) and \(D(E) \sim B\).

\begin{eg}\leavevmode
  \begin{enumerate}
  \item Let \(E = B \times \R^n\) be the trivial bundle. Then \(S(E) = B \times S^{n - 1}, D(E) = B \times D^n\).
  \item Let \(\pi: E \to S^1\) be the Mbius bundle (pic). Then \(D(E)\) is the Mbius band and \(S(E) = \b D(E) \cong S^1 \neq B \times S^0\). This is another proof that \(E\) is nontrivial. In fact this shows \(E\) is nonorientable: we have
    \[
      \begin{tikzcd}
        E^\# \ar[r] \ar[d, "\sim"] & E \ar[d, "\sim"] \\
        S^1 \ar[r, "z \mapsto z^2"] & S^1
      \end{tikzcd}
    \]
    and \(z \mapsto z^2\) has degree \(2\) so the LES of \((E, E^\#)\) gives
    \[
      H^*(E, E^\#; \Z) =
      \begin{cases}
        \Z/2 & * = 2 \\
        0 & \text{otherwise}
      \end{cases}
    \]
    which is not isomorphic to \(H^{* - 1}(B)\). Thus \(E\) is not \(\Z\)-orientable.
  \end{enumerate}
\end{eg}

\paragraph{Gysin sequence}

Assume \(\pi: E \to B\) is \(R\)-oriented with Thom class \(U\). We assume coefficients in \(R\). The LES of \((E, E^\#)\) is
\[
  \begin{tikzcd}
    H^*(E, E^\#) \ar[r, "j^*"] & H^*(E) \ar[r] & H^*(E^\#) \ar[r] & H^{* + 1}(E, E^\#) \\
    H^{* - n}(B) \ar[r, "\alpha"] \ar[u, "\psi"] & H^* (B) \ar[u, "\pi^*"] \ar[r] & H^*(S(E)) \ar[u] \ar[r] & H^{* + 1 - n}(B) \ar[u, "\psi"]
  \end{tikzcd}
\]
where \(j: (E, \emptyset) \to (E, E^\#)\). Thus
\begin{align*}
  \alpha(a)
  &= s_0^* j^* \psi(a) \\
  &= s_0^* j^*(\pi^*(a) \cp U) \\
  &= s_0^*(\pi^*(a) \cp j^*(U)) \\
  &= s_0^* \pi^*(a) \cp s_0^* j^*(U) \\
  &= a \cp s_0^* j^*(U)
\end{align*}

\begin{definition}[Euler class]\index{Euler class}
  If \(\pi: E \to B\) is an \(R\)-oriented \(n\)-dimensional vector bundle with Thom class \(U \in H^*(E, E^\#; R)\), its \emph{Euler class} is
  \[
    e(E) = s_0^*j^*(U) \in H^n(B).
  \]
\end{definition}

\begin{theorem}[Gysin sequence]\index{Gysin sequence}
  If \(\pi: E \to B\) is an \(R\)-oriented \(n\)-dimensional vector bundle, there is a LES
  \[
    \begin{tikzcd}
      \cdots \ar[r] & H^{* - n}(B) \ar[r, "\beta"] & H^*(B) \ar[r, "\pi^*"] & H^*(S(E)) \ar[r] & H^{* + 1 - n}(B) \ar[r] & \cdots
    \end{tikzcd}
  \]
  where \(\beta(a) = a \cp e(E)\).
\end{theorem}

\begin{proposition}
  Let \(\pi: E \to B\) be an \(R\)-oriented \(n\)-dimensional vector bundle. Then
  \begin{enumerate}
  \item if \(f: B' \to B\) then \(f^*(E)\) is \(R\)-oriented and \(e(f^*E) = f^*(e(E))\).
  \item if \(E\) is trivial and \(n > 0\) then \(e(E) = 0\).
  \item if \(\pi: E_i \to B\) are \(R\)-orientable then so is \(E_1 \oplus E_2\) and \(e(E_1 \oplus E_2) = e(E_1) \cp e(E_2)\).
  \item if \(s: B \to E\) is a nonvanishing section and \(n > 0\) then \(e(E) = 0\).
  \end{enumerate}
\end{proposition}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item There is a commutative diagram
    \[
      \begin{tikzcd}
        (B, \emptyset) \ar[r, "s_0"] & (E, \emptyset) \ar[r, "j"] & (E, E^\#) \\
        (B', \emptyset) \ar[r, "s_0'"] \ar[u, "f"] & (f^*E, \emptyset) \ar[r, "j'"] \ar[u, "f_E"] & (f^*E, f^*E^\#) \ar[u, "f_E"]
      \end{tikzcd}
    \]
    \(f_E^*(U)\) is a Thom class for \(f^*(E)\) so \(f^*(E)\) is oriented and
    \[
      e(f^*(E))
      = s_0'^* j'^* f_E^*(U)
      = f^* s_0^* j^*(U)
      = f^*(e(E))
    \]
  \item Let \(\pi: E_0 = \R^n \to \{P\}\), \(e(E_0) \in H^n(\{p\}) = 0\) as \(n > 0\). If \(\pi: E \to B\) is trivial then \(E = f^*E_0\) where \(f: B \to \{p\}\). Thus \(e(E) = f^*(e(E_0)) = 0\).
  \item Example sheet 4.
  \item If \(s\) is a nonvanishing section then \(\langle s \rangle\) is a one dimensional subbundle of \(E\). From example sheet 3 we know \(E = \langle s\rangle \oplus s^\perp\). By 3
    \[
      e(E) = e(\langle s\rangle) \cp e(s^\perp) = 0
    \]
    since \(\langle s\rangle\) is trivial.
  \end{enumerate}
\end{proof}

\begin{eg}
  As an application, let's compute the cohomology ring of projective spaces using Euler class of the tautological bundle\index{tautological bundle}. Recall
  \[
    H_*(\R\P^n; \Z/2) =
    \begin{cases}
      \Z/2 & 0 \leq * \leq n \\
      0 & \text{otherwise}
    \end{cases}
  \]
  so by universal coefficient
  \[
    H^*(\R\P^n; \Z/2) =
    \begin{cases}
      \Z/2 & 0 \leq * \leq n \\
      0 & \text{otherwise}
    \end{cases}
  \]
  Choose a Riemannian metric on \(\tau_{\R\P^n}\) by
  \[
    g(([x], v_1), ([x], v_2)) = \langle v_1, v_2 \rangle
  \]
  using the inner product on \(\R^{n + 1}\). Thus
  \[
    S(\tau(\R\P^n)) = \{([x], v): v \in \R x, \norm v = 1\} \cong S^n.
  \]
  The Gysin sequence for \(\tau_{\R\P^n}\) with \(\Z/2\)-coefficient is
  \[
    \begin{tikzcd}
      H^{* - 1}(\R\P^n) \ar[r, "\beta"] & H^*(\R\P^n) \ar[r] & H^*(S^n) \ar[r] & H^*(\R\P^n)
    \end{tikzcd}
  \]
  Claim that \(\beta\) is an isomorphism for \(1 \leq * \leq n\) for \(n \geq 1\): for \(* = 1\) the relevant bit of LES is
  \[
    \begin{tikzcd}[column sep=scriptsize]
      0 \ar[r] & H^0(\R\P^n) \ar[r, "\cong"] & H^0(S^n) \ar[r, "0"] & H^0(\R\P^n) \ar[r, "\beta"] & H^1(\R\P^n) \ar[r] & H^1(S^n) = 0
    \end{tikzcd}
  \]
  so \(\beta\) is an isomorphism. For \(1 < * < n\) this follows from \(H^{* - 1}(S^n) = H^*(S^n) = 0\). For \(* = n\) we have
  \[
    \begin{tikzcd}[column sep=small, row sep=small]
      H^{n - 1}(S^n) \ar[r] \ar[d, equal] & H^{n - 1}(\R\P^n) \ar[r, "\beta"] & H^n(\R\P^n) \ar[r, "0"] & H^n(S^n) \ar[r, "\cong"] \ar[d, equal] & H^n(\R\P^n) \ar[r] \ar[d, equal] & H^{n + 1}(\R\P^n) \ar[d, equal] \\
      0 & & & \Z/2 & \Z/2 & 0
    \end{tikzcd}
  \]

  Let \(a = e(\tau_{\R\P^n}) \in H^1(\R\P^n; \Z/2)\). Claim that \(\langle a^k \rangle = H^k(\R\P^n; \Z/2)\): induction on \(k\). \(k = 0\) is obvious. Suppose it holds for \(k - 1\). Then we have isomorphism
  \begin{align*}
    \beta: H^{k - 1}(\R\P^n) &\to H^k(\R\P^n) \\
    a^{k - 1} &\mapsto a^k
  \end{align*}
  Furthermore \(H^{n + 1}(\R\P^n) = 0\) so \(a^{n + 1} = 0\). In summary
  \[
    H^*(\R\P^n; \Z/2) = (\Z/2)[a]/(a^{n + 1}).
  \]
\end{eg}

\paragraph{Orientations and Orientability}

We say \(E\) is \emph{orientable}\index{orientable} if it is \(\Z\)-orientable. We have seen on example sheet 3 that any vector bundle over \(S^1\) is isomorphic to \([0, 1] \times \R^n/\sim\) where \((0, v) \sim (1, A v)\) for some \(A \in \GL_n(\R)\). Thus there are precisely two isomorphism classes: \(\det A > 0\) corresponds to the trivial bundle, and \(\det A < 0\) corresponds to the nontrivial, nonorientable bundle.

If \(\gamma: S^1 \to B\), define \(\varphi_E(\gamma) = 0\) if \(\gamma^*E\) is trivial and \(1\) otherwise. If \(\gamma_0 \sim \gamma_1\) then \(\gamma_0^* E \cong \gamma_1^* E\) so \(\varphi_E\) defines a homomorphism \(\varphi_E: \pi_1(B) \to \Z/2\). As \(\Z/2\) is abelian, \(\varphi_E\) factors through the abelianisation of \(\pi_1(B)\)
\[
  \begin{tikzcd}
    \pi_1(B) \ar[r, "\varphi_E"] \ar[d] & \Z/2 \\
    H_1(B) \ar[ur, "\overline \varphi_E"']
  \end{tikzcd}
\]
so \(\overline \varphi_E \in \Hom(H_1(B), \Z/2) \cong H^1(B; \Z/2)\). We quote the result

\begin{theorem}
  \(E\) is orientable if and only if \(\overline \varphi_E = 0\).
\end{theorem}

\begin{corollary}
  If \(H^1(B; \Z/2) = 0\) then \(E\) is orientable.
\end{corollary}

\begin{eg}
  \(\tau_{\C\P^n}\) is orientable. Then the same argument as for \(\R\P^n\) shows that
  \[
    H^*(\C\P^n; \Z) = \Z[a]/(a^{n + 1})
  \]
  where \(a = e(\tau_{\C\P^n})\) has \(|a| = 2\).
\end{eg}

\subsection{Manifolds}

In the last bit of the course we are going to discuss manifolds and Poincar duality.

\begin{definition}[topological manifold]\index{topological manifold}
  An \emph{\(n\)-dimensional (topological) manifold} \(M\) is a second-countable Hausdorff space \(M\) which admits an open cover \(\{U_\alpha: \alpha \in A\}\) and homeomorphisms \(\varphi_\alpha: U_\alpha \to \R^n\) called \emph{charts}\index{chart}.
\end{definition}

The maps
\[
  \psi_{\alpha\beta} = \varphi_\alpha \compose \varphi_\beta^{-1}: \varphi_\beta(U_\alpha \cap U_\beta) \to \varphi_\alpha(U_\alpha \cap U_\beta)
\]
are called \emph{transition functions}\index{transition function}. Like transition functions for vector bundles, they satisfy the cocycle conditions.

\begin{definition}[smooth manifold]\index{smooth manifold}
  A \emph{smooth manifold} is a topological manifold \(M\) together with an open cover \(\{U_\alpha\}\) and charts \(\varphi_\alpha\) such that all transition functions \(\psi_{\alpha\beta}\) are smooth maps.

  If \(M, M'\) are smooth manifold, we say \(f: M \to M'\) is \emph{smooth} if \(\varphi_\beta' \compose f \compose \varphi_\alpha^{-1}\) is smooth where defined for all charts \(\varphi_\alpha\) of \(M\) and \(\varphi_\beta'\) of \(M'\). \(f\) is a \emph{diffeomorphism}\index{diffeomorphism} if \(f\) is a homeomorphism and \(f, f^{-1}\) are smooth.
\end{definition}

\begin{eg}
  \(S^n, \R\P^n, \C\P^n, T^n, \Sigma_g\) are all smooth manifolds.
\end{eg}

\begin{remark}
  If \(M\) is an \(n\)-manifold, we can consider the set of smooth manifolds homeomorphic to \(M\) up to diffeomorphism. For \(n \leq 3\) this set is a singleton. However for \(n > 3\) it could be empty or it could have more than one element.
\end{remark}

We're interested in smooth manifolds in this course because they have a natural bundle, the \emph{tangent bundle}. If \(M\) is a smooth manifold with charts \(\varphi_\alpha\), define
\begin{align*}
  g_{\alpha\beta}: U_\alpha \cap U_\beta &\to \GL_n(\R) \\
  x &\mapsto D \psi_{\alpha\beta}|_{\varphi_\beta(x)}
\end{align*}
Then chain rule says \(g_{\alpha\beta}\)'s satisify the cocycle conditions.

\begin{definition}[tangent bundle]\index{tangent bundle}
  If \(M\) is a smooth manifold as above, the \emph{tangent bundle} \(TM\) is the \(n\)-dimensional vector bundle with transition functions \(g_{\alpha\beta}\).
\end{definition}

\paragraph{Fundamental class}

\begin{notation}
  Suppose \(M^n\) is an \(n\)-manifold and \(A \subseteq M\) compact. Write \((M|A)\) for the pair \((M, M - A)\). If \(B \subseteq A\) we have a map \(i: (M|A) \to (M|B)\). If \(w \in H_*(M|A)\) write \(w|_B = i_*(w)\).
\end{notation}

Fix \(R\)-coefficient. If \(x \in M\) choose a chart with \(U_\alpha \ni x\). By excision
\[
  H_n(M|x) \cong H_n(U_\alpha|x) = H_n(\R^n |\varphi(x)) = H_n(\R^n, \R^n - \varphi(x)) =
  \begin{cases}
    R & * = n \\
    0 & \text{otherwise}
  \end{cases}
\]

\begin{definition}[fundamental class, orientation]\index{fundamental class}\index{orientation}
  An \emph{\(R\)-fundamental class}, or \emph{\(R\)-orientation} for \(M\) is a class \([M] \in H_n(M; R) = H_n(M|M; R)\) such that \([M]|_x\) generates \(H_n(M|x; R) = R\) for all \(x \in M\).
\end{definition}

\begin{theorem}
  Any closed manifold \(M\) has a unique \(\Z/2\)-fundamental class.
\end{theorem}

Recall that we say \(M\) is \emph{closed}\index{topological manifold!closed} if it is compact.

\begin{theorem}
  If \(M\) is closed and connected then
  \begin{enumerate}
  \item \(H_n(M; \Z/2) \cong \Z/2 = \langle [M] \rangle\).
  \item \(H_n(M; \Z)\) is \(\Z\) or \(0\) and if \(M\) is \(\Z\)-orientable then \(H_n(M; \Z) = \Z = \langle [M] \rangle\).
  \item \(H_i(M) = 0\) for all \(i > n\).
  \end{enumerate}
\end{theorem}

\begin{proof}
  Non-examinable and see lecture handout. Similar to the proof for Thom class, we show orientability is a local condition and use Mayer-Vietoris to glue together.
\end{proof}

\paragraph{Submanifolds}

\begin{definition}[submanifold]\index{submanifold}
  Suppose \(M\) is a smooth \(n\)-manifold. \(N \subseteq M\) is a \(k\)-dimensional \emph{submanifold} of \(M\) if for every \(x \in N\) there exists an open neighbourhood \(U_x \ni x\) and a chart \(\varphi_x: U_x \to \R^n\) such that \(\varphi_x(U_\alpha \cap N) = \R^k \times 0 \subset \R^n\).
\end{definition}

If so then \(N\) is a smooth \(k\)-manifold.

\begin{eg}
  \(S^{n - 1} \subseteq S^n, \R\P^{n - 1} \subseteq \R\P^n, S^n \times \{p\} \subseteq S^n \times S^m\).
\end{eg}

If \(N \subseteq M\) is a submanifold then \(TN \subseteq TM|_N\) is a subbundle.

\begin{definition}[normal bundle]\index{normal bundle}
  The \emph{normal bundle} is defined as \(\nu_{M/N} = TN^\perp \subseteq TM|_N\) so \(TM|_N = \nu_{M/N} \oplus TN\).
\end{definition}

Note that to define \(TN^\perp\) we need to pick a Riemannian metric on \(TM\). However the isomorphism class of \(\nu_{M/N}\) is independent of the choice. In fact \(\nu_{M/N} \cong TM|_N/TN\).

\begin{ex}\leavevmode
  \begin{enumerate}
  \item \(M = \R^{n + 1}, N = S^n\). Then \(\nu_{\R^{n + 1}/S^n}\) is trivial since it has a section \(x \mapsto x\). Note \(T\R^{n + 1}|_{S^n} \cong \nu \oplus TS^n\), where \(T\R^{n + 1}|_{S^n}\) and \(\nu\) are trivial but \(TS^n\) is not necessarily trivial.
  \item Let \(M\) be the Mbius band and \(N = S^1\) its central band. Then \(\nu_{M/N}\) is the Mbius bundle.
  \item Let \(M = \R\P^{n + 1}, N = \R\P^n\) then \(\nu_{M/N} = \tau_{\R\P^n}\).
  \item Similarly if \(M = \C\P^{n + 1}, N = \C\P^n\) then \(\nu_{M/N} = \tau_{\C\P^n}\).
  \end{enumerate}
\end{ex}

We need a technical tool from differential geometry:

\begin{theorem}[tubular neighbourhood theorem]\index{tubular neighbourhood theorem}
  If \(N \subseteq M\) is a submanifold, there is an open \(V\subseteq M\), \(N \subseteq V\) such that \((V, N) \cong (\nu_{M/N}, s_0(N))\).
\end{theorem}

\begin{proof}
  Omitted. Proved using \(\exp: \nu_{M/N} \to M\) by showing that it is locally a diffeomorphism.
\end{proof}

\begin{proposition}
  \(M\) is \(\Z\)-orientable if and only if \(TM\) is \(\Z\)-orientable.
\end{proposition}

\begin{proof}[Sketch proof]
  If \(S^1 \cong \gamma \subseteq M\) is a submanifold, we get a tubular neighbourhood \(V(\gamma)\). \(M\) is orientable if and only if \(V(\gamma)\) is orientable for all \(\gamma\), if and only if \(TM|_{V(\gamma)}\) is orientable, if and only if \(TM|_\gamma\) is orientable, if and only if \(TM\) is orientable.
\end{proof}

\subsection{Poincar duality}

Use \(R\) coefficient throughout, where \(R\) be either \(\Z\) or a field. Let \(M\) be a closed connected smooth \(n\)-manifold and denote by \([M]\) the \(R\)-fundamental class for \(M\). Recall that if \(M\) is connected and \(R\)-orientable then \(H_n(M) = R\).

\begin{corollary}
  \(H^n(M) \cong R\).
\end{corollary}

\begin{proof}
  If \(R\) is a field then \(H^n(M) \cong \Hom_\Z(H_n(M), R) \cong R\). If \(R\) is \(\Z\) then \(M\) is \(\Z/p\)-oriented for every prime \(p\) since the image of \([M]\) under \(H_n(M; \Z) \to H_n(M; \Z/p)\) is a \(\Z/p\)-fundamental class so \(H_n(M; \Z/p) \cong \Z/p\). \(H_n(M; \Z) \cong \Z\) so by universal coefficient \(H_{n - 1}(M; \Z)\) has no \(p\)-torsion. Hence \(H_{n - 1}(M; \Z)\) is free so \(H^n(M; \Z) \cong \Z\).
\end{proof}

Now suppose \(N \subseteq M\) is a \(k\)-dimensional closed submanifold and \(\nu = \nu_{M/N}\) is its normal bundle. \(V\) is a tubular neighbourhood for \(N\) so \((V|N) \cong (\nu, \nu^\#)\).

\begin{lemma}
  \(N\) is orientable if and only if \(\nu\) is orientable.
\end{lemma}

\begin{proof}[Sketch proof]
  \(M\) is orientable implies \(TM\) is orientable, so \(TM|_N\) is orientable, so \(\overline \varphi_{TM|_N} = 0\) where \(\overline \varphi_{TM|_N} \in H^1(N; \Z/2)\). Now \(TM|_N = TN \oplus \nu\) so \(\overline \varphi_{TM|_N} = \overline \varphi_{TN} + \overline \varphi_\nu = 0\). Thus \(\overline \varphi_{TN} = 0\) if and only if \(\overline \varphi_\nu = 0\).
\end{proof}

Now suppose \(N\) is \(R\)-orientable, so \(\nu\) is \(R\)-orientable. Consider the following maps:
\[
  \begin{tikzcd}
    (M, \emptyset) \ar[r, "j"] \ar[dr, "\beta"'] & (M|N) \ar[d, "\alpha"] & (V|N) \ar[l] & (\nu, \nu^\#) \ar[l, "\cong"'] \ar[ll, bend left, "i"] \\
    & (M|x)
  \end{tikzcd}
\]
The maps \(i_*\) and \(i^*\) are isomorphisms by excision.

\begin{lemma}
  \(j_*[M]\) generates \(H_n(M|N) \cong R\).
\end{lemma}

\begin{proof}
  By excision and Thom isomorphism,
  \[
    H^*(M|N) \cong H^*(V|N) \cong H^*(\nu, \nu^\#) \cong H^{* - n + k}(N) =
    \begin{cases}
      R & * = n \\
      0 & * > n
    \end{cases}
  \]
  By universal coefficient, it follows that \(H_n(M|N) \cong R\). \([M]\) is a fundamental class so \(\beta_*[M] = \alpha_* j_*[M]\) generates \(H_n(M|x) \cong R\). Thus \(j_*[M]\) generates \(H_n(M|N)\).
\end{proof}

Let \([N]^* \in H^k(N)\) be given by \(\langle [N]^*, [N] \rangle = 1 \in R\).

\begin{corollary}
  There is a unique \(R\)-orientation \(U_{M/N}\) on \(\nu\) such that
  \[
    \langle \pi^*[N]^* \cp U_{M/N}, i_*^{-1} j_*[M] \rangle = 1 \in R.
  \]
\end{corollary}

\begin{proof}
  \(i_*^{-1} j_* [M]\) generates \(H_n(\nu, \nu^\#) \cong R\). Let \(U\) be some Thom class for \(\nu\). \([N]^*\) generates \(H^k(N)\) so \(\pi^*[N]^* \cp U\) generates \(H^n(\nu, \nu^\#)\). So \(\langle \pi^* [N]^* \cp U, i_*^{-1} j_* [M] \rangle = r\) generates \(R\). Take \(U_{M/N} = r^{-1}U\).
\end{proof}

\begin{definition}[Poincar dual]\index{Poincar dual}
  If \([M]\) and \([N]\) are \(R\)-orientations on \(M\) and \(N\), the \emph{Poincar dual} of \(N\) is
  \[
    PD_{[M]}([N]) = j^*(i^*)^{-1} (U_{M/N}) \in H^{n - k}(M).
  \]
\end{definition}

The key ingredient is
\begin{proposition}
  If \(a \in H^k(M)\) then
  \[
    \langle a, i_{0*} [N] \rangle = \langle a\cp PD_{[M]}([N]), [M] \rangle
  \]
  where \(i_0: N \embed M\).
\end{proposition}

\begin{proof}
  \([N]^*\) generates \(H^k(N) \cong R\) so if \(c = \langle a, i_{0*}[N] \rangle = \langle i_0^* a, [N] \rangle\) then \(i_0^*(a) = c [N]^*\). We have
  \[
    \begin{tikzcd}
      V \cong \nu \ar[r, "i"] \ar[d, "\pi"] & M \\
      N \ar[ur, "i_0"']
    \end{tikzcd}
  \]
  which commutes up to homotopy, so \(i^*(a) = \pi^* i_0^*(a) = c \pi^*[N]^*\). So
  \begin{align*}
    \langle a \cp PD_{[M]}([N]), [M] \rangle
    &= \langle a \cp j^* (i^*)^{-1} U_{M/N}, [M] \rangle \\
    &= \langle a \cp (i^*)^{-1} U_{M/N}, j_*[M] \rangle \\
    &= \langle i^* a \cp U_{M/N}, (i_*)^{-1} j_*([M]) \rangle \\
    &= \langle c \pi^*[N]^* \cp U_{M/N}, (i_0)^{-1} j_* [M] \rangle \\\
    &= c \\
    &= \langle a, i_{0*}[N] \rangle
  \end{align*}
\end{proof}

\begin{eg}
  Let \(N = \{p\} \subseteq M\). Then
  \[
    \langle1 \cp PD_M(N), [M] \rangle = \langle 1, [p] \rangle = 1
  \]
  so \(PD_M(\{p\}) = [M]^*\).
\end{eg}

\begin{definition}[cup product pairing]\index{cup product pairing}
  The \emph{cup product pairing} on \(H^*(M)\) is the bilinear map
  \begin{align*}
    (\cdot, \cdot): H^*(M) \times H^*(M) &\to R \\
    (a, b) &\mapsto \langle a \cp b, [M] \rangle
  \end{align*}
\end{definition}
We thus have \(\langle a, i_{0*}[N] \rangle = (a, PD_{[M]}([N]))\).

\begin{remark}
  Cup product pairing splits as a sum of pairings \((\cdot, \cdot): H^k(M) \times H^{n - k}(M) \to R\).
\end{remark}

\begin{definition}
  Let \(V\) and \(W\) be \(\F\)-vector spaces. A bilinear pairing \((\cdot, \cdot): V \times W \to \F\) is \emph{nonsingular} if
  \begin{enumerate}
  \item \((v, w) = 0\) for all \(v \in V\) implies \(w = 0\) and
  \item \((v, w) = 0\) for all \(w \in W\) implies \(v = 0\). 
  \end{enumerate}

  \((\cdot, \cdot)\) induces maps \(\varphi: V \to W^*, \psi: W \to V^*\).
\end{definition}

\begin{lemma}
  If \(V\) and \(W\) are finite dimensional and \((\cdot, \cdot)\) is nonsingular then \(\varphi\) and \(\psi\) are isomorphisms.
\end{lemma}

\begin{proof}
  Nonsingularity implies that \(\varphi\) and \(\psi\) are injective. Now use dimensions.
\end{proof}

We need another technical tool from differential geometry.

\begin{definition}[transverse]\index{transverse}
  Two submanifolds \(N_1, N_2 \subseteq M\) are \emph{transverse}, written \(N_1 \pitchfork N_2\) if for every \(x \in N_1 \cap N_2\) there is a chart \(\varphi_x: U_x \to \R^n\) with \(\varphi_x(x) = 0\) and \(\varphi_x(N_1 \cap U_x) = \R^k \times \R^{n_1 - k} \times 0, \varphi_x(N_2 \cap U_x) = \R^k \times 0 \times \R^{n_2 - k}\). If so \(N' = N_1 \cap N_2\) is a \(k\)-dimensional submanifold of \(N_1, N_2\) and \(M\).
\end{definition}

From differential geometry we know \(N_1 \pitchfork N_2\) if \(TN_1|_x + TN_1|_x = TM|_x\) for all \(x \in N'\).

\begin{proposition}
  If \(N_1 \pitchfork N_2\) and \(i_2: N_2 \embed M\) is the inclusion then \(i_2^*(PD_M(N_1)) = PD_{N_2}(N')\).
\end{proposition}

\begin{proof}
  Let \(V\) be a tubular neighbourhood of \(N_1\). If \(V\) is small enough then \(V' = N_1\cap V\) is a tubular neighbourhood of \(N'\) in \(N_2\). Consider the diagram
  \[
    \begin{tikzcd}[row sep=tiny]
      (M, \emptyset) \ar[r, "j"] & (M|N_1) & (V|N_1) \cong (\nu, \nu^\#) \ar[l] \\
      & & & (\R^{n - n_1}|0) \ar[ul, "i_x"'] \ar[dl, "i_x'"] \\
      (N_2, \emptyset) \ar[uu, "i_2"] \ar[r, "j'"] & (N_2|N') \ar[uu] & (V'|N') \cong (\nu', \nu'^\#) \ar[l] \ar[uu, "i_2"] 
    \end{tikzcd}
  \]
  Have \(i_2 \compose i_x' \sim i_x\). If \(U\) is a Thom class for \((V|N_1)\) then \(i_x'^*(i_2^*U) = i_x^*(U)\) generates \(H^{n - n_1}(\R^{n - n_1}|0)\) so \(i_2^*(U)\) is a Thom class for \((V'|N')\). Now
  \[
    i_2^* PD_M(N_1) = i_2^* j^* (i^*)^{-1} U = j'^* (i'^*)^{-1}(i_2^*U) = PD_{N_2}(N').
  \]
\end{proof}

Now consider \(\Delta = \{(x, x): x \in M\} \subseteq M \times M\). \(\Delta\) is an \(n\)-dimensional submanifold in \(M \times M\). Assume \(R = \F\) is a field. Suppose \(M\) is orientable with dual fundamental class \([M]^*\) then \(M \times M\) is orientable with dual fundamental class \([M]^* \times [M]^*\). Let \(D = PD_{M \times M}(\Delta)\).

\begin{lemma}
  If \(a \in H^*(M)\) then
  \[
    (1 \times a) \cp D = (a \times 1) \cp D.
  \]
\end{lemma}

\begin{proof}
  Consider
  \[
    \begin{tikzcd}
      V \ar[r, "i"] & M \times M \\
      M \ar[ur, "\Delta"'] \ar[u, "s_0"]
    \end{tikzcd}
  \]
  where \(V\) is a tubular neighbourhood of \(\Delta\). As \(s_0: M \to V\) is a homotopy equivalence, \(s_0^*\) is an isomorphism. Then
  \[
    s_0^* i^*(a \times 1) = \Delta^*(a \times 1) = a \cp 1 = 1 \cp a = \Delta^*(1 \times a) = s_0^* i^*(1 \times a)
  \]
  so \(i^*(a \times 1) = i^*(1 \times a)\). Then we have the following sequence of equalities:
  \begin{align*}
    i^*(a \times 1) \cp U &= i^*(1 \times a) \cp U \\
    (a \times 1) \cp (i^*)^{-1}U &= (1 \times a) \cp (i^*)^{-1}U \\
    (a \times 1) \cp j^*(i^*)^{-1}U &= (1 \times a) \cp j^*(i^*)^{-1}U \\
    (a \times 1) \cp D &= (1 \times a) \cp D
  \end{align*}
\end{proof}

Choose a basis \(\{a_i\}\) for \(H^*(M)\). \(\F\) is a field so \(H^*(M \times M) = H^*(M) \otimes H^*(M)\). Write \(D = \sum_i a_i \times b_i\) for some \(b_i \in H^{n - |a_i|}(M)\).

\begin{lemma}
  \(D = [M]^* \times 1 + \sum_{|a_i| < n} a_i \times b_i\).
\end{lemma}

\begin{proof}
  Consider \(i_y: M \to M \times M, x \mapsto (x, y)\). \(M \times y \pitchfork \Delta\) so
  \[
    i_y^*(PD_{M \times M}(\Delta)) = PD_{M \times y}(\Delta \cap M \times y) = PD_M(\{y\}) = [M]^*.
  \]
  Now
  \begin{align*}
    i_y^*(a_i \times b_i) &= i_y^*(\pi_1^*(a_i) \cp \pi_2^*(b_i)) \\
                          &= (\pi_1 \compose i_y)^* a_i \cp (\pi_2 \compose i_y)^*b_i \\
                          &=
                            \begin{cases}
                              a_i b_i & b_i \in H^0(M) \cong \F \\
                              0 & \text{otherwise}
                            \end{cases}
  \end{align*}
  Write \(D = [M]^* \times b_0 + \sum_{|a_i| < n} a_i \times b_i\). Then
  \[
    [M]^* = i_y^*(D) = [M]^* b_0 + 0
  \]
  so \(b_0 = 1\).
\end{proof}

\begin{lemma}
  \label{lem:decomposition by cup product pairing}
  If \(a \in H^*(M)\) is homogeneous then \(a = \sum (-1)^{n |a|}(a, a_i) b_i\).
\end{lemma}

\begin{proof}
  As \((1 \times a) \cp D = (a \times 1) \cp D\), we have
  \[
    \sum (-1)^{|a_i||a|} a_i \times (a \cp b_i) = \sum (a \cp a_i) \times b_i.
  \]
  By degree consideration only terms of the form \([M]^* \times c\) where \(c \in H^0(M)\) do not vanish on LHS. Thus by the previous lemma
  \[
    (-1)^{n|a|} [M]^* \times a = \sum \langle a \cp a_i, [M] \rangle [M]^* \times b_i
  \]
  so \(a = (-1)^{n|a|} \sum (a, a_i) b_i\).
\end{proof}

\begin{corollary}[Poincar duality]\index{Poincar duality}
  Suppose \(\F\) is a field and \(M\) is \(\F\)-oriented. Then
  \begin{enumerate}
  \item the cup product pairing \((\cdot, \cdot): H^k(M) \times H^{n - k}(M) \to \F\) is nonsingular.
  \item there is an isomorphism \(PD: H_k(M) \to H^{n - k}(M)\) given by \(\langle a, x \rangle = (a, PD(x))\).
  \end{enumerate}
\end{corollary}

\begin{proof}\leavevmode
  \begin{enumerate}
  \item If \((a, b) = 0\) for all \(b\) then \(a = 0\) by \Cref{lem:decomposition by cup product pairing}. As \((a, b) = (-1)^{|a||b|} (b, a)\), \((\cdot, \cdot)\) is nonsingular.
  \item Poincar duality and universal coefficient give two isomorphisms
    \begin{align*}
      \alpha: H^{n - k}(M) &\to H^k(M)^* \\
      \alpha(b)(a) &= (a, b) \\
      \beta: H_k(M) &\to H^k(M)^* \\
      \beta(x)(a) &= \langle a, x \rangle
    \end{align*}
    so define \(PD = \alpha^{-1} \compose \beta\).
  \end{enumerate}
\end{proof}

We conclude with three applications of Poincar duality

\begin{proposition}
  If \(a_i, b_i\) are as above then \((a_i, b_j) = (-1)^{|b_i|} \delta_{ij}\).
\end{proposition}

\begin{proof}
  \(a = b_j\) in lemma 3.
\end{proof}

\begin{proposition}
  If \(\pi: E \to M\) is a vector bundle with transverse sections \(s, s_0: M \to E\) then
  \[
    e(E) = s_0^*(PD_E(s)) = PD_M(s^{-1}(0)).
  \]
\end{proposition}

\begin{proposition}
  \(e(TM) = \chi(M) [M]^*\).
\end{proposition}

\begin{proof}
  \begin{align*}
    \langle e(TM), [M] \rangle
    &= (D, D) \quad \text{cup product pairing in } M \times M \\
    &= (\sum a_i \times b_i, \sum (-1)^{|a_i||b_i|} b_i \times a_i) \\
    &= \sum_i (-1)^{|b_i|} \\
    &= \chi(M)
  \end{align*}
\end{proof}

\printindex
\end{document}
